var Acl;(function(){var n=function(n){return function(t){function o(n,t,i,r){var f=u[n];f&&(f.allow.prop("checked",t==!0).prop("disabled",!i),f.deny.prop("checked",t==!1).prop("disabled",!i),r(f))}var f,i,u,r,e;return t="#"+t,f="{D2C0C70A-59EF-429C-9EC2-097A06BD0B2F}",u={},r=function(t,r){i.find("input[type=checkbox]").prop("checked",!1).prop("disabled",!1),i.find("a.Inherited").hide(),n.each(r||{},function(n,t){return o(n,t.allow,!1,function(n){return n.inherited.show().data(f,t.inheritedFrom)})}),n.each(t||{},function(n,t){return o(n,t,!0,function(n){return n.inherited.hide()})})},r=gate(function(){return i},r),n(function(){i=n(t),i.find("span[data-id]").each(function(){var i=n(this),t=i.closest("tr");u[i.data("id")]={tr:t,allow:t.find("input.Allow"),deny:t.find("input.Deny"),inherited:t.find("a.Inherited")}}),i.find("a.Inherited").click(function(){var t=n(".Acl-InheritedResetPopup:first"),o=n(".Override",t),i,e,r,u;if(!t.is(":visible"))return i=n(this).data(f),t.find(".InheritedFromName").text(i),t.find(".InheritedFromBox").toggle(!!i),e=t.parent(),t.appendTo("body").css({left:"",top:"",position:"absolute"}).position({my:"left top",at:"left bottom",of:this}).fadeIn(100),r=n(this).parents("tr").eq(0),u=function(i){return i.target==o[0]&&(r.find("input[type=checkbox]").prop("disabled",!1).prop("checked",!1),r.find("a.Inherited").empty()),t.fadeOut(100,function(){return t.appendTo(e)}),n(document).unbind("click",u),!1},setTimeout(function(){n(document).click(u)},1),!1}),i.find("input.Allow, input.Deny").bind("click change",function(){n(this).prop("checked")&&(n(this).closest("tr").find("input.Allow, input.Deny").prop("checked",!1),n(this).prop("checked",!0)),n(e).trigger("change")}),releaseGate(r)}),e={setPrivileges:r,getPrivileges:function(){var t={};return n.each(u,function(n,i){i.inherited.is(":visible")||(t[n]=i.allow.prop("checked")?!0:i.deny.prop("checked")?!1:null)}),t},onChange:function(t){return n(e).bind("change",t)}}}};define(["jQuery","lpp.mvc.controls/utilities"],n)})(Acl||(Acl={}))