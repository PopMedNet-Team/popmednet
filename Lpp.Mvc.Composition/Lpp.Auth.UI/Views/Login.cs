//------------------------------------------------------------------------------
// <auto-generated>
//     This code was generated by a tool.
//     Runtime Version:4.0.30319.17929
//
//     Changes to this file may cause incorrect behavior and will be lost if
//     the code is regenerated.
// </auto-generated>
//------------------------------------------------------------------------------

namespace Lpp.Auth.UI.Views {
    using System;
    using System.Collections.Generic;
    using System.IO;
    using System.Linq;
    using System.Net;
    using System.Web;
    using System.Web.Helpers;
    using System.Web.Security;
    using System.Web.UI;
    using System.Web.WebPages;
    using System.Web.Mvc;
    using System.Web.Mvc.Ajax;
    using System.Web.Mvc.Html;
    using System.Web.Routing;
    using Lpp;
    using Lpp.Mvc;
    using Lpp.Mvc.Application;
    using Lpp.Auth;
    using Lpp.Auth.UI;
    
    
    public partial class Login : System.Web.Mvc.WebViewPage<LoginModel> {
        
#line hidden

        
        public Login() {
        }
        
        protected System.Web.HttpApplication ApplicationInstance {
            get {
                return ((System.Web.HttpApplication)(Context.ApplicationInstance));
            }
        }
        
        public override void Execute() {


            
            #line 2 "c:\work\DNS\trunk\Lpp.Mvc.Composition\Lpp.Auth.UI\Views\Login.cshtml"
  
    this.Stylesheet( "Login.css" );


            
            #line default
            #line hidden
WriteLiteral("\r\n<div class=\"OpenIdLogins\">\r\n");


            
            #line 7 "c:\work\DNS\trunk\Lpp.Mvc.Composition\Lpp.Auth.UI\Views\Login.cshtml"
 foreach ( var p in Model.Providers )
{

            
            #line default
            #line hidden
WriteLiteral("    <a class=\"OpenIdLogin");


            
            #line 9 "c:\work\DNS\trunk\Lpp.Mvc.Composition\Lpp.Auth.UI\Views\Login.cshtml"
                     Write( p.RequireUsername ? " UN" : "" );

            
            #line default
            #line hidden
WriteLiteral("\" id=\"");


            
            #line 9 "c:\work\DNS\trunk\Lpp.Mvc.Composition\Lpp.Auth.UI\Views\Login.cshtml"
                                                             Write(p.Guid);

            
            #line default
            #line hidden
WriteLiteral("\" title=\"");


            
            #line 9 "c:\work\DNS\trunk\Lpp.Mvc.Composition\Lpp.Auth.UI\Views\Login.cshtml"
                                                                             Write(p.Name);

            
            #line default
            #line hidden
WriteLiteral("\"\r\n        href=\"");


            
            #line 10 "c:\work\DNS\trunk\Lpp.Mvc.Composition\Lpp.Auth.UI\Views\Login.cshtml"
          Write( p.RequireUsername ? "#" : Url.Action( (AuthController c) => c.DoLogin( p.Guid.ToString(), null, Model.ReturnTo ) ) );

            
            #line default
            #line hidden
WriteLiteral("\">\r\n        <img src=\"");


            
            #line 11 "c:\work\DNS\trunk\Lpp.Mvc.Composition\Lpp.Auth.UI\Views\Login.cshtml"
             Write(p.ImageUrl( Url ));

            
            #line default
            #line hidden
WriteLiteral("\" alt=\"");


            
            #line 11 "c:\work\DNS\trunk\Lpp.Mvc.Composition\Lpp.Auth.UI\Views\Login.cshtml"
                                      Write(p.Name);

            
            #line default
            #line hidden
WriteLiteral("\" />\r\n    </a>\r\n");


            
            #line 13 "c:\work\DNS\trunk\Lpp.Mvc.Composition\Lpp.Auth.UI\Views\Login.cshtml"
}

            
            #line default
            #line hidden
WriteLiteral(@"</div>

<div class=""OpenIdExplicitUsername"">
    Enter your <span id=""OpenIdProvider""></span> user name:<br />
    <input type=""text"" id=""OpenIdUsername"" />
    <input type=""submit"" id=""OpenIdLoginButton"" value=""Login"" />
</div>

<script>
    $$(function ($) {
        var onExplicitUsernameLoginClick = null;

        $("".OpenIdLogins a.UN"").click(function () {
            var guid = $(this).attr(""id"");
            if (!guid) return;

            var dlg = $("".OpenIdExplicitUsername"");
            if (!dlg.is("":visible"")) dlg.fadeIn(""fast"");

            $(""#OpenIdProvider"").text(name);
            var username = $(""#OpenIdUsername"").focus();
            onExplicitUsernameLoginClick = function () {
                if (!dlg.is("":visible"") || !username.val()) return;
                location.href = '");


            
            #line 37 "c:\work\DNS\trunk\Lpp.Mvc.Composition\Lpp.Auth.UI\Views\Login.cshtml"
                            Write(Html.Raw( Url.Action<AuthController>( c => c.DoLogin( "__guid__", "__un__", Model.ReturnTo ) )
                                    .Replace( "__guid__", "' + guid + '" )
                                    .Replace( "__un__", "' + username.val() + '" ) 
                                  ));

            
            #line default
            #line hidden
WriteLiteral("\';\r\n            };\r\n        });\r\n\r\n        $(\"#OpenIdLoginButton\").button().click" +
"(function () {\r\n            if (onExplicitUsernameLoginClick) onExplicitUsername" +
"LoginClick();\r\n            return false;\r\n        });\r\n    });\r\n</script>");


        }
    }
}
