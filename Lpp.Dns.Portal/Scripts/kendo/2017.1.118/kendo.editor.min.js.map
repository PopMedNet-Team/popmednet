{"version":3,"sources":["kendo.editor.js"],"names":["f","define","kendo","UndoRedoStack","Observable","extend","init","options","fn","call","this","clear","events","push","command","stack","slice","currentCommandIndex","undo","canUndo","trigger","redo","canRedo","length","deepExtend","util","amd","a1","a2","a3","$","undefined","Tool","FormatTool","bomFill","emptyElementContent","emptyTableCellContent","window","Class","Widget","ui","os","support","mobileOS","browser","proxy","keys","SELECT","SELECT_OVERLAY_SELECTOR","ToolTemplate","getHtml","template","useWithBlock","EditorUtils","editorWrapperTemplate","buttonTemplate","colorPickerTemplate","comboBoxTemplate","dropDownListTemplate","separatorTemplate","overflowAnchorTemplate","formatByName","name","format","i","inArray","tags","getToolCssClass","toolCssClassNames","superscript","subscript","justifyLeft","justifyCenter","justifyRight","justifyFull","insertUnorderedList","insertOrderedList","import","indent","outdent","createLink","unlink","insertImage","insertFile","viewHtml","foreColor","backColor","createTable","addColumnLeft","addColumnRight","addRowAbove","addRowBelow","deleteRow","deleteColumn","tableWizard","tableWizardInsert","cleanFormatting","cssClass","registerTool","toolName","tool","toolOptions","toLowerCase","Editor","defaultTools","registerFormat","formatName","formats","messages","bold","italic","underline","strikethrough","insertHtml","fontName","fontNameInherit","fontSize","fontSizeInherit","formatBlock","formatting","style","emptyFolder","editAreaTitle","uploadFile","orderBy","orderBySize","orderByName","invalidFileType","deleteFile","overwriteFile","directoryNotFound","imageWebAddress","imageAltText","imageWidth","imageHeight","fileWebAddress","fileTitle","linkWebAddress","linkText","linkToolTip","linkOpenInNewWindow","dialogUpdate","dialogInsert","dialogOk","dialogCancel","createTableHint","tableTab","cellTab","accessibilityTab","caption","summary","width","height","cellSpacing","cellPadding","cellMargin","alignment","background","id","border","borderStyle","collapseBorders","wrapText","associateCellsWithHeaders","alignLeft","alignCenter","alignRight","alignLeftTop","alignCenterTop","alignRightTop","alignLeftMiddle","alignCenterMiddle","alignRightMiddle","alignLeftBottom","alignCenterBottom","alignRightBottom","alignRemove","columns","rows","selectAllCells","exportAs","supportedBrowser","ios","flatVersion","document","documentElement","contentEditable","toolGroups","basic","lists","indenting","links","tables","element","value","toolbarContainer","toolbarOptions","type","domElement","that","editorNS","editor","dom","Dom","tools","_registerHandler","closest","update","_wrapTextarea","wrapper","find","attr","addClass","popup","insertBefore","toolbar","Toolbar","bindTo","setTimeout","heightStyle","expectedHeight","parseInt","actualHeight","indexOf","isNaN","_resizable","_initializeContentElement","keyboard","Keyboard","BackspaceHandler","TypingHandler","SystemHandler","SelectAllHandler","clipboard","Clipboard","undoRedoStack","textarea","encoded","trim","defaultValue","replace","innerHTML","mousedown","_endTyping","mouseup","e","_mouseup","_initializeImmutables","resize","notify","setOptions","isTypingInProgress","endTyping","saveSelection","_selectionChange","_selectionStarted","resizableWidget","resizable","isResizable","isPlainObject","content","insertAfter","kendoResizable","start","currentTarget","initialSize","append","delta","y","initialDelta","newSize","min","max","Infinity","Math","resizeend","remove","getKendoResizable","draggable","ignore","_initializeTableResizing","TableResizing","create","_showTableResizeHandlesProxy","_showTableResizeHandles","bind","_destroyTableResizing","tableResizing","destroy","unbind","showResizeHandles","_initializeColumnResizing","ColumnResizing","_destroyColumnResizing","columnResizing","_initializeRowResizing","RowResizing","_destroyRowResizing","rowResizing","w","h","editorWrap","editArea","appendTo","css","_createContentElement","stylesheets","iframe","wnd","doc","specifiedDomain","domain","domainScript","src","location","hostname","hide","title","frameBorder","tabIndex","contentWindow","contentDocument","one","decorateFrom","body","open","write","isRtl","msie","edge","map","href","join","close","_blur","old","val","_oldValue","encodedValue","_spellCorrect","beforeCorrection","falseTrigger","contextmenu","_spellCorrectTimeout","RestorePoint","getRange","input","mozilla","_finishUpdate","handler","eventNames","t","NS","_handlers","hasOwnProperty","applyEventMap","split","on","_deregisterHandlers","handlers","off","blurTrigger","mousedownTrigger","_mousedown","execCommand","touch","keydown","_activeElement","focus","range","left","container","offset","direction","next","nextChar","keyCode","BACKSPACE","DELETE","getAttribute","F10","preventDefault","LEFT","RIGHT","nodeType","nodeValue","setStart","collapse","selectRange","toolFromShortcut","keyPressCommand","test","exec","_runPostContentKeyCommands","clearTimeout","keypress","keyup","selectionCodes","TAB","PAGEUP","PAGEDOWN","END","HOME","UP","DOWN","INSERT","ctrlKey","altKey","shiftKey","click","target","createRange","selectNode","cut copy paste","focusin","hasAttribute","show","focusout","toolbarContainerElement","active","get","contains","preventPopupHide","is","focused","removeClass","immutables","Immutables","gecko","which","o","cmd","toolsFromShortcut","changesContent","refresh","_destroyResizings","deserialization","custom","serialization","entities","semantic","scripts","pasteCleanup","all","keepNewLines","msAllFormatting","msConvertLists","msTags","none","span","dialogOptions","modal","animation","imageBrowser","fileBrowser","text","concat","_focusOutside","_destroyUploadWidget","dispose","tempInput","blur","_uploadWidget","state","textNodes","finder","RangeUtils","collapsed","startContainer","getFormat","isFormatted","html","currentHtml","Serializer","domToXhtml","htmlToDom","selectionRestorePoint","refreshTools","commonAncestorContainer","_focusBody","scrollTop","activeElement","restoreSelection","toRange","encode","getSelection","SelectionUtils","selectionFromDocument","selection","removeAllRanges","addRange","rangeCount","getRangeAt","endContainer","startOffset","endOffset","selectedHtml","cloneContents","paste","InsertHtmlCommand","params","prevented","Error","_range","toolById","managesUndoRedo","async","change","key","ctrl","plugin","initialize","unselectable","children","commandArguments","noop","FormatCommand","formatter","nodes","toggleClass","version","_bomFill","PDFMixin","prototype","_drawPDF","drawing","drawDOM","pdf","saveAsPDF","progress","Deferred","promise","args","then","root","exportPDF","done","dataURI","saveAs","fileName","proxyURL","forceProxy","resolve","fail","err","reject","jQuery","makeMap","items","len","obj","whitespace","emptyspace","rgb","bom","whitespaceOrBom","persistedScrollTop","cssAttributes","htmlRe","entityRe","entityTable","STYLE","FLOAT","CSSFLOAT","STYLEFLOAT","CLASS","KMARKER","empty","nonListBlockElements","blockElements","block","inlineElements","inline","fillAttrs","normalize","node","parent","firstChild","prev","nextSibling","34","38","39","60","62","160","161","162","163","164","165","166","167","168","169","170","171","172","173","174","175","176","177","178","179","180","181","182","183","184","185","186","187","188","189","190","191","192","193","194","195","196","197","198","199","200","201","202","203","204","205","206","207","208","209","210","211","212","213","214","215","216","217","218","219","220","221","222","223","224","225","226","227","228","229","230","231","232","233","234","235","236","237","238","239","240","241","242","243","244","245","246","247","248","249","250","251","252","253","254","255","402","913","914","915","916","917","918","919","920","921","922","923","924","925","926","927","928","929","931","932","933","934","935","936","937","945","946","947","948","949","950","951","952","953","954","955","956","957","958","959","960","961","962","963","964","965","966","967","968","969","977","978","982","8226","8230","8242","8243","8254","8260","8472","8465","8476","8482","8501","8592","8593","8594","8595","8596","8629","8656","8657","8658","8659","8660","8704","8706","8707","8709","8711","8712","8713","8715","8719","8721","8722","8727","8730","8733","8734","8736","8743","8744","8745","8746","8747","8756","8764","8773","8776","8800","8801","8804","8805","8834","8835","8836","8838","8839","8853","8855","8869","8901","8968","8969","8970","8971","9001","9002","9674","9824","9827","9829","9830","338","339","352","353","376","710","732","8194","8195","8201","8204","8205","8206","8207","8211","8212","8216","8217","8218","8220","8221","8222","8224","8225","8240","8249","8250","8364","findNodeIndex","skipText","previousSibling","isDataNode","data","isAncestorOf","parentNode","isAncestorOrSelf","findClosestAncestor","getNodeLength","childNodes","splitDataNode","temp","newNode","cloneNode","denormalizedText","iterator","deleteData","attrEquals","attributes","cssFloat","blockParentOrBody","parentOfType","ownerDocument","blockParents","blocks","windowFromDocument","defaultView","parentWindow","nodeTypes","ELEMENT_NODE","ATTRIBUTE_NODE","TEXT_NODE","CDATA_SECTION_NODE","ENTITY_REFERENCE_NODE","ENTITY_NODE","PROCESSING_INSTRUCTION_NODE","COMMENT_NODE","DOCUMENT_NODE","DOCUMENT_TYPE_NODE","DOCUMENT_FRAGMENT_NODE","NOTATION_NODE","toHex","color","matches","x","toString","encodableChars","c","charCode","charCodeAt","entity","isBom","stripBom","stripBomNode","removeChild","insignificant","className","_moz_dirty","_moz_editor_bogus_node","tableCell","significantNodes","grep","child","emptyTextNode","emptyNode","nodeName","significantChildNodes","isWhitespace","lastTextNode","result","lastChild","isMarker","allWhitespaceContent","isEmptyspace","htmlIndentSpace","sibling","isPrevBlock","isNextBlock","el","isBlock","isEmpty","isInline","list","scrollContainer","webkit","compatMode","scrollTo","elementTop","elementHeight","windowHeight","innerHeight","top","offsetHeight","ceil","persistScrollTop","offsetParent","offsetTop","offsetLeft","restoreScrollTop","insertAt","newElement","position","referenceElement","removeTextSiblings","tag","closestBy","condition","rootCondition","ofType","changeTag","tagName","skipAttributes","attribute","specified","cssText","setAttribute","appendChild","editableParent","wrap","unwrap","createElement","removeAttribute","unstyle","inlineStyle","getEffectiveBackground","backgroundStyle","innerText","classNames","classes","commonAncestor","ancestors","first","j","count","arguments","paths","minPathLength","output","reverse","closestSplittableParent","editableParents","editableAncestor","apply","closestEditable","types","editable","closestEditableOfType","filter","invert","filterFn","filterBy","match","ensureTrailingBreaks","elements","ensureTrailingBreak","removeTrailingBreak","br","supportsLeadingWhitespace","isFunction","TD","fontSizeMappings","quoteRe","brRe","pixelRe","emptyPRe","cssDeclaration","sizzleAttr","scriptAttr","onerrorRe","div","toEditableHtml","_toEditableImmutables","immutable","last","prependTo","_fillEmptyElements","each","p","_removeSystemElements","_resetOrderedLists","ol","originalStart","ols","getElementsByTagName","_preventScriptExecution","l","legacyIE","originalSrc","originalHref","deserialize","semanticFilter","cssProperties","property","properties","lastIndex","styleAttr","specifiedAttributes","$node","sort","a","b","htmlEncode","skip","skipEncoding","childNode","isEmptyBomNode","mapper","previous","hasClass","serialize","tagMap","end","textOnly","childrenCount","textChild","runCustom","k:script","font","size","semanticAttributes","textDecoration","fontFamily","strong","em","u","face","script","compareBoundaries","startAncestor","endAncestor","fixIvalidRange","toStart","isInvalidRange","ex","updateRangeProperties","textRangeContainer","textRange","duplicate","right","parentElement","adoptContainer","cursorNode","textOffset","isData","anchorNode","anchorParent","cursor","createTextRange","moveToElementText","setEndPoint","adoptEndPoint","index","comparison","appended","compareEndPoints","RangeIterator","W3CSelection","RangeEnumerator","ImmutablesRangeIterator","ImmutablesRangeEnumerator","Marker","boundary","selectionFromWindow","selectionFromRange","rangeDocument","documentFromRange","W3CRange","setEnd","setStartBefore","setStartAfter","setEndBefore","setEndAfter","selectNodeContents","deleteContents","cloneRange","deleteSubtree","hasPartialSubtree","getSubtreeIterator","cloneSubtree","frag","createDocumentFragment","extractContents","extractSubtree","originalRange","insertNode","startNodeName","endNodeName","fromNode","_current","_next","_end","hasNext","current","traverse","callback","nodeIndex","inStartContainer","inEndContainer","getSubRange","subRange","select","movedStart","movedEnd","item","enumerate","visit","rootNode","getEditable","nodeToPath","serializedImmutables","removeImmutables","restoreImmutables","lastType","restoreHtml","path","toRangePoint","denormalizedOffset","caret","addCaret","removeCaret","containerIndex","textNode","add","expand","rangeBoundary","isExpandable","_removeDeadMarkers","createTextNode","_normalizedIndex","pointer","shouldNormalizeStart","shouldNormalizeEnd","shouldNormalize","collapsedToStart","startParent","endParent","startIndex","endIndex","editableTextNodes","immutableParent","image","stringify","partition","contents","partitionRange","mapAll","mapped","getAll","predicate","selector","getMarkers","isStartOf","isEndOf","wrapSelectedElements","isEnd","startEditable","endEditable","beforeCaret","afterCaret","search","substring","finishUpdate","startRestorePoint","endRestorePoint","GenericCommand","selected","getSibling","PREVIOUS_SIBLING","Command","restorePoint","marker","lockRange","releaseRange","point","createDialog","kendoWindow","toggle","expandImmutablesIn","genericCommand","postProcess","InsertHtmlTool","initOptions","dataSource","_selectBox","SelectBox","dataTextField","dataValueField","highlightFirst","selectbox","tableCells","tableCellsWrappers","tableElements","inTable","RemoveTableContent","cellsTypes","startCell","endCell","_removeContent","cell","forwards","getNext","removeTableContent","backspaceHandler","isTypingKey","evt","Event","isDefaultPrevented","immutablesContext","deleteSelection","startTyping","_addCaret","_restoreCaret","_handleDelete","_merge","_cleanBomBefore","_handleBackspace","li","ListFormatter","_handleSelection","ancestor","table","emptyParagraphContent","_handleImmutables","_surroundFullySelectedAnchor","_join","startImmutable","endImmutable","_root","dest","_mergeWithTextNode","appendedNode","_isCaret","method","backspace","del","systemCommandIsInProgress","createUndoCommand","changed","isModifierKey","isSystem","_toSelectableImmutables","_selectEditorBody","typingInProgress","isCharacter","String","fromCharCode","modifier","_getShortcutModifier","navigator","platform","alt","shift","mac","toUpperCase","metaKey","matchesKey","found","matchKey","toolKey","isArray","onEndTyping","stopTyping","force","timeout","what","cleaners","ScriptCleaner","TabCleaner","MSWordFormatCleaner","WebkitFormatCleaner","HtmlTagsCleaner","HtmlAttrCleaner","HtmlContentCleaner","CustomCleaner","htmlToFragment","fragment","_startModification","_inProgress","_endModification","modificationInfo","_contentModification","before","after","_removeBomNodes","_onBeforeCopy","oncopy","oncut","_fileToDataURL","blob","deferred","reader","FileReader","File","getAsFile","onload","readAsDataURL","_triggerPaste","_handleImagePaste","clipboardData","images","originalEvent","files","when","results","Array","onpaste","r","clipboardRange","clipboardNode","_decoreateClipboardNode","_moveToCaretPosition","containers","clean","borderWidth","overflow","margin","padding","fontVariant","fontWeight","lineSpacing","lineHeight","nodeOffset","caretOffset","_caretOffset","translateX","translateY","translate","-webkit-transform","transform","rangeChanged","isStartTextNode","prevLength","bomNode","splittableParent","splittable","fragmentsHtml","rangeEnd","skipCleaners","applicable","display","Cleaner","replacements","customReplacements","replacement","junkReplacements","convertFontMatch","$0","$1","closing","faceRe","family","stripEmptyAnchors","listType","listData","startingSymbol","matchSymbol","symbol","isNumber","trimStartText","_guessUnorderedListStyle","_guessOrderedListStyle","_convertToLi","extractListLevels","msoListRegExp","level","placeholder","rootMargin","listContainer","listIndex","levelType","blockChildren","lastMargin","levels","parseFloat","marginLeft","listStyleType","removeAttributes","removeAttributeNode","createColGroup","row","cells","colgroup","convertHeaders","boldedCells","removeParagraphs","paragraphs","removeDefaultColors","spans","firstRow","longestRow","eq","headers","titles","removeFormatting","filters","DomCleaner","cleanDom","collectTags","collectAttr","removeAttr","TextContainer","HtmlTextLines","separators","line","lines","inlineBlockText","resetLine","appendText","textContainer","appendInlineBlockText","flashInlineBlockText","endLine","il","il1","jl","jl1","DomEnumerator","preventDown","hasText","enumerator","buildText","getDefaultSeparators","htmlLines","action","actions","ul","thead","tbody","td","cleaner","tdCleaner","cellText","PrintCommand","print","ExportPdfCommand","initialValue","ev","MOUSEDOWN_NS","InlineFormatFinder","numberOfSiblings","referenceNode","textNodesCount","elementNodesCount","markerCount","findSuitable","sourceNode","findFormat","InlineFormatter","values","activate","formatNode","formatNodes","consolidate","pop","GreedyInlineFormatFinder","greedyProperty","getInlineCssValue","attributeValue","pair","cssIndex","propertyAndValue","getFormatInner","parents","parentsUntil","addBack","toArray","GreedyInlineFormatter","toCamelCase","InlineFormatTool","DelayedExecutionTool","FontTool","cssAttr","domAttr","widget","ColorTool","palette","_widget","ColorPicker","toolIcon","picker","sender","_popup","fontStyle","listElements","BlockFormatFinder","candidate","suitable","_resolveListsItems","ImmutablesNS","BlockFormatter","imageFormat","imageAttributes","nonImages","applyFormatting","immutableFormat","splice","namedFormat","GreedyBlockFormatter","immutalbeParent","blockFormatter","formatTag","_initOptions","BlockFormatTool","textAlign","float","marginRight","listStylePosition","ParagraphCommand","_insertMarker","_moveFocus","focusNode","shouldTrim","startInBlock","endInBlock","_blankAfter","paragraph","heading","rng","parentChildrenLength","siblings","NewLineCommand","filler","oldIE","ListFormatFinder","unwrapTag","isList","isImmutable","containsAny","_parentLists","merge","breakable","applyOnSection","section","pushAncestor","addLastSection","lastSection","sections","lastNodes","ListCommand","ListTool","lastIndexOfRegExp","str","indexOfRegExp","HTTP_PROTOCOL","protocolRegExp","endLinkCharsRegExp","LinkFormatFinder","LinkFormatter","markers","ref","UnlinkCommand","LinkCommand","url","_dialogTemplate","img","dialog","_initialText","_close","visible","_apply","_keydown","linkUrl","_dialog","center","ENTER","ESC","textInput","anchor","AutoLinkCommand","linkMarker","linkRange","detectedLink","detectLink","_ensureWebProtocol","traverser","LeftDomTextTraverser","cancelAtNode","detection","DomTextLinkDetection","hasProtocol","_hasProtocolPrefix","_prefixWithWebProtocol","UnlinkTool","DomPos","puntuationOptions","puntuationTraverser","_detectEnd","blank","clone","_detectStart","_isLinkDetected","extendOptions","RightDomTextTraverser","_skipStartPuntuation","ii","DomTextTraverser","cancel","_traverse","edgeNode","subText","splitIndex","SPACEBAR","KEDITORFILEURL","KEDITORFILETITLE","FileCommand","file","showBrowser","applied","keyDown","FileBrowser","transport","read","_fileBrowser","KEDITORIMAGEURL","KEDITORIMAGETITLE","KEDITORIMAGEWIDTH","KEDITORIMAGEHEIGHT","ImageCommand","removeIEAttributes","onerror","ImageBrowser","_imageBrowser","DropDownList","_initSelectOverlay","autoSize","listWidth","whiteSpace","_listWidth","scrollbar","selectBox","view","decorate","indentDirection","IndentFormatter","targets","parentList","siblingList","nestedList","targetIndex","mapImmutables","targetNode","listParent","nextAll","IndentCommand","indentFormatter","OutdentCommand","OutdentTool","isOutdentable","listParentsCount","suitableNodes","ViewHtmlCommand","unwrapListItem","listFormatter","FormattingTool","toFormattingItem","dot","context","kendoSelectBox","dataItem","toJSON","dataBound","getFormattingValue","n","_ancestor","field","operator","CleanFormatCommand","tagsToClean","outerWidth","_outerWidth","outerHeight","_outerHeight","OVERFLOWANCHOR","focusable","toolNamesByCssClass","k-i-sup-script","k-i-sub-script","k-i-align-left","k-i-align-center","k-i-align-right","k-i-align-justify","k-i-list-unordered","k-i-list-ordered","k-i-login","k-i-indent-increase","k-i-indent-decrease","k-i-link-horizontal","k-i-unlink-horizontal","k-i-image","k-i-file-add","k-i-html","k-i-foreground-color","k-i-paint","k-i-table","k-i-table-column-insert-left","k-i-table-column-insert-right","k-i-table-row-insert-above","k-i-table-row-insert-below","k-i-table-row-delete","k-i-table-column-delete","k-i-table-properties","k-i-table-wizard","k-i-clear-css","OverflowAnchorTool","overflowPopup","_initPopup","_resizeHandler","onResize","groups","advanced","fonts","colors","overflowFlaseTools","prepend","dragHandle","effects","minHeight","autoFocus","dragend","_moved","_toggleOverflowStyles","_initOverflowPopup","popupTemplate","kendoPopup","origin","copyAnchorStyles","focusOverflowPopup","toolGroupFor","isCustomTool","_editor","expandTools","render","combobox","dropDown","isOpened","stopImmediatePropagation","_attachEvents","inheritText","_toolName","overflowAnchor","description","tooltip","_appendShortcutSequence","editorElement","editorOffset","editorOptions","_overlaps","box","toolbarWrapper","toolbarWrapperOffset","toolbarWrapperLeft","toolbarWrapperTop","boxOffset","boxOffsetLeft","boxOffsetTop","TABINDEX","localizedText","res","_nativeTools","currentTool","nativeTools","endGroup","group","groupPosition","startGroup","toolElement","groupName","newGroupName","toolConfig","updateGroups","angular","unbindResize","popupElement","attachToolsEvents","buttons","enabledButtons","disabledButtons","dropdown","colorpicker","editorTools","move","constrain","focusElement","currentContainer","_executeToolCommand","button","stopPropagation","toolname","lastIndexOf","_immutablesContext","_updateImmutablesState","uiData","groupUi","uiElement","trackImmutables","toolsToBeUpdated","_resize","containerWidth","_refreshWidths","_shrink","_stretch","idx","visibleGroups","_groupsWidth","_visibleGroups","_hideGroup","hiddenGroups","_hiddenGroups","_showGroup","detach","ACTIVESTATE","SELECTEDSTATE","getTouches","columnTemplate","tableFormatFinder","TableCommand","_tableHtml","columnHtml","rowHeight","insertedTable","PopupTool","twTool","_open","_activate","_toggle","TableWizardTool","TableWizardCommand","insertNewTable","InsertTableTool","cols","tableFromLocation","floor","clientY","cellHeight","col","clientX","scrollLeft","cellWidth","firstCell","lastCell","getOffset","offsetWidth","autoApplyNS","_setTableSize","_exec","_valid","status","selectedRows","selectedColumns","tableSize","InsertRowCommand","cellCount","newRow","InsertColumnCommand","columnIndex","newCell","DeleteRowCommand","DeleteColumnCommand","columnCount","TableModificationTool","defaultExportAsItems","ExportAsCommand","exportType","postToProxy","generateForm","submit","exportAsOptions","form","valueInput","exportTypeInput","fileNameInput","ExportAsTool","changeHandler","unshift","loadingOverlay","ImportCommand","_initializeUploadWidget","importOptions","upload","kendoUpload","success","_onUploadSuccess","_onUploadProgress","_onUploadSelect","error","_onUploadError","complete","_onUploadComplete","showFileList","multiple","saveUrl","proxyUrl","autoUpload","saveField","validation","allowedExtensions","maxFileSize","getKendoUpload","_trigger","clearAllFiles","_removeLoadingOverlay","response","validationErrors","_initLoadingOverlay","eventType","uploadEvent","_iframeWrapper","_container","lowerBound","upperBound","getScrollBarWidth","scrollHeight","clientHeight","calculatePercentageRatio","total","inPercentages","STRING","REGEX_NUMBER_IN_PERCENTAGES","inPixels","REGEX_NUMBER_IN_PIXELS","toPercentages","PERCENTAGE","toPixels","PIXEL","global","math","ResizingUtils","KEY_DOWN","MOUSE_DOWN","MOUSE_ENTER","MOUSE_LEAVE","MOUSE_MOVE","MOUSE_UP","COMMA","DOT","LAST_CHILD","TABLE","TableElementResizing","_attachEventHandlers","eventNamespace","rootElement","_destroyResizeHandle","rtl","handle","dataAttribute","detectElementBorderHovering","resizingInProgress","resizing","handleOptions","tableElement","resizeHandle","elementBorderHovered","showResizeHandle","_initResizeHandle","setResizeHandlePosition","setResizeHandleDimensions","setResizeHandleDataAttributes","_attachResizeHandleEventHandlers","_initResizable","_hideResizeMarker","markerClass","_destroyResizable","Resizable","draggableElement","onResizeStart","onResizeEnd","_disableKeyboard","setResizeHandleDragPosition","_enableKeyboard","_forceResizing","userEvents","ResizingFactory","resizingName","_destroyResizing","_initResizing","parentTable","resizingType","abs","RESIZE_HANDLE_CLASS","RESIZE_MARKER_CLASS","BODY","TBODY","TH","TR","WIDTH","column","handleWidth","borderOffset","mousePosition","tableBody","scrollTopOffset","scrollLeftOffset","columnWidthOffset","scrollBarWidth","columnWidth","columnLeftOffset","adjacentColumnWidth","handleOffset","newWidth","initialAdjacentColumnWidth","initialColumnWidth","rtlModifier","initialDeltaX","_setTableComputedWidth","_setColumnsComputedWidth","_resizeColumn","_resizeTopAndBottomColumns","_resizeAdjacentColumns","tableBodyWidth","currentColumnsWidths","topAndBottomColumns","deltaWidth","adjacentColumns","_resizeAdjacentColumn","adjacentColumn","RESIZE_HANDLE_MARKER_WRAPPER_CLASS","HEIGHT","handleHeight","rowPosition","tableBodyTopOffset","currentRowHeight","initialTableHeight","tableBodyHeight","initialStyleHeight","newRowHeight","_setRowsHeightInPixels","_setTableHeight","_setRowsHeightInPercentages","currentRowsHeights","newHeight","HandlePositioningStrategy","EastPositioningStrategy","NorthPositioningStrategy","NortheastPositioningStrategy","NorthwestPositioningStrategy","SouthPositioningStrategy","SoutheastPositioningStrategy","SouthwestPositioningStrategy","WestPositioningStrategy","DraggingStrategyFactory","HandleDraggingStrategy","HorizontalDraggingStrategy","EastDraggingStrategy","WestDraggingStrategy","VerticalDraggingStrategy","NorthDraggingStrategy","SouthDraggingStrategy","HorizontalAndVerticalDraggingStrategy","NorthEastDraggingStrategy","NorthWestDraggingStrategy","SouthEastDraggingStrategy","SouthWestDraggingStrategy","Draggable","DRAG_START","DRAG","DRAG_END","HALF_INSIDE","MOUSE_OVER","MOUSE_OUT","EAST","NORTH","NORTHEAST","NORTHWEST","SOUTH","SOUTHEAST","SOUTHWEST","WEST","TableResizeHandle","_addStyles","_initDraggable","_initPositioningStrategy","_initDraggingStrategy","resizableElement","_destroyDraggable","_setPosition","_positioningStrategy","getPosition","_onMouseOver","_onMouseOut","_draggable","dragstart","_onDragStart","drag","_onDrag","_onDragEnd","_draggingStrategy","adjustDragDelta","deltaX","deltaY","initialDeltaY","StrategyFactory","_items","register","itemsLength","PositioningStrategyFactory","calculatePosition","handleOffsetPosition","applyHandleOffset","scrollOffsetPosition","applyScrollOffset","adjustment","deltas","xAxisAdjustment","yAxisAdjustment","isUndefined","RESIZE_HANDLE_WRAPPER_CLASS","TABLE_CLASS","TABLE_RESIZING_CLASS","COLUMN","ROW","handles","_destroyResizeHandles","appendHandlesTo","minWidth","_resizeWidth","_resizeHeight","ratioValue","ratioTotalValue","constrainedWidth","styleWidth","currentWidth","parentWidth","maxWidth","_getMaxDimensionValue","_initialElementWidth","_setColumnsWidth","constrainedHeight","styleHeight","currentHeight","parentHeight","maxHeight","hasRowsInPixels","_hasRowsInPixels","_initialElementHeight","dimension","dimensionLowercase","parentDimension","parentScrollOffset","isWidthInPercentages","parentColumn","columnsLength","_initResizeHandles","_showResizeHandles","_bindToResizeHandlesEvents","_onResizeHandleDragStart","_onResizeHandleDrag","_onResizeHandleDragEnd","_onResizeHandleMouseOver","_onResizeHandleMouseOut","TableResizingFactory","factory","eventTarget","eventCurrentTarget","isResizeHandleOrChild","complexBlocks","IMMUTABALE","IMMUTABALE_MARKER_SELECTOR","IMMUTABLE_SELECTOR","startImmutableParent","endImmutableParent","editableNodes","randomId","chars","charAt","round","random","serialized","replaceWith","deletingKey","updateToolOptions","_toHtml","serializationType","isDeleting","shouldCancelEvent","_cancelDeleting","_cancelTyping","cancelDeleting","closestSelectionLi","closestImmutableLi","nextImmutable","_removeImmutable","commonContainer","_nextNode","cellsFormatFinder","reUnit","selectedTable","_sourceTable","_selectedTable","selectedCells","_selectedTableCells","_selectedCells","closeCallback","onDialogClose","parseTable","TableWizardDialog","insertTable","createNewTable","updateTable","lastSelectedRow","rowIndex","cellsLength","newRowsCount","cellIndex","cellProp","tableRows","tableProp","tableProperties","collection","_deleteTableRows","insertRow","_insertCells","deleteCell","_updateTableProperties","cellProperties","_updateCellProperties","_updateCaption","cellsWithHeaders","cellsWithHeadersAssociated","associateCellsWithHeader","_isHeadingRow","associate","nextRow","isDataRow","timestamp","Date","getTime","ids","generateIds","modifySellsIds","modifyCellsHeadings","isHeadingRow","associatedCells","headingIds","headersAttr","insertCell","rowParent","cellPropToAll","createTBody","_getStylesData","captionContent","deleteCaption","createCaption","_getAlignmentData","captionAlignment","verticalAlign","widthUnit","heightUnit","backgroundColor","bgColor","borderColor","borderCollapse","align","tStyle","captionClone","tableAlignment","tableJson","_getAlignment","_getUnit","parseTableRows","rowData","cellData","parseCell","cStyle","horizontalOnly","vAlign","hAlign","unit","TableWizardEditTool","numericTextBoxSettings","units","borderStyles","tableAlignmentDropDownSettings","valueTemplate","cellAlignmentDropDownSettings","accessibilityAlignmentDropDownSettings","dialogTemplate","okHandler","collectDialogValues","tableData","closeHandler","_initTabStripComponent","_initTableViewComponents","_initCellViewComponents","_initAccessibilityViewComponents","components","tabStrip","kendoTabStrip","_collectTableViewValues","_collectCellViewValues","_collectAccessibilityViewValues","tableView","checked","cellView","accessibilityView","_addUnit","_initNumericTextbox","_initDropDownList","_initTableAlignmentDropDown","_initColorPicker","_initInput","_initCheckbox","_initCellAlignmentDropDown","_initAccessibilityAlignmentDropDown","storage","settings","component","kendoNumericTextBox","kendoDropDownList","_setComponentValue","_initAlignmentDropDown","kendoColorPicker","clearButton","_destroyComponents"],"mappings":"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","file":"kendo.editor.min.js","sourcesContent":["/*!\n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n                                                                                                                                                                                                       \n\n*/\n(function (f, define) {\n    define('util/undoredostack', ['kendo.core'], f);\n}(function () {\n    (function (kendo) {\n        var UndoRedoStack = kendo.Observable.extend({\n            init: function (options) {\n                kendo.Observable.fn.init.call(this, options);\n                this.clear();\n            },\n            events: [\n                'undo',\n                'redo'\n            ],\n            push: function (command) {\n                this.stack = this.stack.slice(0, this.currentCommandIndex + 1);\n                this.currentCommandIndex = this.stack.push(command) - 1;\n            },\n            undo: function () {\n                if (this.canUndo()) {\n                    var command = this.stack[this.currentCommandIndex--];\n                    command.undo();\n                    this.trigger('undo', { command: command });\n                }\n            },\n            redo: function () {\n                if (this.canRedo()) {\n                    var command = this.stack[++this.currentCommandIndex];\n                    command.redo();\n                    this.trigger('redo', { command: command });\n                }\n            },\n            clear: function () {\n                this.stack = [];\n                this.currentCommandIndex = -1;\n            },\n            canUndo: function () {\n                return this.currentCommandIndex >= 0;\n            },\n            canRedo: function () {\n                return this.currentCommandIndex != this.stack.length - 1;\n            }\n        });\n        kendo.deepExtend(kendo, { util: { UndoRedoStack: UndoRedoStack } });\n    }(kendo));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/main', [\n        'util/undoredostack',\n        'kendo.combobox',\n        'kendo.dropdownlist',\n        'kendo.window',\n        'kendo.colorpicker'\n    ], f);\n}(function () {\n    (function ($, undefined) {\n        var kendo = window.kendo, Class = kendo.Class, Widget = kendo.ui.Widget, os = kendo.support.mobileOS, browser = kendo.support.browser, extend = $.extend, proxy = $.proxy, deepExtend = kendo.deepExtend, keys = kendo.keys;\n        var SELECT = 'select';\n        var SELECT_OVERLAY_SELECTOR = 'select.k-select-overlay';\n        var ToolTemplate = Class.extend({\n            init: function (options) {\n                this.options = options;\n            },\n            getHtml: function () {\n                var options = this.options;\n                return kendo.template(options.template, { useWithBlock: false })(options);\n            }\n        });\n        var EditorUtils = {\n            editorWrapperTemplate: '<table cellspacing=\"4\" cellpadding=\"0\" class=\"k-widget k-editor k-header\" role=\"presentation\"><tbody>' + '<tr role=\"presentation\"><td class=\"k-editor-toolbar-wrap\" role=\"presentation\"><ul class=\"k-editor-toolbar\" role=\"toolbar\" /></td></tr>' + '<tr><td class=\"k-editable-area\" /></tr>' + '</tbody></table>',\n            buttonTemplate: '# var iconCssClass= \"k-icon k-i-\" + kendo.toHyphens(data.cssClass.replace(\"k-\", \"\"));#' + '<a tabindex=\"0\" role=\"button\" class=\"k-tool\"' + '#= data.popup ? \" data-popup\" : \"\" #' + ' unselectable=\"on\" title=\"#= data.title #\"><span unselectable=\"on\" class=\"k-tool-icon #= iconCssClass #\"></span><span class=\"k-tool-text\">#= data.title #</span></a>',\n            colorPickerTemplate: '<div class=\"k-colorpicker k-icon k-i-#= data.cssClass.replace(\"k-\", \"\") #\" />',\n            comboBoxTemplate: '<select title=\"#= data.title #\" class=\"#= data.cssClass #\" />',\n            dropDownListTemplate: '<span class=\"k-editor-dropdown\"><select title=\"#= data.title #\" class=\"#= data.cssClass #\" /></span>',\n            separatorTemplate: '<span class=\"k-separator\" />',\n            overflowAnchorTemplate: '<a href=\"\" role=\"button\" class=\"k-tool k-overflow-anchor\" data-popup' + ' unselectable=\"on\"><span unselectable=\"on\" class=\"k-icon k-i-more-vertical\"></span></a>',\n            formatByName: function (name, format) {\n                for (var i = 0; i < format.length; i++) {\n                    if ($.inArray(name, format[i].tags) >= 0) {\n                        return format[i];\n                    }\n                }\n            },\n            getToolCssClass: function (name) {\n                var toolCssClassNames = {\n                    superscript: 'sup-script',\n                    subscript: 'sub-script',\n                    justifyLeft: 'align-left',\n                    justifyCenter: 'align-center',\n                    justifyRight: 'align-right',\n                    justifyFull: 'align-justify',\n                    insertUnorderedList: 'list-unordered',\n                    insertOrderedList: 'list-ordered',\n                    'import': 'login',\n                    indent: 'indent-increase',\n                    outdent: 'indent-decrease',\n                    createLink: 'link-horizontal',\n                    unlink: 'unlink-horizontal',\n                    insertImage: 'image',\n                    insertFile: 'file-add',\n                    viewHtml: 'html',\n                    foreColor: 'foreground-color',\n                    backColor: 'paint',\n                    createTable: 'table',\n                    addColumnLeft: 'table-column-insert-left',\n                    addColumnRight: 'table-column-insert-right',\n                    addRowAbove: 'table-row-insert-above',\n                    addRowBelow: 'table-row-insert-below',\n                    deleteRow: 'table-row-delete',\n                    deleteColumn: 'table-column-delete',\n                    tableWizard: 'table-properties',\n                    tableWizardInsert: 'table-wizard',\n                    cleanFormatting: 'clear-css'\n                };\n                var cssClass = toolCssClassNames[name];\n                if (cssClass) {\n                    return cssClass;\n                }\n                return name;\n            },\n            registerTool: function (toolName, tool) {\n                var toolOptions = tool.options;\n                if (toolOptions && toolOptions.template) {\n                    toolOptions.template.options.cssClass = 'k-' + EditorUtils.getToolCssClass(toolName);\n                }\n                if (!tool.name) {\n                    tool.options.name = toolName;\n                    tool.name = toolName.toLowerCase();\n                }\n                Editor.defaultTools[toolName] = tool;\n            },\n            registerFormat: function (formatName, format) {\n                Editor.fn.options.formats[formatName] = format;\n            }\n        };\n        var messages = {\n            bold: 'Bold',\n            italic: 'Italic',\n            underline: 'Underline',\n            strikethrough: 'Strikethrough',\n            superscript: 'Superscript',\n            subscript: 'Subscript',\n            justifyCenter: 'Center text',\n            justifyLeft: 'Align text left',\n            justifyRight: 'Align text right',\n            justifyFull: 'Justify',\n            insertUnorderedList: 'Insert unordered list',\n            insertOrderedList: 'Insert ordered list',\n            indent: 'Indent',\n            outdent: 'Outdent',\n            createLink: 'Insert hyperlink',\n            unlink: 'Remove hyperlink',\n            insertImage: 'Insert image',\n            insertFile: 'Insert file',\n            insertHtml: 'Insert HTML',\n            viewHtml: 'View HTML',\n            fontName: 'Select font family',\n            fontNameInherit: '(inherited font)',\n            fontSize: 'Select font size',\n            fontSizeInherit: '(inherited size)',\n            formatBlock: 'Format',\n            formatting: 'Format',\n            foreColor: 'Color',\n            backColor: 'Background color',\n            style: 'Styles',\n            emptyFolder: 'Empty Folder',\n            editAreaTitle: 'Editable area. Press F10 for toolbar.',\n            uploadFile: 'Upload',\n            orderBy: 'Arrange by:',\n            orderBySize: 'Size',\n            orderByName: 'Name',\n            invalidFileType: 'The selected file \"{0}\" is not valid. Supported file types are {1}.',\n            deleteFile: 'Are you sure you want to delete \"{0}\"?',\n            overwriteFile: 'A file with name \"{0}\" already exists in the current directory. Do you want to overwrite it?',\n            directoryNotFound: 'A directory with this name was not found.',\n            imageWebAddress: 'Web address',\n            imageAltText: 'Alternate text',\n            imageWidth: 'Width (px)',\n            imageHeight: 'Height (px)',\n            fileWebAddress: 'Web address',\n            fileTitle: 'Title',\n            linkWebAddress: 'Web address',\n            linkText: 'Text',\n            linkToolTip: 'ToolTip',\n            linkOpenInNewWindow: 'Open link in new window',\n            dialogUpdate: 'Update',\n            dialogInsert: 'Insert',\n            dialogOk: 'Ok',\n            dialogCancel: 'Cancel',\n            cleanFormatting: 'Clean formatting',\n            createTable: 'Create table',\n            createTableHint: 'Create a {0} x {1} table',\n            addColumnLeft: 'Add column on the left',\n            addColumnRight: 'Add column on the right',\n            addRowAbove: 'Add row above',\n            addRowBelow: 'Add row below',\n            deleteRow: 'Delete row',\n            deleteColumn: 'Delete column',\n            tableWizard: 'Table Wizard',\n            tableTab: 'Table',\n            cellTab: 'Cell',\n            accessibilityTab: 'Accessibility',\n            caption: 'Caption',\n            summary: 'Summary',\n            width: 'Width',\n            height: 'Height',\n            cellSpacing: 'Cell Spacing',\n            cellPadding: 'Cell Padding',\n            cellMargin: 'Cell Margin',\n            alignment: 'Alignment',\n            background: 'Background',\n            cssClass: 'CSS Class',\n            id: 'ID',\n            border: 'Border',\n            borderStyle: 'Border Style',\n            collapseBorders: 'Collapse borders',\n            wrapText: 'Wrap text',\n            associateCellsWithHeaders: 'Associate cells with headers',\n            alignLeft: 'Align Left',\n            alignCenter: 'Align Center',\n            alignRight: 'Align Right',\n            alignLeftTop: 'Align Left Top',\n            alignCenterTop: 'Align Center Top',\n            alignRightTop: 'Align Right Top',\n            alignLeftMiddle: 'Align Left Middle',\n            alignCenterMiddle: 'Align Center Middle',\n            alignRightMiddle: 'Align Right Middle',\n            alignLeftBottom: 'Align Left Bottom',\n            alignCenterBottom: 'Align Center Bottom',\n            alignRightBottom: 'Align Right Bottom',\n            alignRemove: 'Remove Alignment',\n            columns: 'Columns',\n            rows: 'Rows',\n            selectAllCells: 'Select All Cells',\n            exportAs: 'Export As',\n            'import': 'Import'\n        };\n        var supportedBrowser = !os || os.ios && os.flatVersion >= 500 || !os.ios && typeof document.documentElement.contentEditable != 'undefined';\n        var toolGroups = {\n            basic: [\n                'bold',\n                'italic',\n                'underline'\n            ],\n            alignment: [\n                'justifyLeft',\n                'justifyCenter',\n                'justifyRight'\n            ],\n            lists: [\n                'insertUnorderedList',\n                'insertOrderedList'\n            ],\n            indenting: [\n                'indent',\n                'outdent'\n            ],\n            links: [\n                'createLink',\n                'unlink'\n            ],\n            tables: [\n                'tableWizard',\n                'createTable',\n                'addColumnLeft',\n                'addColumnRight',\n                'addRowAbove',\n                'addRowBelow',\n                'deleteRow',\n                'deleteColumn'\n            ]\n        };\n        var Editor = Widget.extend({\n            init: function (element, options) {\n                var that = this, value, editorNS = kendo.ui.editor, toolbarContainer, toolbarOptions, type;\n                var domElement;\n                var dom = editorNS.Dom;\n                if (!supportedBrowser) {\n                    return;\n                }\n                Widget.fn.init.call(that, element, options);\n                that.options = deepExtend({}, that.options, options);\n                that.options.tools = that.options.tools.slice();\n                element = that.element;\n                domElement = element[0];\n                type = dom.name(domElement);\n                this._registerHandler(element.closest('form'), 'submit', proxy(that.update, that, undefined));\n                toolbarOptions = extend({}, that.options);\n                toolbarOptions.editor = that;\n                if (type == 'textarea') {\n                    that._wrapTextarea();\n                    toolbarContainer = that.wrapper.find('.k-editor-toolbar');\n                    if (domElement.id) {\n                        toolbarContainer.attr('aria-controls', domElement.id);\n                    }\n                } else {\n                    that.element.attr('contenteditable', true).addClass('k-widget k-editor k-editor-inline');\n                    toolbarOptions.popup = true;\n                    toolbarContainer = $('<ul class=\"k-editor-toolbar\" role=\"toolbar\" />').insertBefore(element);\n                }\n                that.toolbar = new editorNS.Toolbar(toolbarContainer[0], toolbarOptions);\n                that.toolbar.bindTo(that);\n                if (type == 'textarea') {\n                    setTimeout(function () {\n                        var heightStyle = that.wrapper[0].style.height;\n                        var expectedHeight = parseInt(heightStyle, 10);\n                        var actualHeight = that.wrapper.height();\n                        if (heightStyle.indexOf('px') > 0 && !isNaN(expectedHeight) && actualHeight > expectedHeight) {\n                            that.wrapper.height(expectedHeight - (actualHeight - expectedHeight));\n                        }\n                    });\n                }\n                that._resizable();\n                that._initializeContentElement(that);\n                that.keyboard = new editorNS.Keyboard([\n                    new editorNS.BackspaceHandler(that),\n                    new editorNS.TypingHandler(that),\n                    new editorNS.SystemHandler(that),\n                    new editorNS.SelectAllHandler(that)\n                ]);\n                that.clipboard = new editorNS.Clipboard(this);\n                that.undoRedoStack = new kendo.util.UndoRedoStack();\n                if (options && options.value) {\n                    value = options.value;\n                } else if (that.textarea) {\n                    value = domElement.value;\n                    if (that.options.encoded && $.trim(domElement.defaultValue).length) {\n                        value = domElement.defaultValue;\n                    }\n                    value = value.replace(/[\\r\\n\\v\\f\\t ]+/gi, ' ');\n                } else {\n                    value = domElement.innerHTML;\n                }\n                that.value(value || kendo.ui.editor.emptyElementContent);\n                this._registerHandler(document, {\n                    'mousedown': function () {\n                        that._endTyping();\n                    },\n                    'mouseup': function (e) {\n                        that._mouseup(e);\n                    }\n                });\n                that._initializeImmutables();\n                that.toolbar.resize();\n                kendo.notify(that);\n            },\n            setOptions: function (options) {\n                var editor = this;\n                Widget.fn.setOptions.call(editor, options);\n                if (options.tools) {\n                    editor.toolbar.bindTo(editor);\n                }\n            },\n            _endTyping: function () {\n                var keyboard = this.keyboard;\n                try {\n                    if (keyboard.isTypingInProgress()) {\n                        keyboard.endTyping(true);\n                        this.saveSelection();\n                    }\n                } catch (e) {\n                }\n            },\n            _selectionChange: function () {\n                this._selectionStarted = false;\n                this.saveSelection();\n                this.trigger('select', {});\n            },\n            _resizable: function () {\n                var resizable = this.options.resizable;\n                var isResizable = $.isPlainObject(resizable) ? resizable.content === undefined || resizable.content === true : resizable;\n                if (isResizable && this.textarea) {\n                    $('<div class=\\'k-resize-handle\\'><span class=\\'k-icon k-i-arrow-45-down-right\\' /></div>').insertAfter(this.textarea);\n                    this.wrapper.kendoResizable(extend({}, this.options.resizable, {\n                        start: function (e) {\n                            var editor = this.editor = $(e.currentTarget).closest('.k-editor');\n                            this.initialSize = editor.height();\n                            editor.find('td:last').append('<div class=\\'k-overlay\\' />');\n                        },\n                        resize: function (e) {\n                            var delta = e.y.initialDelta;\n                            var newSize = this.initialSize + delta;\n                            var min = this.options.min || 0;\n                            var max = this.options.max || Infinity;\n                            newSize = Math.min(max, Math.max(min, newSize));\n                            this.editor.height(newSize);\n                        },\n                        resizeend: function () {\n                            this.editor.find('.k-overlay').remove();\n                            this.editor = null;\n                        }\n                    }));\n                    if (kendo.support.mobileOS.ios) {\n                        var resizableWidget = this.wrapper.getKendoResizable();\n                        resizableWidget.draggable.options.ignore = SELECT_OVERLAY_SELECTOR;\n                    }\n                }\n            },\n            _initializeTableResizing: function () {\n                var editor = this;\n                kendo.ui.editor.TableResizing.create(editor);\n                editor._showTableResizeHandlesProxy = proxy(editor._showTableResizeHandles, editor);\n                editor.bind(SELECT, editor._showTableResizeHandlesProxy);\n            },\n            _destroyTableResizing: function () {\n                var editor = this;\n                var tableResizing = editor.tableResizing;\n                if (tableResizing) {\n                    tableResizing.destroy();\n                    editor.tableResizing = null;\n                }\n                if (editor._showTableResizeHandlesProxy) {\n                    editor.unbind(SELECT, editor._showTableResizeHandlesProxy);\n                }\n            },\n            _showTableResizeHandles: function () {\n                var editor = this;\n                var tableResizing = editor.tableResizing;\n                if (tableResizing) {\n                    tableResizing.showResizeHandles();\n                }\n            },\n            _initializeColumnResizing: function () {\n                kendo.ui.editor.ColumnResizing.create(this);\n            },\n            _destroyColumnResizing: function () {\n                var editor = this;\n                if (editor.columnResizing) {\n                    editor.columnResizing.destroy();\n                    editor.columnResizing = null;\n                }\n            },\n            _initializeRowResizing: function () {\n                kendo.ui.editor.RowResizing.create(this);\n            },\n            _destroyRowResizing: function () {\n                var editor = this;\n                if (editor.rowResizing) {\n                    editor.rowResizing.destroy();\n                    editor.rowResizing = null;\n                }\n            },\n            _wrapTextarea: function () {\n                var that = this, textarea = that.element, w = textarea[0].style.width, h = textarea[0].style.height, template = EditorUtils.editorWrapperTemplate, editorWrap = $(template).insertBefore(textarea).width(w).height(h), editArea = editorWrap.find('.k-editable-area');\n                textarea.attr('autocomplete', 'off').appendTo(editArea).addClass('k-content k-raw-content').css('display', 'none');\n                that.textarea = textarea;\n                that.wrapper = editorWrap;\n            },\n            _createContentElement: function (stylesheets) {\n                var editor = this;\n                var iframe, wnd, doc;\n                var textarea = editor.textarea;\n                var specifiedDomain = editor.options.domain;\n                var domain = specifiedDomain || document.domain;\n                var domainScript = '';\n                var src = 'javascript:\"\"';\n                if (specifiedDomain || domain != location.hostname) {\n                    domainScript = '<script>document.domain=\"' + domain + '\"</script>';\n                    src = 'javascript:document.write(\\'' + domainScript + '\\')';\n                }\n                textarea.hide();\n                iframe = $('<iframe />', {\n                    title: editor.options.messages.editAreaTitle,\n                    frameBorder: '0'\n                })[0];\n                $(iframe).css('display', '').addClass('k-content').attr('tabindex', textarea[0].tabIndex).insertBefore(textarea);\n                iframe.src = src;\n                wnd = iframe.contentWindow || iframe;\n                doc = wnd.document || iframe.contentDocument;\n                $(iframe).one('load', function () {\n                    editor.toolbar.decorateFrom(doc.body);\n                });\n                doc.open();\n                doc.write('<!DOCTYPE html><html><head>' + '<meta charset=\\'utf-8\\' />' + '<style>' + 'html,body{padding:0;margin:0;height:100%;min-height:100%;}' + 'body{box-sizing:border-box;font-size:12px;font-family:Verdana,Geneva,sans-serif;margin-top:-1px;padding:5px .4em 0;' + 'word-wrap: break-word;-webkit-nbsp-mode: space;-webkit-line-break: after-white-space;' + (kendo.support.isRtl(textarea) ? 'direction:rtl;' : '') + (browser.msie || browser.edge ? 'height:auto;' : '') + (os.ios ? 'word-break:break-all;' : '') + '}' + 'h1{font-size:2em;margin:.67em 0}h2{font-size:1.5em}h3{font-size:1.16em}h4{font-size:1em}h5{font-size:.83em}h6{font-size:.7em}' + 'p{margin:0 0 1em;}.k-marker{display:none;}.k-paste-container,.Apple-style-span{position:absolute;left:-10000px;width:1px;height:1px;overflow:hidden}' + 'ul,ol{padding-left:2.5em}' + 'span{-ms-high-contrast-adjust:none;}' + 'a{color:#00a}' + 'code{font-size:1.23em}' + 'telerik\\\\3Ascript{display: none;}' + '.k-table{width:100%;border-spacing:0;margin: 0 0 1em;}' + '.k-table td{min-width:1px;padding:.2em .3em;}' + '.k-table,.k-table td{outline:0;border: 1px dotted #ccc;}' + '.k-table p{margin:0;padding:0;}' + '.k-column-resize-handle-wrapper {position: absolute; height: 10px; width:10px; cursor: col-resize; z-index: 2;}' + '.k-column-resize-handle {width: 100%; height: 100%;}' + '.k-column-resize-handle > .k-column-resize-marker {width:2px; height:100%; margin:0 auto; background-color:#00b0ff; display:none; opacity:0.8;}' + '.k-row-resize-handle-wrapper {position: absolute; cursor: row-resize; z-index:2; width: 10px; height: 10px;}' + '.k-row-resize-handle {display: table; width: 100%; height: 100%;}' + '.k-row-resize-marker-wrapper{display: table-cell; height:100%; width:100%; margin:0; padding:0; vertical-align: middle;}' + '.k-row-resize-marker{margin: 0; padding:0; width:100%; height:2px; background-color: #00b0ff; opacity:0.8; display:none;}' + '.k-table-resize-handle-wrapper {position: absolute; background-color: #fff; border: 1px solid #000; z-index: 100; width: 5px; height: 5px;}' + '.k-table-resize-handle {width: 100%; height: 100%;}' + '.k-table-resize-handle.k-resize-east{cursor:e-resize;}' + '.k-table-resize-handle.k-resize-north{cursor:n-resize;}' + '.k-table-resize-handle.k-resize-northeast{cursor:ne-resize;}' + '.k-table-resize-handle.k-resize-northwest{cursor:nw-resize;}' + '.k-table-resize-handle.k-resize-south{cursor:s-resize;}' + '.k-table-resize-handle.k-resize-southeast{cursor:se-resize;}' + '.k-table-resize-handle.k-resize-southwest{cursor:sw-resize;}' + '.k-table-resize-handle.k-resize-west{cursor:w-resize;}' + '.k-table.k-table-resizing{opacity:0.6;}' + 'k\\\\:script{display:none;}' + '</style>' + domainScript + '<script>(function(d,c){d[c](\\'header\\'),d[c](\\'article\\'),d[c](\\'nav\\'),d[c](\\'section\\'),d[c](\\'footer\\');})(document, \\'createElement\\');</script>' + $.map(stylesheets, function (href) {\n                    return '<link rel=\\'stylesheet\\' href=\\'' + href + '\\'>';\n                }).join('') + '</head><body autocorrect=\\'off\\' contenteditable=\\'true\\'></body></html>');\n                doc.close();\n                return wnd;\n            },\n            _blur: function () {\n                var textarea = this.textarea;\n                var old = textarea ? textarea.val() : this._oldValue;\n                var value = this.options.encoded ? this.encodedValue() : this.value();\n                this.update();\n                if (textarea) {\n                    textarea.trigger('blur');\n                }\n                if (value != old) {\n                    this.trigger('change');\n                }\n            },\n            _spellCorrect: function (editor) {\n                var beforeCorrection;\n                var falseTrigger = false;\n                this._registerHandler(editor.body, {\n                    'contextmenu': function () {\n                        editor.one('select', function () {\n                            beforeCorrection = null;\n                        });\n                        editor._spellCorrectTimeout = setTimeout(function () {\n                            beforeCorrection = new kendo.ui.editor.RestorePoint(editor.getRange(), editor.body);\n                            falseTrigger = false;\n                        }, 10);\n                    },\n                    'input': function () {\n                        if (!beforeCorrection) {\n                            return;\n                        }\n                        if (kendo.support.browser.mozilla && !falseTrigger) {\n                            falseTrigger = true;\n                            return;\n                        }\n                        kendo.ui.editor._finishUpdate(editor, beforeCorrection);\n                    }\n                });\n            },\n            _registerHandler: function (element, type, handler) {\n                var editor = this;\n                var NS = '.kendoEditor';\n                var eventNames;\n                var i;\n                element = $(element);\n                if (!this._handlers) {\n                    this._handlers = [];\n                }\n                if (element.length) {\n                    if ($.isPlainObject(type)) {\n                        for (var t in type) {\n                            if (type.hasOwnProperty(t)) {\n                                this._registerHandler(element, t, type[t]);\n                            }\n                        }\n                    } else {\n                        eventNames = kendo.applyEventMap(type).split(' ');\n                        for (i = 0; i < eventNames.length; i++) {\n                            editor._handlers.push({\n                                element: element,\n                                type: eventNames[i] + NS,\n                                handler: handler\n                            });\n                            element.on(eventNames[i] + NS, handler);\n                        }\n                    }\n                }\n            },\n            _deregisterHandlers: function () {\n                var handlers = this._handlers;\n                for (var i = 0; i < handlers.length; i++) {\n                    var h = handlers[i];\n                    h.element.off(h.type, h.handler);\n                }\n                this._handlers = [];\n            },\n            _initializeContentElement: function () {\n                var editor = this;\n                var doc;\n                var blurTrigger;\n                var mousedownTrigger;\n                if (editor.textarea) {\n                    editor.window = editor._createContentElement(editor.options.stylesheets);\n                    doc = editor.document = editor.window.contentDocument || editor.window.document;\n                    editor.body = doc.body;\n                    blurTrigger = editor.window;\n                    mousedownTrigger = doc;\n                    this._registerHandler(doc, 'mouseup', proxy(this._mouseup, this));\n                } else {\n                    editor.window = window;\n                    doc = editor.document = document;\n                    editor.body = editor.element[0];\n                    blurTrigger = editor.body;\n                    mousedownTrigger = editor.body;\n                    editor.toolbar.decorateFrom(editor.body);\n                }\n                this._registerHandler(blurTrigger, 'blur', proxy(this._blur, this));\n                editor._registerHandler(mousedownTrigger, 'down', proxy(editor._mousedown, editor));\n                try {\n                    doc.execCommand('enableInlineTableEditing', null, false);\n                } catch (e) {\n                }\n                if (kendo.support.touch) {\n                    this._registerHandler(doc, {\n                        'keydown': function () {\n                            if (kendo._activeElement() != doc.body) {\n                                editor.window.focus();\n                            }\n                        }\n                    });\n                }\n                this._spellCorrect(editor);\n                this._registerHandler(editor.body, {\n                    'keydown': function (e) {\n                        var range;\n                        if ((e.keyCode === keys.BACKSPACE || e.keyCode === keys.DELETE) && editor.body.getAttribute('contenteditable') !== 'true') {\n                            return false;\n                        }\n                        if (e.keyCode === keys.F10) {\n                            setTimeout(proxy(editor.toolbar.focus, editor.toolbar), 100);\n                            e.preventDefault();\n                            return;\n                        } else if (e.keyCode == keys.LEFT || e.keyCode == keys.RIGHT) {\n                            range = editor.getRange();\n                            var left = e.keyCode == keys.LEFT;\n                            var container = range[left ? 'startContainer' : 'endContainer'];\n                            var offset = range[left ? 'startOffset' : 'endOffset'];\n                            var direction = left ? -1 : 1;\n                            var next = offset + direction;\n                            var nextChar = left ? next : offset;\n                            if (container.nodeType == 3 && container.nodeValue[nextChar] == '\\uFEFF') {\n                                range.setStart(container, next);\n                                range.collapse(true);\n                                editor.selectRange(range);\n                            }\n                        }\n                        var tools = editor.toolbar.tools;\n                        var toolName = editor.keyboard.toolFromShortcut(tools, e);\n                        var toolOptions = toolName ? tools[toolName].options : {};\n                        if (toolName && !toolOptions.keyPressCommand) {\n                            e.preventDefault();\n                            if (!/^(undo|redo)$/.test(toolName)) {\n                                editor.keyboard.endTyping(true);\n                            }\n                            editor.trigger('keydown', e);\n                            editor.exec(toolName);\n                            editor._runPostContentKeyCommands(e);\n                            return false;\n                        }\n                        editor.keyboard.clearTimeout();\n                        editor.keyboard.keydown(e);\n                    },\n                    'keypress': function (e) {\n                        setTimeout(function () {\n                            editor._runPostContentKeyCommands(e);\n                            editor._showTableResizeHandles();\n                        }, 0);\n                    },\n                    'keyup': function (e) {\n                        var selectionCodes = [\n                            keys.BACKSPACE,\n                            keys.TAB,\n                            keys.PAGEUP,\n                            keys.PAGEDOWN,\n                            keys.END,\n                            keys.HOME,\n                            keys.LEFT,\n                            keys.UP,\n                            keys.RIGHT,\n                            keys.DOWN,\n                            keys.INSERT,\n                            keys.DELETE\n                        ];\n                        if ($.inArray(e.keyCode, selectionCodes) > -1 || e.keyCode == 65 && e.ctrlKey && !e.altKey && !e.shiftKey) {\n                            editor._selectionChange();\n                        }\n                        editor.keyboard.keyup(e);\n                    },\n                    'click': function (e) {\n                        var dom = kendo.ui.editor.Dom, range;\n                        if (dom.name(e.target) === 'img') {\n                            range = editor.createRange();\n                            range.selectNode(e.target);\n                            editor.selectRange(range);\n                        }\n                    },\n                    'cut copy paste': function (e) {\n                        editor.clipboard['on' + e.type](e);\n                    },\n                    'focusin': function () {\n                        if (editor.body.hasAttribute('contenteditable')) {\n                            $(this).addClass('k-state-active');\n                            editor.toolbar.show();\n                        }\n                    },\n                    'focusout': function () {\n                        setTimeout(function () {\n                            var active = kendo._activeElement();\n                            var body = editor.body;\n                            var toolbar = editor.toolbar;\n                            if (toolbar.options.popup) {\n                                var toolbarContainerElement = toolbar.window.element.get(0);\n                                if (toolbarContainerElement && !($.contains(toolbarContainerElement, active) || toolbarContainerElement == active)) {\n                                    toolbar.preventPopupHide = false;\n                                }\n                            }\n                            if (active != body && !$.contains(body, active) && !$(active).is('.k-editortoolbar-dragHandle') && !toolbar.focused()) {\n                                $(body).removeClass('k-state-active');\n                                toolbar.hide();\n                            }\n                        }, 10);\n                    }\n                });\n                editor._initializeColumnResizing();\n                editor._initializeRowResizing();\n                editor._initializeTableResizing();\n            },\n            _initializeImmutables: function () {\n                var that = this, editorNS = kendo.ui.editor;\n                if (that.options.immutables) {\n                    that.immutables = new editorNS.Immutables(that);\n                }\n            },\n            _mousedown: function (e) {\n                var editor = this;\n                editor._selectionStarted = true;\n                if (browser.gecko) {\n                    return;\n                }\n                var target = $(e.target);\n                if ((e.which == 2 || e.which == 1 && e.ctrlKey) && target.is('a[href]')) {\n                    window.open(target.attr('href'), '_new');\n                }\n            },\n            _mouseup: function (e) {\n                var that = this;\n                if (kendo.support.mobileOS.ios && e && $(e.target).is(SELECT_OVERLAY_SELECTOR)) {\n                    return;\n                }\n                if (that._selectionStarted) {\n                    setTimeout(function () {\n                        that._selectionChange();\n                    }, 1);\n                }\n            },\n            _runPostContentKeyCommands: function (e) {\n                var range = this.getRange();\n                var tools = this.keyboard.toolsFromShortcut(this.toolbar.tools, e);\n                for (var i = 0; i < tools.length; i++) {\n                    var tool = tools[i];\n                    var o = tool.options;\n                    if (!o.keyPressCommand) {\n                        continue;\n                    }\n                    var cmd = new o.command({ range: range });\n                    if (cmd.changesContent()) {\n                        this.keyboard.endTyping(true);\n                        this.exec(tool.name);\n                    }\n                }\n            },\n            refresh: function () {\n                var that = this;\n                if (that.textarea) {\n                    that._destroyResizings();\n                    that.textarea.val(that.value());\n                    that.wrapper.find('iframe').remove();\n                    that._initializeContentElement(that);\n                    that.value(that.textarea.val());\n                }\n            },\n            events: [\n                'select',\n                'change',\n                'execute',\n                'error',\n                'paste',\n                'keydown',\n                'keyup'\n            ],\n            options: {\n                name: 'Editor',\n                messages: messages,\n                formats: {},\n                encoded: true,\n                domain: null,\n                resizable: false,\n                deserialization: { custom: null },\n                serialization: {\n                    entities: true,\n                    semantic: true,\n                    scripts: false\n                },\n                pasteCleanup: {\n                    all: false,\n                    css: false,\n                    custom: null,\n                    keepNewLines: false,\n                    msAllFormatting: false,\n                    msConvertLists: true,\n                    msTags: true,\n                    none: false,\n                    span: false\n                },\n                stylesheets: [],\n                dialogOptions: {\n                    modal: true,\n                    resizable: false,\n                    draggable: true,\n                    animation: false\n                },\n                imageBrowser: null,\n                fileBrowser: null,\n                fontName: [\n                    {\n                        text: 'Arial',\n                        value: 'Arial,Helvetica,sans-serif'\n                    },\n                    {\n                        text: 'Courier New',\n                        value: '\\'Courier New\\',Courier,monospace'\n                    },\n                    {\n                        text: 'Georgia',\n                        value: 'Georgia,serif'\n                    },\n                    {\n                        text: 'Impact',\n                        value: 'Impact,Charcoal,sans-serif'\n                    },\n                    {\n                        text: 'Lucida Console',\n                        value: '\\'Lucida Console\\',Monaco,monospace'\n                    },\n                    {\n                        text: 'Tahoma',\n                        value: 'Tahoma,Geneva,sans-serif'\n                    },\n                    {\n                        text: 'Times New Roman',\n                        value: '\\'Times New Roman\\',Times,serif'\n                    },\n                    {\n                        text: 'Trebuchet MS',\n                        value: '\\'Trebuchet MS\\',Helvetica,sans-serif'\n                    },\n                    {\n                        text: 'Verdana',\n                        value: 'Verdana,Geneva,sans-serif'\n                    }\n                ],\n                fontSize: [\n                    {\n                        text: '1 (8pt)',\n                        value: 'xx-small'\n                    },\n                    {\n                        text: '2 (10pt)',\n                        value: 'x-small'\n                    },\n                    {\n                        text: '3 (12pt)',\n                        value: 'small'\n                    },\n                    {\n                        text: '4 (14pt)',\n                        value: 'medium'\n                    },\n                    {\n                        text: '5 (18pt)',\n                        value: 'large'\n                    },\n                    {\n                        text: '6 (24pt)',\n                        value: 'x-large'\n                    },\n                    {\n                        text: '7 (36pt)',\n                        value: 'xx-large'\n                    }\n                ],\n                formatBlock: [\n                    {\n                        text: 'Paragraph',\n                        value: 'p'\n                    },\n                    {\n                        text: 'Quotation',\n                        value: 'blockquote'\n                    },\n                    {\n                        text: 'Heading 1',\n                        value: 'h1'\n                    },\n                    {\n                        text: 'Heading 2',\n                        value: 'h2'\n                    },\n                    {\n                        text: 'Heading 3',\n                        value: 'h3'\n                    },\n                    {\n                        text: 'Heading 4',\n                        value: 'h4'\n                    },\n                    {\n                        text: 'Heading 5',\n                        value: 'h5'\n                    },\n                    {\n                        text: 'Heading 6',\n                        value: 'h6'\n                    }\n                ],\n                tools: [].concat.call(['formatting'], toolGroups.basic, toolGroups.alignment, toolGroups.lists, toolGroups.indenting, toolGroups.links, ['insertImage'], toolGroups.tables)\n            },\n            destroy: function () {\n                var editor = this;\n                Widget.fn.destroy.call(this);\n                this._endTyping(true);\n                this._deregisterHandlers();\n                clearTimeout(this._spellCorrectTimeout);\n                this._focusOutside();\n                this.toolbar.destroy();\n                editor._destroyUploadWidget();\n                editor._destroyResizings();\n                kendo.destroy(this.wrapper);\n            },\n            _destroyResizings: function () {\n                var editor = this;\n                editor._destroyTableResizing();\n                kendo.ui.editor.TableResizing.dispose(editor);\n                editor._destroyRowResizing();\n                kendo.ui.editor.RowResizing.dispose(editor);\n                editor._destroyColumnResizing();\n                kendo.ui.editor.ColumnResizing.dispose(editor);\n            },\n            _focusOutside: function () {\n                if (kendo.support.browser.msie && this.textarea) {\n                    var tempInput = $('<input style=\\'position:fixed;left:1px;top:1px;width:1px;height:1px;font-size:0;border:0;opacity:0\\' />').appendTo(document.body).focus();\n                    tempInput.blur().remove();\n                }\n            },\n            _destroyUploadWidget: function () {\n                var editor = this;\n                if (editor._uploadWidget) {\n                    editor._uploadWidget.destroy();\n                    editor._uploadWidget = null;\n                }\n            },\n            state: function (toolName) {\n                var tool = Editor.defaultTools[toolName];\n                var finder = tool && (tool.options.finder || tool.finder);\n                var RangeUtils = kendo.ui.editor.RangeUtils;\n                var range, textNodes;\n                if (finder) {\n                    range = this.getRange();\n                    textNodes = RangeUtils.textNodes(range);\n                    if (!textNodes.length && range.collapsed) {\n                        textNodes = [range.startContainer];\n                    }\n                    return finder.getFormat ? finder.getFormat(textNodes) : finder.isFormatted(textNodes);\n                }\n                return false;\n            },\n            value: function (html) {\n                var body = this.body, editorNS = kendo.ui.editor, options = this.options, currentHtml = editorNS.Serializer.domToXhtml(body, options.serialization);\n                if (html === undefined) {\n                    return currentHtml;\n                }\n                if (html == currentHtml) {\n                    return;\n                }\n                editorNS.Serializer.htmlToDom(html, body, options.deserialization);\n                this.selectionRestorePoint = null;\n                this.update();\n                this.toolbar.refreshTools();\n            },\n            saveSelection: function (range) {\n                range = range || this.getRange();\n                var container = range.commonAncestorContainer, body = this.body;\n                if (container == body || $.contains(body, container)) {\n                    this.selectionRestorePoint = new kendo.ui.editor.RestorePoint(range, body);\n                }\n            },\n            _focusBody: function () {\n                var body = this.body;\n                var iframe = this.wrapper && this.wrapper.find('iframe')[0];\n                var documentElement = this.document.documentElement;\n                var activeElement = kendo._activeElement();\n                var scrollTop;\n                if (iframe) {\n                    if (activeElement != body && activeElement != iframe) {\n                        scrollTop = documentElement.scrollTop;\n                        body.focus();\n                        documentElement.scrollTop = scrollTop;\n                    }\n                } else {\n                    scrollTop = body.scrollTop;\n                    body.focus();\n                    body.scrollTop = scrollTop;\n                }\n            },\n            restoreSelection: function () {\n                this._focusBody();\n                if (this.selectionRestorePoint) {\n                    this.selectRange(this.selectionRestorePoint.toRange());\n                }\n            },\n            focus: function () {\n                this.restoreSelection();\n            },\n            update: function (value) {\n                value = value || this.options.encoded ? this.encodedValue() : this.value();\n                if (this.textarea) {\n                    this.textarea.val(value);\n                } else {\n                    this._oldValue = value;\n                }\n            },\n            encodedValue: function () {\n                return kendo.ui.editor.Dom.encode(this.value());\n            },\n            createRange: function (document) {\n                return kendo.ui.editor.RangeUtils.createRange(document || this.document);\n            },\n            getSelection: function () {\n                return kendo.ui.editor.SelectionUtils.selectionFromDocument(this.document);\n            },\n            selectRange: function (range) {\n                this._focusBody();\n                var selection = this.getSelection();\n                selection.removeAllRanges();\n                selection.addRange(range);\n                this.saveSelection(range);\n            },\n            getRange: function () {\n                var selection = this.getSelection(), range = selection && selection.rangeCount > 0 ? selection.getRangeAt(0) : this.createRange(), doc = this.document;\n                if (range.startContainer == doc && range.endContainer == doc && !range.startOffset && !range.endOffset) {\n                    range.setStart(this.body, 0);\n                    range.collapse(true);\n                }\n                return range;\n            },\n            selectedHtml: function () {\n                return kendo.ui.editor.Serializer.domToXhtml(this.getRange().cloneContents());\n            },\n            paste: function (html, options) {\n                this.focus();\n                var command = new kendo.ui.editor.InsertHtmlCommand($.extend({\n                    range: this.getRange(),\n                    html: html\n                }, options));\n                command.editor = this;\n                command.exec();\n            },\n            exec: function (name, params) {\n                var that = this;\n                var command = null;\n                var range, tool, prevented;\n                if (!name) {\n                    throw new Error('kendoEditor.exec(): `name` parameter cannot be empty');\n                }\n                if (that.body.getAttribute('contenteditable') !== 'true' && name !== 'print' && name !== 'pdf') {\n                    return false;\n                }\n                name = name.toLowerCase();\n                if (!that.keyboard.isTypingInProgress()) {\n                    that._focusBody();\n                    that.selectRange(that._range || that.getRange());\n                }\n                tool = that.toolbar.toolById(name);\n                if (!tool) {\n                    for (var id in Editor.defaultTools) {\n                        if (id.toLowerCase() == name) {\n                            tool = Editor.defaultTools[id];\n                            break;\n                        }\n                    }\n                }\n                if (tool) {\n                    range = that.getRange();\n                    if (tool.command) {\n                        command = tool.command(extend({\n                            range: range,\n                            body: that.body,\n                            immutables: !!that.immutables\n                        }, params));\n                    }\n                    prevented = that.trigger('execute', {\n                        name: name,\n                        command: command\n                    });\n                    if (prevented) {\n                        return;\n                    }\n                    if (/^(undo|redo)$/i.test(name)) {\n                        that.undoRedoStack[name]();\n                    } else if (command) {\n                        if (!command.managesUndoRedo) {\n                            that.undoRedoStack.push(command);\n                        }\n                        command.editor = that;\n                        command.exec();\n                        if (command.async) {\n                            command.change = proxy(that._selectionChange, that);\n                            return;\n                        }\n                    }\n                    that._selectionChange();\n                }\n            }\n        });\n        Editor.defaultTools = {\n            undo: {\n                options: {\n                    key: 'Z',\n                    ctrl: true\n                }\n            },\n            redo: {\n                options: {\n                    key: 'Y',\n                    ctrl: true\n                }\n            }\n        };\n        kendo.ui.plugin(Editor);\n        var Tool = Class.extend({\n            init: function (options) {\n                this.options = options;\n            },\n            initialize: function (ui, options) {\n                ui.attr({\n                    unselectable: 'on',\n                    title: options.title\n                });\n                ui.children('.k-tool-text').html(options.title);\n            },\n            command: function (commandArguments) {\n                return new this.options.command(commandArguments);\n            },\n            update: $.noop\n        });\n        Tool.exec = function (editor, name, value) {\n            editor.exec(name, { value: value });\n        };\n        var FormatTool = Tool.extend({\n            init: function (options) {\n                Tool.fn.init.call(this, options);\n            },\n            command: function (commandArguments) {\n                var that = this;\n                return new kendo.ui.editor.FormatCommand(extend(commandArguments, { formatter: that.options.formatter }));\n            },\n            update: function (ui, nodes) {\n                var isFormatted = this.options.finder.isFormatted(nodes);\n                ui.toggleClass('k-state-selected', isFormatted);\n                ui.attr('aria-pressed', isFormatted);\n            }\n        });\n        EditorUtils.registerTool('separator', new Tool({ template: new ToolTemplate({ template: EditorUtils.separatorTemplate }) }));\n        var bomFill = browser.msie && browser.version < 9 ? '\\uFEFF' : '';\n        var emptyElementContent = '\\uFEFF';\n        var emptyTableCellContent = emptyElementContent;\n        if (browser.msie && browser.version == 10) {\n            emptyTableCellContent = '&nbsp;';\n        }\n        extend(kendo.ui, {\n            editor: {\n                ToolTemplate: ToolTemplate,\n                EditorUtils: EditorUtils,\n                Tool: Tool,\n                FormatTool: FormatTool,\n                _bomFill: bomFill,\n                emptyElementContent: emptyElementContent,\n                emptyTableCellContent: emptyTableCellContent\n            }\n        });\n        if (kendo.PDFMixin) {\n            kendo.PDFMixin.extend(Editor.prototype);\n            Editor.prototype._drawPDF = function () {\n                return kendo.drawing.drawDOM(this.body, this.options.pdf);\n            };\n            Editor.prototype.saveAsPDF = function () {\n                var progress = new $.Deferred();\n                var promise = progress.promise();\n                var args = { promise: promise };\n                if (this.trigger('pdfExport', args)) {\n                    return;\n                }\n                var options = this.options.pdf;\n                this._drawPDF(progress).then(function (root) {\n                    return kendo.drawing.exportPDF(root, options);\n                }).done(function (dataURI) {\n                    kendo.saveAs({\n                        dataURI: dataURI,\n                        fileName: options.fileName,\n                        proxyURL: options.proxyURL,\n                        forceProxy: options.forceProxy\n                    });\n                    progress.resolve();\n                }).fail(function (err) {\n                    progress.reject(err);\n                });\n                return promise;\n            };\n        }\n    }(window.kendo.jQuery));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/dom', ['editor/main'], f);\n}(function () {\n    (function ($) {\n        var kendo = window.kendo, map = $.map, extend = $.extend, browser = kendo.support.browser, STYLE = 'style', FLOAT = 'float', CSSFLOAT = 'cssFloat', STYLEFLOAT = 'styleFloat', CLASS = 'class', KMARKER = 'k-marker';\n        function makeMap(items) {\n            var obj = {}, i, len;\n            for (i = 0, len = items.length; i < len; i++) {\n                obj[items[i]] = true;\n            }\n            return obj;\n        }\n        var empty = makeMap('area,base,basefont,br,col,frame,hr,img,input,isindex,link,meta,param,embed'.split(',')), nonListBlockElements = 'div,p,h1,h2,h3,h4,h5,h6,address,applet,blockquote,button,center,dd,dir,dl,dt,fieldset,form,frameset,hr,iframe,isindex,map,menu,noframes,noscript,object,pre,script,table,tbody,td,tfoot,th,thead,tr,header,article,nav,footer,section,aside,main,figure,figcaption'.split(','), blockElements = nonListBlockElements.concat([\n                'ul',\n                'ol',\n                'li'\n            ]), block = makeMap(blockElements), inlineElements = 'span,em,a,abbr,acronym,applet,b,basefont,bdo,big,br,button,cite,code,del,dfn,font,i,iframe,img,input,ins,kbd,label,map,object,q,s,samp,script,select,small,strike,strong,sub,sup,textarea,tt,u,var,data,time,mark,ruby'.split(','), inline = makeMap(inlineElements), fillAttrs = makeMap('checked,compact,declare,defer,disabled,ismap,multiple,nohref,noresize,noshade,nowrap,readonly,selected'.split(','));\n        var normalize = function (node) {\n            if (node.nodeType == 1) {\n                node.normalize();\n            }\n        };\n        if (browser.msie && browser.version >= 8) {\n            normalize = function (parent) {\n                if (parent.nodeType == 1 && parent.firstChild) {\n                    var prev = parent.firstChild, node = prev;\n                    while (true) {\n                        node = node.nextSibling;\n                        if (!node) {\n                            break;\n                        }\n                        if (node.nodeType == 3 && prev.nodeType == 3) {\n                            node.nodeValue = prev.nodeValue + node.nodeValue;\n                            Dom.remove(prev);\n                        }\n                        prev = node;\n                    }\n                }\n            };\n        }\n        var whitespace = /^\\s+$/, emptyspace = /^[\\n\\r\\t]+$/, rgb = /rgb\\s*\\(\\s*(\\d+)\\s*,\\s*(\\d+)\\s*,\\s*(\\d+)\\s*\\)/i, bom = /\\ufeff/g, whitespaceOrBom = /^(\\s+|\\ufeff)$/, persistedScrollTop, cssAttributes = ('color,padding-left,padding-right,padding-top,padding-bottom,' + 'background-color,background-attachment,background-image,background-position,background-repeat,' + 'border-top-style,border-top-width,border-top-color,' + 'border-bottom-style,border-bottom-width,border-bottom-color,' + 'border-left-style,border-left-width,border-left-color,' + 'border-right-style,border-right-width,border-right-color,' + 'font-family,font-size,font-style,font-variant,font-weight,line-height').split(','), htmlRe = /[<>\\&]/g, entityRe = /[\\u00A0-\\u2666<>\\&]/g, entityTable = {\n                34: 'quot',\n                38: 'amp',\n                39: 'apos',\n                60: 'lt',\n                62: 'gt',\n                160: 'nbsp',\n                161: 'iexcl',\n                162: 'cent',\n                163: 'pound',\n                164: 'curren',\n                165: 'yen',\n                166: 'brvbar',\n                167: 'sect',\n                168: 'uml',\n                169: 'copy',\n                170: 'ordf',\n                171: 'laquo',\n                172: 'not',\n                173: 'shy',\n                174: 'reg',\n                175: 'macr',\n                176: 'deg',\n                177: 'plusmn',\n                178: 'sup2',\n                179: 'sup3',\n                180: 'acute',\n                181: 'micro',\n                182: 'para',\n                183: 'middot',\n                184: 'cedil',\n                185: 'sup1',\n                186: 'ordm',\n                187: 'raquo',\n                188: 'frac14',\n                189: 'frac12',\n                190: 'frac34',\n                191: 'iquest',\n                192: 'Agrave',\n                193: 'Aacute',\n                194: 'Acirc',\n                195: 'Atilde',\n                196: 'Auml',\n                197: 'Aring',\n                198: 'AElig',\n                199: 'Ccedil',\n                200: 'Egrave',\n                201: 'Eacute',\n                202: 'Ecirc',\n                203: 'Euml',\n                204: 'Igrave',\n                205: 'Iacute',\n                206: 'Icirc',\n                207: 'Iuml',\n                208: 'ETH',\n                209: 'Ntilde',\n                210: 'Ograve',\n                211: 'Oacute',\n                212: 'Ocirc',\n                213: 'Otilde',\n                214: 'Ouml',\n                215: 'times',\n                216: 'Oslash',\n                217: 'Ugrave',\n                218: 'Uacute',\n                219: 'Ucirc',\n                220: 'Uuml',\n                221: 'Yacute',\n                222: 'THORN',\n                223: 'szlig',\n                224: 'agrave',\n                225: 'aacute',\n                226: 'acirc',\n                227: 'atilde',\n                228: 'auml',\n                229: 'aring',\n                230: 'aelig',\n                231: 'ccedil',\n                232: 'egrave',\n                233: 'eacute',\n                234: 'ecirc',\n                235: 'euml',\n                236: 'igrave',\n                237: 'iacute',\n                238: 'icirc',\n                239: 'iuml',\n                240: 'eth',\n                241: 'ntilde',\n                242: 'ograve',\n                243: 'oacute',\n                244: 'ocirc',\n                245: 'otilde',\n                246: 'ouml',\n                247: 'divide',\n                248: 'oslash',\n                249: 'ugrave',\n                250: 'uacute',\n                251: 'ucirc',\n                252: 'uuml',\n                253: 'yacute',\n                254: 'thorn',\n                255: 'yuml',\n                402: 'fnof',\n                913: 'Alpha',\n                914: 'Beta',\n                915: 'Gamma',\n                916: 'Delta',\n                917: 'Epsilon',\n                918: 'Zeta',\n                919: 'Eta',\n                920: 'Theta',\n                921: 'Iota',\n                922: 'Kappa',\n                923: 'Lambda',\n                924: 'Mu',\n                925: 'Nu',\n                926: 'Xi',\n                927: 'Omicron',\n                928: 'Pi',\n                929: 'Rho',\n                931: 'Sigma',\n                932: 'Tau',\n                933: 'Upsilon',\n                934: 'Phi',\n                935: 'Chi',\n                936: 'Psi',\n                937: 'Omega',\n                945: 'alpha',\n                946: 'beta',\n                947: 'gamma',\n                948: 'delta',\n                949: 'epsilon',\n                950: 'zeta',\n                951: 'eta',\n                952: 'theta',\n                953: 'iota',\n                954: 'kappa',\n                955: 'lambda',\n                956: 'mu',\n                957: 'nu',\n                958: 'xi',\n                959: 'omicron',\n                960: 'pi',\n                961: 'rho',\n                962: 'sigmaf',\n                963: 'sigma',\n                964: 'tau',\n                965: 'upsilon',\n                966: 'phi',\n                967: 'chi',\n                968: 'psi',\n                969: 'omega',\n                977: 'thetasym',\n                978: 'upsih',\n                982: 'piv',\n                8226: 'bull',\n                8230: 'hellip',\n                8242: 'prime',\n                8243: 'Prime',\n                8254: 'oline',\n                8260: 'frasl',\n                8472: 'weierp',\n                8465: 'image',\n                8476: 'real',\n                8482: 'trade',\n                8501: 'alefsym',\n                8592: 'larr',\n                8593: 'uarr',\n                8594: 'rarr',\n                8595: 'darr',\n                8596: 'harr',\n                8629: 'crarr',\n                8656: 'lArr',\n                8657: 'uArr',\n                8658: 'rArr',\n                8659: 'dArr',\n                8660: 'hArr',\n                8704: 'forall',\n                8706: 'part',\n                8707: 'exist',\n                8709: 'empty',\n                8711: 'nabla',\n                8712: 'isin',\n                8713: 'notin',\n                8715: 'ni',\n                8719: 'prod',\n                8721: 'sum',\n                8722: 'minus',\n                8727: 'lowast',\n                8730: 'radic',\n                8733: 'prop',\n                8734: 'infin',\n                8736: 'ang',\n                8743: 'and',\n                8744: 'or',\n                8745: 'cap',\n                8746: 'cup',\n                8747: 'int',\n                8756: 'there4',\n                8764: 'sim',\n                8773: 'cong',\n                8776: 'asymp',\n                8800: 'ne',\n                8801: 'equiv',\n                8804: 'le',\n                8805: 'ge',\n                8834: 'sub',\n                8835: 'sup',\n                8836: 'nsub',\n                8838: 'sube',\n                8839: 'supe',\n                8853: 'oplus',\n                8855: 'otimes',\n                8869: 'perp',\n                8901: 'sdot',\n                8968: 'lceil',\n                8969: 'rceil',\n                8970: 'lfloor',\n                8971: 'rfloor',\n                9001: 'lang',\n                9002: 'rang',\n                9674: 'loz',\n                9824: 'spades',\n                9827: 'clubs',\n                9829: 'hearts',\n                9830: 'diams',\n                338: 'OElig',\n                339: 'oelig',\n                352: 'Scaron',\n                353: 'scaron',\n                376: 'Yuml',\n                710: 'circ',\n                732: 'tilde',\n                8194: 'ensp',\n                8195: 'emsp',\n                8201: 'thinsp',\n                8204: 'zwnj',\n                8205: 'zwj',\n                8206: 'lrm',\n                8207: 'rlm',\n                8211: 'ndash',\n                8212: 'mdash',\n                8216: 'lsquo',\n                8217: 'rsquo',\n                8218: 'sbquo',\n                8220: 'ldquo',\n                8221: 'rdquo',\n                8222: 'bdquo',\n                8224: 'dagger',\n                8225: 'Dagger',\n                8240: 'permil',\n                8249: 'lsaquo',\n                8250: 'rsaquo',\n                8364: 'euro'\n            };\n        var Dom = {\n            block: block,\n            inline: inline,\n            findNodeIndex: function (node, skipText) {\n                var i = 0;\n                if (!node) {\n                    return -1;\n                }\n                while (true) {\n                    node = node.previousSibling;\n                    if (!node) {\n                        break;\n                    }\n                    if (!(skipText && node.nodeType == 3)) {\n                        i++;\n                    }\n                }\n                return i;\n            },\n            isDataNode: function (node) {\n                return node && node.nodeValue !== null && node.data !== null;\n            },\n            isAncestorOf: function (parent, node) {\n                try {\n                    return !Dom.isDataNode(parent) && ($.contains(parent, Dom.isDataNode(node) ? node.parentNode : node) || node.parentNode == parent);\n                } catch (e) {\n                    return false;\n                }\n            },\n            isAncestorOrSelf: function (root, node) {\n                return Dom.isAncestorOf(root, node) || root == node;\n            },\n            findClosestAncestor: function (root, node) {\n                if (Dom.isAncestorOf(root, node)) {\n                    while (node && node.parentNode != root) {\n                        node = node.parentNode;\n                    }\n                }\n                return node;\n            },\n            getNodeLength: function (node) {\n                return Dom.isDataNode(node) ? node.length : node.childNodes.length;\n            },\n            splitDataNode: function (node, offset) {\n                var newNode = node.cloneNode(false);\n                var denormalizedText = '';\n                var iterator = node.nextSibling;\n                var temp;\n                while (iterator && iterator.nodeType == 3 && iterator.nodeValue) {\n                    denormalizedText += iterator.nodeValue;\n                    temp = iterator;\n                    iterator = iterator.nextSibling;\n                    Dom.remove(temp);\n                }\n                node.deleteData(offset, node.length);\n                newNode.deleteData(0, offset);\n                newNode.nodeValue += denormalizedText;\n                Dom.insertAfter(newNode, node);\n            },\n            attrEquals: function (node, attributes) {\n                for (var key in attributes) {\n                    var value = node[key];\n                    if (key == FLOAT) {\n                        value = node[kendo.support.cssFloat ? CSSFLOAT : STYLEFLOAT];\n                    }\n                    if (typeof value == 'object') {\n                        if (!Dom.attrEquals(value, attributes[key])) {\n                            return false;\n                        }\n                    } else if (value != attributes[key]) {\n                        return false;\n                    }\n                }\n                return true;\n            },\n            blockParentOrBody: function (node) {\n                return Dom.parentOfType(node, blockElements) || node.ownerDocument.body;\n            },\n            blockParents: function (nodes) {\n                var blocks = [], i, len;\n                for (i = 0, len = nodes.length; i < len; i++) {\n                    var block = Dom.parentOfType(nodes[i], Dom.blockElements);\n                    if (block && $.inArray(block, blocks) < 0) {\n                        blocks.push(block);\n                    }\n                }\n                return blocks;\n            },\n            windowFromDocument: function (document) {\n                return document.defaultView || document.parentWindow;\n            },\n            normalize: normalize,\n            blockElements: blockElements,\n            nonListBlockElements: nonListBlockElements,\n            inlineElements: inlineElements,\n            empty: empty,\n            fillAttrs: fillAttrs,\n            nodeTypes: {\n                ELEMENT_NODE: 1,\n                ATTRIBUTE_NODE: 2,\n                TEXT_NODE: 3,\n                CDATA_SECTION_NODE: 4,\n                ENTITY_REFERENCE_NODE: 5,\n                ENTITY_NODE: 6,\n                PROCESSING_INSTRUCTION_NODE: 7,\n                COMMENT_NODE: 8,\n                DOCUMENT_NODE: 9,\n                DOCUMENT_TYPE_NODE: 10,\n                DOCUMENT_FRAGMENT_NODE: 11,\n                NOTATION_NODE: 12\n            },\n            toHex: function (color) {\n                var matches = rgb.exec(color);\n                if (!matches) {\n                    return color;\n                }\n                return '#' + map(matches.slice(1), function (x) {\n                    x = parseInt(x, 10).toString(16);\n                    return x.length > 1 ? x : '0' + x;\n                }).join('');\n            },\n            encode: function (value, options) {\n                var encodableChars = !options || options.entities ? entityRe : htmlRe;\n                return value.replace(encodableChars, function (c) {\n                    var charCode = c.charCodeAt(0);\n                    var entity = entityTable[charCode];\n                    return entity ? '&' + entity + ';' : c;\n                });\n            },\n            isBom: function (node) {\n                return node && node.nodeType === 3 && /^[\\ufeff]+$/.test(node.nodeValue);\n            },\n            stripBom: function (text) {\n                return (text || '').replace(bom, '');\n            },\n            stripBomNode: function (node) {\n                if (Dom.isBom(node)) {\n                    node.parentNode.removeChild(node);\n                }\n            },\n            insignificant: function (node) {\n                var attr = node.attributes;\n                return node.className == 'k-marker' || Dom.is(node, 'br') && (node.className == 'k-br' || attr._moz_dirty || attr._moz_editor_bogus_node);\n            },\n            tableCell: function (node) {\n                return Dom.is(node, 'td') || Dom.is(node, 'th');\n            },\n            significantNodes: function (nodes) {\n                return $.grep(nodes, function (child) {\n                    var name = Dom.name(child);\n                    if (name == 'br') {\n                        return false;\n                    } else if (Dom.insignificant(child)) {\n                        return false;\n                    } else if (Dom.emptyTextNode(child)) {\n                        return false;\n                    } else if (child.nodeType == 1 && !empty[name] && Dom.emptyNode(child)) {\n                        return false;\n                    }\n                    return true;\n                });\n            },\n            emptyTextNode: function (node) {\n                return node && node.nodeType == 3 && whitespaceOrBom.test(node.nodeValue);\n            },\n            emptyNode: function (node) {\n                return node.nodeType == 1 && !Dom.significantNodes(node.childNodes).length;\n            },\n            name: function (node) {\n                return node.nodeName.toLowerCase();\n            },\n            significantChildNodes: function (node) {\n                return $.grep(node.childNodes, function (child) {\n                    return child.nodeType != 3 || !Dom.isWhitespace(child);\n                });\n            },\n            lastTextNode: function (node) {\n                var result = null;\n                if (node.nodeType == 3) {\n                    return node;\n                }\n                for (var child = node.lastChild; child; child = child.previousSibling) {\n                    result = Dom.lastTextNode(child);\n                    if (result) {\n                        return result;\n                    }\n                }\n                return result;\n            },\n            is: function (node, nodeName) {\n                return node && Dom.name(node) == nodeName;\n            },\n            isMarker: function (node) {\n                return node.className == KMARKER;\n            },\n            isWhitespace: function (node) {\n                return whitespace.test(node.nodeValue);\n            },\n            allWhitespaceContent: function (node) {\n                var child = node.firstChild;\n                while (child && Dom.isWhitespace(child)) {\n                    child = child.nextSibling;\n                }\n                return !child;\n            },\n            isEmptyspace: function (node) {\n                return emptyspace.test(node.nodeValue);\n            },\n            htmlIndentSpace: function (node) {\n                if (!(Dom.isDataNode(node) && Dom.isWhitespace(node))) {\n                    return false;\n                }\n                if (emptyspace.test(node.nodeValue)) {\n                    return true;\n                }\n                var sibling = function (el, direction) {\n                    while (el[direction]) {\n                        el = el[direction];\n                        if (Dom.significantNodes([el]).length > 0) {\n                            return el;\n                        }\n                    }\n                };\n                var parent = node.parentNode;\n                var prev = sibling(node, 'previousSibling');\n                var next = sibling(node, 'nextSibling');\n                if (bom.test(node.nodeValue)) {\n                    return !!(prev || next);\n                }\n                if ($(parent).is('tr,tbody,thead,tfoot,table,ol,ul')) {\n                    return true;\n                }\n                if (Dom.isBlock(parent) || Dom.is(parent, 'body')) {\n                    var isPrevBlock = prev && Dom.isBlock(prev);\n                    var isNextBlock = next && Dom.isBlock(next);\n                    if (!next && isPrevBlock || !prev && isNextBlock || isPrevBlock && isNextBlock) {\n                        return true;\n                    }\n                }\n                return false;\n            },\n            isBlock: function (node) {\n                return block[Dom.name(node)];\n            },\n            isEmpty: function (node) {\n                return empty[Dom.name(node)];\n            },\n            isInline: function (node) {\n                return inline[Dom.name(node)];\n            },\n            list: function (node) {\n                var name = node ? Dom.name(node) : '';\n                return name == 'ul' || name == 'ol' || name == 'dl';\n            },\n            scrollContainer: function (doc) {\n                var wnd = Dom.windowFromDocument(doc), scrollContainer = (wnd.contentWindow || wnd).document || wnd.ownerDocument || wnd;\n                if (kendo.support.browser.webkit || scrollContainer.compatMode == 'BackCompat') {\n                    scrollContainer = scrollContainer.body;\n                } else {\n                    scrollContainer = scrollContainer.documentElement;\n                }\n                return scrollContainer;\n            },\n            scrollTo: function (node) {\n                var element = $(Dom.isDataNode(node) ? node.parentNode : node), wnd = Dom.windowFromDocument(node.ownerDocument), windowHeight = wnd.innerHeight, elementTop, elementHeight, scrollContainer = Dom.scrollContainer(node.ownerDocument);\n                elementTop = element.offset().top;\n                elementHeight = element[0].offsetHeight;\n                if (!elementHeight) {\n                    elementHeight = parseInt(element.css('line-height'), 10) || Math.ceil(1.2 * parseInt(element.css('font-size'), 10)) || 15;\n                }\n                if (elementHeight + elementTop > scrollContainer.scrollTop + windowHeight) {\n                    scrollContainer.scrollTop = elementHeight + elementTop - windowHeight;\n                }\n            },\n            persistScrollTop: function (doc) {\n                persistedScrollTop = Dom.scrollContainer(doc).scrollTop;\n            },\n            offset: function (target, offsetParent) {\n                var result = {\n                    top: target.offsetTop,\n                    left: target.offsetLeft\n                };\n                var parent = target.offsetParent;\n                while (parent && (!offsetParent || Dom.isAncestorOf(offsetParent, parent))) {\n                    result.top += parent.offsetTop;\n                    result.left += parent.offsetLeft;\n                    parent = parent.offsetParent;\n                }\n                return result;\n            },\n            restoreScrollTop: function (doc) {\n                if (typeof persistedScrollTop == 'number') {\n                    Dom.scrollContainer(doc).scrollTop = persistedScrollTop;\n                }\n            },\n            insertAt: function (parent, newElement, position) {\n                parent.insertBefore(newElement, parent.childNodes[position] || null);\n            },\n            insertBefore: function (newElement, referenceElement) {\n                if (referenceElement.parentNode) {\n                    return referenceElement.parentNode.insertBefore(newElement, referenceElement);\n                } else {\n                    return referenceElement;\n                }\n            },\n            insertAfter: function (newElement, referenceElement) {\n                return referenceElement.parentNode.insertBefore(newElement, referenceElement.nextSibling);\n            },\n            remove: function (node) {\n                node.parentNode.removeChild(node);\n            },\n            removeTextSiblings: function (node) {\n                var parentNode = node.parentNode;\n                while (node.nextSibling && node.nextSibling.nodeType == 3) {\n                    parentNode.removeChild(node.nextSibling);\n                }\n                while (node.previousSibling && node.previousSibling.nodeType == 3) {\n                    parentNode.removeChild(node.previousSibling);\n                }\n            },\n            trim: function (parent) {\n                for (var i = parent.childNodes.length - 1; i >= 0; i--) {\n                    var node = parent.childNodes[i];\n                    if (Dom.isDataNode(node)) {\n                        if (!Dom.stripBom(node.nodeValue).length) {\n                            Dom.remove(node);\n                        }\n                    } else if (node.className != KMARKER) {\n                        Dom.trim(node);\n                        if (node.childNodes.length === 0 || Dom.allWhitespaceContent(node) && Dom.isBlock(node) && !Dom.isEmpty(node)) {\n                            Dom.remove(node);\n                        }\n                    }\n                }\n                return parent;\n            },\n            closest: function (node, tag) {\n                while (node && Dom.name(node) != tag) {\n                    node = node.parentNode;\n                }\n                return node;\n            },\n            closestBy: function (node, condition, rootCondition) {\n                while (node && !condition(node)) {\n                    if (rootCondition && rootCondition(node)) {\n                        return null;\n                    }\n                    node = node.parentNode;\n                }\n                return node;\n            },\n            sibling: function (node, direction) {\n                do {\n                    node = node[direction];\n                } while (node && node.nodeType != 1);\n                return node;\n            },\n            next: function (node) {\n                return Dom.sibling(node, 'nextSibling');\n            },\n            prev: function (node) {\n                return Dom.sibling(node, 'previousSibling');\n            },\n            parentOfType: function (node, tags) {\n                do {\n                    node = node.parentNode;\n                } while (node && !Dom.ofType(node, tags));\n                return node;\n            },\n            ofType: function (node, tags) {\n                return $.inArray(Dom.name(node), tags) >= 0;\n            },\n            changeTag: function (referenceElement, tagName, skipAttributes) {\n                var newElement = Dom.create(referenceElement.ownerDocument, tagName), attributes = referenceElement.attributes, i, len, name, value, attribute;\n                if (!skipAttributes) {\n                    for (i = 0, len = attributes.length; i < len; i++) {\n                        attribute = attributes[i];\n                        if (attribute.specified) {\n                            name = attribute.nodeName;\n                            value = attribute.nodeValue;\n                            if (name == CLASS) {\n                                newElement.className = value;\n                            } else if (name == STYLE) {\n                                newElement.style.cssText = referenceElement.style.cssText;\n                            } else {\n                                newElement.setAttribute(name, value);\n                            }\n                        }\n                    }\n                }\n                while (referenceElement.firstChild) {\n                    newElement.appendChild(referenceElement.firstChild);\n                }\n                Dom.insertBefore(newElement, referenceElement);\n                Dom.remove(referenceElement);\n                return newElement;\n            },\n            editableParent: function (node) {\n                while (node && (node.nodeType == 3 || node.contentEditable !== 'true')) {\n                    node = node.parentNode;\n                }\n                return node;\n            },\n            wrap: function (node, wrapper) {\n                Dom.insertBefore(wrapper, node);\n                wrapper.appendChild(node);\n                return wrapper;\n            },\n            unwrap: function (node) {\n                var parent = node.parentNode;\n                while (node.firstChild) {\n                    parent.insertBefore(node.firstChild, node);\n                }\n                parent.removeChild(node);\n            },\n            wrapper: function (node) {\n                var wrapper = Dom.closestBy(node, function (el) {\n                    return el.parentNode && Dom.significantNodes(el.parentNode.childNodes).length > 1;\n                });\n                return $(wrapper).is('body,.k-editor') ? undefined : wrapper;\n            },\n            create: function (document, tagName, attributes) {\n                return Dom.attr(document.createElement(tagName), attributes);\n            },\n            attr: function (element, attributes) {\n                attributes = extend({}, attributes);\n                if (attributes && STYLE in attributes) {\n                    Dom.style(element, attributes.style);\n                    delete attributes.style;\n                }\n                for (var attr in attributes) {\n                    if (attributes[attr] === null) {\n                        element.removeAttribute(attr);\n                        delete attributes[attr];\n                    } else if (attr == 'className') {\n                        element[attr] = attributes[attr];\n                    }\n                }\n                return extend(element, attributes);\n            },\n            style: function (node, value) {\n                $(node).css(value || {});\n            },\n            unstyle: function (node, value) {\n                for (var key in value) {\n                    if (key == FLOAT) {\n                        key = kendo.support.cssFloat ? CSSFLOAT : STYLEFLOAT;\n                    }\n                    node.style[key] = '';\n                }\n                if (node.style.cssText === '') {\n                    node.removeAttribute(STYLE);\n                }\n            },\n            inlineStyle: function (body, name, attributes) {\n                var span = $(Dom.create(body.ownerDocument, name, attributes)), style;\n                body.appendChild(span[0]);\n                style = map(cssAttributes, function (value) {\n                    if (browser.msie && value == 'line-height' && span.css(value) == '1px') {\n                        return 'line-height:1.5';\n                    } else {\n                        return value + ':' + span.css(value);\n                    }\n                }).join(';');\n                span.remove();\n                return style;\n            },\n            getEffectiveBackground: function (element) {\n                var backgroundStyle = element.css('background-color');\n                if (backgroundStyle.indexOf('rgba(0, 0, 0, 0') < 0 && backgroundStyle !== 'transparent') {\n                    return backgroundStyle;\n                } else if (element[0].tagName.toLowerCase() === 'html') {\n                    return 'Window';\n                } else {\n                    return Dom.getEffectiveBackground(element.parent());\n                }\n            },\n            innerText: function (node) {\n                var text = node.innerHTML;\n                text = text.replace(/<!--(.|\\s)*?-->/gi, '');\n                text = text.replace(/<\\/?[^>]+?\\/?>/gm, '');\n                return text;\n            },\n            removeClass: function (node, classNames) {\n                var className = ' ' + node.className + ' ', classes = classNames.split(' '), i, len;\n                for (i = 0, len = classes.length; i < len; i++) {\n                    className = className.replace(' ' + classes[i] + ' ', ' ');\n                }\n                className = $.trim(className);\n                if (className.length) {\n                    node.className = className;\n                } else {\n                    node.removeAttribute(CLASS);\n                }\n            },\n            commonAncestor: function () {\n                var count = arguments.length, paths = [], minPathLength = Infinity, output = null, i, ancestors, node, first, j;\n                if (!count) {\n                    return null;\n                }\n                if (count == 1) {\n                    return arguments[0];\n                }\n                for (i = 0; i < count; i++) {\n                    ancestors = [];\n                    node = arguments[i];\n                    while (node) {\n                        ancestors.push(node);\n                        node = node.parentNode;\n                    }\n                    paths.push(ancestors.reverse());\n                    minPathLength = Math.min(minPathLength, ancestors.length);\n                }\n                if (count == 1) {\n                    return paths[0][0];\n                }\n                for (i = 0; i < minPathLength; i++) {\n                    first = paths[0][i];\n                    for (j = 1; j < count; j++) {\n                        if (first != paths[j][i]) {\n                            return output;\n                        }\n                    }\n                    output = first;\n                }\n                return output;\n            },\n            closestSplittableParent: function (nodes) {\n                var result;\n                if (nodes.length == 1) {\n                    result = Dom.parentOfType(nodes[0], [\n                        'ul',\n                        'ol'\n                    ]);\n                } else {\n                    result = Dom.commonAncestor.apply(null, nodes);\n                }\n                if (!result) {\n                    result = Dom.parentOfType(nodes[0], [\n                        'p',\n                        'td'\n                    ]) || nodes[0].ownerDocument.body;\n                }\n                if (Dom.isInline(result)) {\n                    result = Dom.blockParentOrBody(result);\n                }\n                var editableParents = map(nodes, Dom.editableParent);\n                var editableAncestor = Dom.commonAncestor(editableParents)[0];\n                if ($.contains(result, editableAncestor)) {\n                    result = editableAncestor;\n                }\n                return result;\n            },\n            closestEditable: function (node, types) {\n                var closest;\n                var editable = Dom.editableParent(node);\n                if (Dom.ofType(node, types)) {\n                    closest = node;\n                } else {\n                    closest = Dom.parentOfType(node, types);\n                }\n                if (closest && editable && $.contains(closest, editable)) {\n                    closest = editable;\n                } else if (!closest && editable) {\n                    closest = editable;\n                }\n                return closest;\n            },\n            closestEditableOfType: function (node, types) {\n                var editable = Dom.closestEditable(node, types);\n                if (editable && Dom.ofType(editable, types)) {\n                    return editable;\n                }\n            },\n            filter: function (tagName, nodes, invert) {\n                var filterFn = function (node) {\n                    return Dom.name(node) == tagName;\n                };\n                return Dom.filterBy(nodes, filterFn, invert);\n            },\n            filterBy: function (nodes, condition, invert) {\n                var i = 0;\n                var len = nodes.length;\n                var result = [];\n                var match;\n                for (; i < len; i++) {\n                    match = condition(nodes[i]);\n                    if (match && !invert || !match && invert) {\n                        result.push(nodes[i]);\n                    }\n                }\n                return result;\n            },\n            ensureTrailingBreaks: function (node) {\n                var elements = $(node).find('p,td,th');\n                var length = elements.length;\n                var i = 0;\n                if (length) {\n                    for (; i < length; i++) {\n                        Dom.ensureTrailingBreak(elements[i]);\n                    }\n                } else {\n                    Dom.ensureTrailingBreak(node);\n                }\n            },\n            removeTrailingBreak: function (node) {\n                $(node).find('br[type=_moz],.k-br').remove();\n            },\n            ensureTrailingBreak: function (node) {\n                Dom.removeTrailingBreak(node);\n                var lastChild = node.lastChild;\n                var name = lastChild && Dom.name(lastChild);\n                var br;\n                if (!name || name != 'br' && name != 'img' || name == 'br' && lastChild.className != 'k-br') {\n                    br = node.ownerDocument.createElement('br');\n                    br.className = 'k-br';\n                    node.appendChild(br);\n                }\n            }\n        };\n        kendo.ui.editor.Dom = Dom;\n    }(window.kendo.jQuery));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/serializer', ['editor/dom'], f);\n}(function () {\n    (function ($, undefined) {\n        var kendo = window.kendo;\n        var Editor = kendo.ui.editor;\n        var dom = Editor.Dom;\n        var extend = $.extend;\n        var fontSizeMappings = 'xx-small,x-small,small,medium,large,x-large,xx-large'.split(',');\n        var quoteRe = /\"/g;\n        var brRe = /<br[^>]*>/i;\n        var pixelRe = /^\\d+(\\.\\d*)?(px)?$/i;\n        var emptyPRe = /<p>(?:&nbsp;)?<\\/p>/i;\n        var cssDeclaration = /(\\*?[-#\\/\\*\\\\\\w]+(?:\\[[0-9a-z_-]+\\])?)\\s*:\\s*((?:'(?:\\\\'|.)*?'|\"(?:\\\\\"|.)*?\"|\\([^\\)]*?\\)|[^};])+)/g;\n        var sizzleAttr = /^sizzle-\\d+/i;\n        var scriptAttr = /^k-script-/i;\n        var onerrorRe = /\\s*onerror\\s*=\\s*(?:'|\")?([^'\">\\s]*)(?:'|\")?/i;\n        var br = '<br class=\"k-br\">';\n        var div = document.createElement('div');\n        div.innerHTML = ' <hr>';\n        var supportsLeadingWhitespace = div.firstChild.nodeType === 3;\n        div = null;\n        var isFunction = $.isFunction;\n        var TD = 'td';\n        var Serializer = {\n            toEditableHtml: function (html) {\n                return (html || '').replace(/<!\\[CDATA\\[(.*)?\\]\\]>/g, '<!--[CDATA[$1]]-->').replace(/<(\\/?)script([^>]*)>/gi, '<$1k:script$2>').replace(/<img([^>]*)>/gi, function (match) {\n                    return match.replace(onerrorRe, '');\n                }).replace(/(<\\/?img[^>]*>)[\\r\\n\\v\\f\\t ]+/gi, '$1').replace(/^<(table|blockquote)/i, br + '<$1').replace(/^[\\s]*(&nbsp;|\\u00a0)/i, '$1').replace(/<\\/(table|blockquote)>$/i, '</$1>' + br);\n            },\n            _toEditableImmutables: function (body) {\n                var immutable = Editor.Immutables.immutable, emptyTextNode = dom.emptyTextNode, first = body.firstChild, last = body.lastChild;\n                while (emptyTextNode(first)) {\n                    first = first.nextSibling;\n                }\n                while (emptyTextNode(last)) {\n                    last = last.previousSibling;\n                }\n                if (first && immutable(first)) {\n                    $(br).prependTo(body);\n                }\n                if (last && immutable(last)) {\n                    $(br).appendTo(body);\n                }\n            },\n            _fillEmptyElements: function (body) {\n                $(body).find('p,td').each(function () {\n                    var p = $(this);\n                    if (/^\\s*$/g.test(p.text()) && !p.find('img,input').length) {\n                        var node = this;\n                        while (node.firstChild && node.firstChild.nodeType != 3) {\n                            node = node.firstChild;\n                        }\n                        if (node.nodeType == 1 && !dom.empty[dom.name(node)]) {\n                            if (dom.is(node, 'td')) {\n                                node.innerHTML = kendo.ui.editor.emptyTableCellContent;\n                            } else {\n                                node.innerHTML = kendo.ui.editor.emptyElementContent;\n                            }\n                        }\n                    }\n                });\n            },\n            _removeSystemElements: function (body) {\n                $('.k-paste-container', body).remove();\n            },\n            _resetOrderedLists: function (root) {\n                var ols = root.getElementsByTagName('ol'), i, ol, originalStart;\n                for (i = 0; i < ols.length; i++) {\n                    ol = ols[i];\n                    originalStart = ol.getAttribute('start');\n                    ol.setAttribute('start', 1);\n                    if (originalStart) {\n                        ol.setAttribute('start', originalStart);\n                    } else {\n                        ol.removeAttribute(originalStart);\n                    }\n                }\n            },\n            _preventScriptExecution: function (root) {\n                $(root).find('*').each(function () {\n                    var attributes = this.attributes;\n                    var attribute, i, l, name;\n                    for (i = 0, l = attributes.length; i < l; i++) {\n                        attribute = attributes[i];\n                        name = attribute.nodeName;\n                        if (attribute.specified && /^on/i.test(name)) {\n                            this.setAttribute('k-script-' + name, attribute.value);\n                            this.removeAttribute(name);\n                        }\n                    }\n                });\n            },\n            htmlToDom: function (html, root, options) {\n                var browser = kendo.support.browser;\n                var msie = browser.msie;\n                var legacyIE = msie && browser.version < 9;\n                var originalSrc = 'originalsrc';\n                var originalHref = 'originalhref';\n                var o = options || {};\n                var immutables = o.immutables;\n                html = Serializer.toEditableHtml(html);\n                if (legacyIE) {\n                    html = '<br/>' + html;\n                    html = html.replace(/href\\s*=\\s*(?:'|\")?([^'\">\\s]*)(?:'|\")?/, originalHref + '=\"$1\"');\n                    html = html.replace(/src\\s*=\\s*(?:'|\")?([^'\">\\s]*)(?:'|\")?/, originalSrc + '=\"$1\"');\n                }\n                if (isFunction(o.custom)) {\n                    html = o.custom(html) || html;\n                }\n                root.innerHTML = html;\n                if (immutables) {\n                    immutables.deserialize(root);\n                }\n                if (legacyIE) {\n                    dom.remove(root.firstChild);\n                    $(root).find('k\\\\:script,script,link,img,a').each(function () {\n                        var node = this;\n                        if (node[originalHref]) {\n                            node.setAttribute('href', node[originalHref]);\n                            node.removeAttribute(originalHref);\n                        }\n                        if (node[originalSrc]) {\n                            node.setAttribute('src', node[originalSrc]);\n                            node.removeAttribute(originalSrc);\n                        }\n                    });\n                } else if (msie) {\n                    dom.normalize(root);\n                    Serializer._resetOrderedLists(root);\n                }\n                Serializer._preventScriptExecution(root);\n                Serializer._fillEmptyElements(root);\n                Serializer._removeSystemElements(root);\n                Serializer._toEditableImmutables(root);\n                $('table', root).addClass('k-table');\n                return root;\n            },\n            domToXhtml: function (root, options) {\n                var result = [];\n                var immutables = options && options.immutables;\n                function semanticFilter(attributes) {\n                    return $.grep(attributes, function (attr) {\n                        return attr.name != 'style';\n                    });\n                }\n                var tagMap = {\n                    iframe: {\n                        start: function (node) {\n                            result.push('<iframe');\n                            attr(node);\n                            result.push('>');\n                        },\n                        end: function () {\n                            result.push('</iframe>');\n                        }\n                    },\n                    'k:script': {\n                        start: function (node) {\n                            result.push('<script');\n                            attr(node);\n                            result.push('>');\n                        },\n                        end: function () {\n                            result.push('</script>');\n                        },\n                        skipEncoding: true\n                    },\n                    span: {\n                        semantic: true,\n                        start: function (node) {\n                            var style = node.style;\n                            var attributes = specifiedAttributes(node);\n                            var semanticAttributes = semanticFilter(attributes);\n                            if (semanticAttributes.length) {\n                                result.push('<span');\n                                attr(node, semanticAttributes);\n                                result.push('>');\n                            }\n                            if (style.textDecoration == 'underline') {\n                                result.push('<u>');\n                            }\n                            var font = [];\n                            if (style.color) {\n                                font.push('color=\"' + dom.toHex(style.color) + '\"');\n                            }\n                            if (style.fontFamily) {\n                                font.push('face=\"' + style.fontFamily + '\"');\n                            }\n                            if (style.fontSize) {\n                                var size = $.inArray(style.fontSize, fontSizeMappings);\n                                font.push('size=\"' + size + '\"');\n                            }\n                            if (font.length) {\n                                result.push('<font ' + font.join(' ') + '>');\n                            }\n                        },\n                        end: function (node) {\n                            var style = node.style;\n                            if (style.color || style.fontFamily || style.fontSize) {\n                                result.push('</font>');\n                            }\n                            if (style.textDecoration == 'underline') {\n                                result.push('</u>');\n                            }\n                            if (semanticFilter(specifiedAttributes(node)).length) {\n                                result.push('</span>');\n                            }\n                        }\n                    },\n                    strong: {\n                        semantic: true,\n                        start: function () {\n                            result.push('<b>');\n                        },\n                        end: function () {\n                            result.push('</b>');\n                        }\n                    },\n                    em: {\n                        semantic: true,\n                        start: function () {\n                            result.push('<i>');\n                        },\n                        end: function () {\n                            result.push('</i>');\n                        }\n                    },\n                    b: {\n                        semantic: false,\n                        start: function () {\n                            result.push('<strong>');\n                        },\n                        end: function () {\n                            result.push('</strong>');\n                        }\n                    },\n                    i: {\n                        semantic: false,\n                        start: function () {\n                            result.push('<em>');\n                        },\n                        end: function () {\n                            result.push('</em>');\n                        }\n                    },\n                    u: {\n                        semantic: false,\n                        start: function () {\n                            result.push('<span style=\"text-decoration:underline;\">');\n                        },\n                        end: function () {\n                            result.push('</span>');\n                        }\n                    },\n                    font: {\n                        semantic: false,\n                        start: function (node) {\n                            result.push('<span style=\"');\n                            var color = node.getAttribute('color');\n                            var size = fontSizeMappings[node.getAttribute('size')];\n                            var face = node.getAttribute('face');\n                            if (color) {\n                                result.push('color:');\n                                result.push(dom.toHex(color));\n                                result.push(';');\n                            }\n                            if (face) {\n                                result.push('font-family:');\n                                result.push(face);\n                                result.push(';');\n                            }\n                            if (size) {\n                                result.push('font-size:');\n                                result.push(size);\n                                result.push(';');\n                            }\n                            result.push('\">');\n                        },\n                        end: function () {\n                            result.push('</span>');\n                        }\n                    }\n                };\n                tagMap.script = tagMap['k:script'];\n                options = options || {};\n                if (typeof options.semantic == 'undefined') {\n                    options.semantic = true;\n                }\n                function cssProperties(cssText) {\n                    var trim = $.trim;\n                    var css = trim(cssText);\n                    var match;\n                    var property, value;\n                    var properties = [];\n                    cssDeclaration.lastIndex = 0;\n                    while (true) {\n                        match = cssDeclaration.exec(css);\n                        if (!match) {\n                            break;\n                        }\n                        property = trim(match[1].toLowerCase());\n                        value = trim(match[2]);\n                        if (property == 'font-size-adjust' || property == 'font-stretch') {\n                            continue;\n                        }\n                        if (property.indexOf('color') >= 0) {\n                            value = dom.toHex(value);\n                        } else if (property.indexOf('font') >= 0) {\n                            value = value.replace(quoteRe, '\\'');\n                        } else if (/\\burl\\(/g.test(value)) {\n                            value = value.replace(quoteRe, '');\n                        }\n                        properties.push({\n                            property: property,\n                            value: value\n                        });\n                    }\n                    return properties;\n                }\n                function styleAttr(cssText) {\n                    var properties = cssProperties(cssText);\n                    var i;\n                    for (i = 0; i < properties.length; i++) {\n                        result.push(properties[i].property);\n                        result.push(':');\n                        result.push(properties[i].value);\n                        result.push(';');\n                    }\n                }\n                function specifiedAttributes(node) {\n                    var result = [];\n                    var attributes = node.attributes;\n                    var attribute, i, l;\n                    var name, value, specified;\n                    for (i = 0, l = attributes.length; i < l; i++) {\n                        attribute = attributes[i];\n                        name = attribute.nodeName;\n                        value = attribute.value;\n                        specified = attribute.specified;\n                        if (name == 'value' && 'value' in node && node.value) {\n                            specified = true;\n                        } else if (name == 'type' && value == 'text') {\n                            specified = true;\n                        } else if (name == 'class' && !value) {\n                            specified = false;\n                        } else if (sizzleAttr.test(name)) {\n                            specified = false;\n                        } else if (name == 'complete') {\n                            specified = false;\n                        } else if (name == 'altHtml') {\n                            specified = false;\n                        } else if (name == 'start' && dom.is(node, 'ul')) {\n                            specified = false;\n                        } else if (name == 'start' && dom.is(node, 'ol') && value == '1') {\n                            specified = false;\n                        } else if (name.indexOf('_moz') >= 0) {\n                            specified = false;\n                        } else if (scriptAttr.test(name)) {\n                            specified = !!options.scripts;\n                        } else if (name == 'data-role' && value == 'resizable' && (dom.is(node, 'tr') || dom.is(node, 'td'))) {\n                            specified = false;\n                        }\n                        if (specified) {\n                            result.push(attribute);\n                        }\n                    }\n                    return result;\n                }\n                function attr(node, attributes) {\n                    var i, l, attribute, name, value;\n                    attributes = attributes || specifiedAttributes(node);\n                    if (dom.is(node, 'img')) {\n                        var width = node.style.width, height = node.style.height, $node = $(node);\n                        if (width && pixelRe.test(width)) {\n                            $node.attr('width', parseInt(width, 10));\n                            dom.unstyle(node, { width: undefined });\n                        }\n                        if (height && pixelRe.test(height)) {\n                            $node.attr('height', parseInt(height, 10));\n                            dom.unstyle(node, { height: undefined });\n                        }\n                    }\n                    if (!attributes.length) {\n                        return;\n                    }\n                    attributes.sort(function (a, b) {\n                        return a.nodeName > b.nodeName ? 1 : a.nodeName < b.nodeName ? -1 : 0;\n                    });\n                    for (i = 0, l = attributes.length; i < l; i++) {\n                        attribute = attributes[i];\n                        name = attribute.nodeName;\n                        value = attribute.value;\n                        if (name == 'class' && value == 'k-table') {\n                            continue;\n                        }\n                        name = name.replace(scriptAttr, '');\n                        result.push(' ');\n                        result.push(name);\n                        result.push('=\"');\n                        if (name == 'style') {\n                            styleAttr(value || node.style.cssText);\n                        } else if (name == 'src' || name == 'href') {\n                            result.push(kendo.htmlEncode(node.getAttribute(name, 2)));\n                        } else {\n                            result.push(dom.fillAttrs[name] ? name : value);\n                        }\n                        result.push('\"');\n                    }\n                }\n                function children(node, skip, skipEncoding) {\n                    for (var childNode = node.firstChild; childNode; childNode = childNode.nextSibling) {\n                        child(childNode, skip, skipEncoding);\n                    }\n                }\n                function text(node) {\n                    return node.nodeValue.replace(/\\ufeff/g, '');\n                }\n                function isEmptyBomNode(node) {\n                    if (node.nodeValue === '\\uFEFF') {\n                        do {\n                            node = node.parentNode;\n                            if (dom.is(node, TD) && node.childNodes.length === 1) {\n                                return true;\n                            }\n                            if (node.childNodes.length !== 1) {\n                                return false;\n                            }\n                        } while (!dom.isBlock(node));\n                        return true;\n                    }\n                    return false;\n                }\n                function child(node, skip, skipEncoding) {\n                    var nodeType = node.nodeType, tagName, mapper, parent, value, previous;\n                    if ($(node).hasClass('k-table-resize-handle') || $(node).hasClass('k-column-resize-handle') || $(node).hasClass('k-row-resize-handle')) {\n                        return;\n                    }\n                    if (immutables && Editor.Immutables.immutable(node)) {\n                        result.push(immutables.serialize(node));\n                    } else if (nodeType == 1) {\n                        tagName = dom.name(node);\n                        if (!tagName || dom.insignificant(node)) {\n                            return;\n                        }\n                        if (!options.scripts && (tagName == 'script' || tagName == 'k:script')) {\n                            return;\n                        }\n                        mapper = tagMap[tagName];\n                        if (mapper) {\n                            if (typeof mapper.semantic == 'undefined' || options.semantic ^ mapper.semantic) {\n                                mapper.start(node);\n                                children(node, false, mapper.skipEncoding);\n                                mapper.end(node);\n                                return;\n                            }\n                        }\n                        result.push('<');\n                        result.push(tagName);\n                        attr(node);\n                        if (dom.empty[tagName]) {\n                            result.push(' />');\n                        } else {\n                            result.push('>');\n                            children(node, skip || dom.is(node, 'pre'));\n                            result.push('</');\n                            result.push(tagName);\n                            result.push('>');\n                        }\n                    } else if (nodeType == 3) {\n                        if (isEmptyBomNode(node)) {\n                            result.push('&nbsp;');\n                            return;\n                        }\n                        value = text(node);\n                        if (!skip && supportsLeadingWhitespace) {\n                            parent = node.parentNode;\n                            previous = node.previousSibling;\n                            if (!previous) {\n                                previous = (dom.isInline(parent) ? parent : node).previousSibling;\n                            }\n                            if (!previous || previous.innerHTML === '' || dom.isBlock(previous)) {\n                                value = value.replace(/^[\\r\\n\\v\\f\\t ]+/, '');\n                            }\n                            value = value.replace(/ +/, ' ');\n                        }\n                        result.push(skipEncoding ? value : dom.encode(value, options));\n                    } else if (nodeType == 4) {\n                        result.push('<![CDATA[');\n                        result.push(node.data);\n                        result.push(']]>');\n                    } else if (nodeType == 8) {\n                        if (node.data.indexOf('[CDATA[') < 0) {\n                            result.push('<!--');\n                            result.push(node.data);\n                            result.push('-->');\n                        } else {\n                            result.push('<!');\n                            result.push(node.data);\n                            result.push('>');\n                        }\n                    }\n                }\n                function textOnly(root) {\n                    var childrenCount = root.childNodes.length;\n                    var textChild = childrenCount && root.firstChild.nodeType == 3;\n                    return textChild && (childrenCount == 1 || childrenCount == 2 && dom.insignificant(root.lastChild));\n                }\n                function runCustom() {\n                    if ($.isFunction(options.custom)) {\n                        result = options.custom(result) || result;\n                    }\n                }\n                if (textOnly(root)) {\n                    result = dom.encode(text(root.firstChild).replace(/[\\r\\n\\v\\f\\t ]+/, ' '), options);\n                    runCustom();\n                    return result;\n                }\n                children(root);\n                result = result.join('');\n                runCustom();\n                if (result.replace(brRe, '').replace(emptyPRe, '') === '') {\n                    return '';\n                }\n                return result;\n            }\n        };\n        extend(Editor, { Serializer: Serializer });\n    }(window.kendo.jQuery));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/range', ['editor/serializer'], f);\n}(function () {\n    (function ($) {\n        var kendo = window.kendo, Class = kendo.Class, extend = $.extend, Editor = kendo.ui.editor, browser = kendo.support.browser, dom = Editor.Dom, findNodeIndex = dom.findNodeIndex, isDataNode = dom.isDataNode, findClosestAncestor = dom.findClosestAncestor, getNodeLength = dom.getNodeLength, normalize = dom.normalize;\n        var SelectionUtils = {\n            selectionFromWindow: function (window) {\n                if (!('getSelection' in window)) {\n                    return new W3CSelection(window.document);\n                }\n                return window.getSelection();\n            },\n            selectionFromRange: function (range) {\n                var rangeDocument = RangeUtils.documentFromRange(range);\n                return SelectionUtils.selectionFromDocument(rangeDocument);\n            },\n            selectionFromDocument: function (document) {\n                return SelectionUtils.selectionFromWindow(dom.windowFromDocument(document));\n            }\n        };\n        var W3CRange = Class.extend({\n            init: function (doc) {\n                $.extend(this, {\n                    ownerDocument: doc,\n                    startContainer: doc,\n                    endContainer: doc,\n                    commonAncestorContainer: doc,\n                    startOffset: 0,\n                    endOffset: 0,\n                    collapsed: true\n                });\n            },\n            setStart: function (node, offset) {\n                this.startContainer = node;\n                this.startOffset = offset;\n                updateRangeProperties(this);\n                fixIvalidRange(this, true);\n            },\n            setEnd: function (node, offset) {\n                this.endContainer = node;\n                this.endOffset = offset;\n                updateRangeProperties(this);\n                fixIvalidRange(this, false);\n            },\n            setStartBefore: function (node) {\n                this.setStart(node.parentNode, findNodeIndex(node));\n            },\n            setStartAfter: function (node) {\n                this.setStart(node.parentNode, findNodeIndex(node) + 1);\n            },\n            setEndBefore: function (node) {\n                this.setEnd(node.parentNode, findNodeIndex(node));\n            },\n            setEndAfter: function (node) {\n                this.setEnd(node.parentNode, findNodeIndex(node) + 1);\n            },\n            selectNode: function (node) {\n                this.setStartBefore(node);\n                this.setEndAfter(node);\n            },\n            selectNodeContents: function (node) {\n                this.setStart(node, 0);\n                this.setEnd(node, node[node.nodeType === 1 ? 'childNodes' : 'nodeValue'].length);\n            },\n            collapse: function (toStart) {\n                var that = this;\n                if (toStart) {\n                    that.setEnd(that.startContainer, that.startOffset);\n                } else {\n                    that.setStart(that.endContainer, that.endOffset);\n                }\n            },\n            deleteContents: function () {\n                var that = this, range = that.cloneRange();\n                if (that.startContainer != that.commonAncestorContainer) {\n                    that.setStartAfter(findClosestAncestor(that.commonAncestorContainer, that.startContainer));\n                }\n                that.collapse(true);\n                (function deleteSubtree(iterator) {\n                    while (iterator.next()) {\n                        if (iterator.hasPartialSubtree()) {\n                            deleteSubtree(iterator.getSubtreeIterator());\n                        } else {\n                            iterator.remove();\n                        }\n                    }\n                }(new RangeIterator(range)));\n            },\n            cloneContents: function () {\n                var document = RangeUtils.documentFromRange(this);\n                return function cloneSubtree(iterator) {\n                    var node, frag = document.createDocumentFragment();\n                    while (node = iterator.next()) {\n                        node = node.cloneNode(!iterator.hasPartialSubtree());\n                        if (iterator.hasPartialSubtree()) {\n                            node.appendChild(cloneSubtree(iterator.getSubtreeIterator()));\n                        }\n                        frag.appendChild(node);\n                    }\n                    return frag;\n                }(new RangeIterator(this));\n            },\n            extractContents: function () {\n                var that = this, range = that.cloneRange();\n                if (that.startContainer != that.commonAncestorContainer) {\n                    that.setStartAfter(findClosestAncestor(that.commonAncestorContainer, that.startContainer));\n                }\n                that.collapse(true);\n                var document = RangeUtils.documentFromRange(that);\n                return function extractSubtree(iterator) {\n                    var node, frag = document.createDocumentFragment();\n                    while (node = iterator.next()) {\n                        if (iterator.hasPartialSubtree()) {\n                            node = node.cloneNode(false);\n                            node.appendChild(extractSubtree(iterator.getSubtreeIterator()));\n                        } else {\n                            iterator.remove(that.originalRange);\n                        }\n                        frag.appendChild(node);\n                    }\n                    return frag;\n                }(new RangeIterator(range));\n            },\n            insertNode: function (node) {\n                var that = this;\n                if (isDataNode(that.startContainer)) {\n                    if (that.startOffset != that.startContainer.nodeValue.length) {\n                        dom.splitDataNode(that.startContainer, that.startOffset);\n                    }\n                    dom.insertAfter(node, that.startContainer);\n                } else {\n                    dom.insertAt(that.startContainer, node, that.startOffset);\n                }\n                that.setStart(that.startContainer, that.startOffset);\n            },\n            cloneRange: function () {\n                return $.extend(new W3CRange(this.ownerDocument), {\n                    startContainer: this.startContainer,\n                    endContainer: this.endContainer,\n                    commonAncestorContainer: this.commonAncestorContainer,\n                    startOffset: this.startOffset,\n                    endOffset: this.endOffset,\n                    collapsed: this.collapsed,\n                    originalRange: this\n                });\n            },\n            toString: function () {\n                var startNodeName = this.startContainer.nodeName, endNodeName = this.endContainer.nodeName;\n                return [\n                    startNodeName == '#text' ? this.startContainer.nodeValue : startNodeName,\n                    '(',\n                    this.startOffset,\n                    ') : ',\n                    endNodeName == '#text' ? this.endContainer.nodeValue : endNodeName,\n                    '(',\n                    this.endOffset,\n                    ')'\n                ].join('');\n            }\n        });\n        W3CRange.fromNode = function (node) {\n            return new W3CRange(node.ownerDocument);\n        };\n        function compareBoundaries(start, end, startOffset, endOffset) {\n            if (start == end) {\n                return endOffset - startOffset;\n            }\n            var container = end;\n            while (container && container.parentNode != start) {\n                container = container.parentNode;\n            }\n            if (container) {\n                return findNodeIndex(container) - startOffset;\n            }\n            container = start;\n            while (container && container.parentNode != end) {\n                container = container.parentNode;\n            }\n            if (container) {\n                return endOffset - findNodeIndex(container) - 1;\n            }\n            var root = dom.commonAncestor(start, end);\n            var startAncestor = start;\n            while (startAncestor && startAncestor.parentNode != root) {\n                startAncestor = startAncestor.parentNode;\n            }\n            if (!startAncestor) {\n                startAncestor = root;\n            }\n            var endAncestor = end;\n            while (endAncestor && endAncestor.parentNode != root) {\n                endAncestor = endAncestor.parentNode;\n            }\n            if (!endAncestor) {\n                endAncestor = root;\n            }\n            if (startAncestor == endAncestor) {\n                return 0;\n            }\n            return findNodeIndex(endAncestor) - findNodeIndex(startAncestor);\n        }\n        function fixIvalidRange(range, toStart) {\n            function isInvalidRange(range) {\n                try {\n                    return compareBoundaries(range.startContainer, range.endContainer, range.startOffset, range.endOffset) < 0;\n                } catch (ex) {\n                    return true;\n                }\n            }\n            if (isInvalidRange(range)) {\n                if (toStart) {\n                    range.commonAncestorContainer = range.endContainer = range.startContainer;\n                    range.endOffset = range.startOffset;\n                } else {\n                    range.commonAncestorContainer = range.startContainer = range.endContainer;\n                    range.startOffset = range.endOffset;\n                }\n                range.collapsed = true;\n            }\n        }\n        function updateRangeProperties(range) {\n            range.collapsed = range.startContainer == range.endContainer && range.startOffset == range.endOffset;\n            var node = range.startContainer;\n            while (node && node != range.endContainer && !dom.isAncestorOf(node, range.endContainer)) {\n                node = node.parentNode;\n            }\n            range.commonAncestorContainer = node;\n        }\n        var RangeIterator = Class.extend({\n            init: function (range) {\n                $.extend(this, {\n                    range: range,\n                    _current: null,\n                    _next: null,\n                    _end: null\n                });\n                if (range.collapsed) {\n                    return;\n                }\n                var root = range.commonAncestorContainer;\n                this._next = range.startContainer == root && !isDataNode(range.startContainer) ? range.startContainer.childNodes[range.startOffset] : findClosestAncestor(root, range.startContainer);\n                this._end = range.endContainer == root && !isDataNode(range.endContainer) ? range.endContainer.childNodes[range.endOffset] : findClosestAncestor(root, range.endContainer).nextSibling;\n            },\n            hasNext: function () {\n                return !!this._next;\n            },\n            next: function () {\n                var that = this, current = that._current = that._next;\n                that._next = that._current && that._current.nextSibling != that._end ? that._current.nextSibling : null;\n                if (isDataNode(that._current)) {\n                    if (that.range.endContainer == that._current) {\n                        current = current.cloneNode(true);\n                        current.deleteData(that.range.endOffset, current.length - that.range.endOffset);\n                    }\n                    if (that.range.startContainer == that._current) {\n                        current = current.cloneNode(true);\n                        current.deleteData(0, that.range.startOffset);\n                    }\n                }\n                return current;\n            },\n            traverse: function (callback) {\n                var that = this, current;\n                function next() {\n                    that._current = that._next;\n                    that._next = that._current && that._current.nextSibling != that._end ? that._current.nextSibling : null;\n                    return that._current;\n                }\n                while (current = next()) {\n                    if (that.hasPartialSubtree()) {\n                        that.getSubtreeIterator().traverse(callback);\n                    } else {\n                        callback(current);\n                    }\n                }\n                return current;\n            },\n            remove: function (originalRange) {\n                var that = this, inStartContainer = that.range.startContainer == that._current, inEndContainer = that.range.endContainer == that._current, start, end, delta;\n                if (isDataNode(that._current) && (inStartContainer || inEndContainer)) {\n                    start = inStartContainer ? that.range.startOffset : 0;\n                    end = inEndContainer ? that.range.endOffset : that._current.length;\n                    delta = end - start;\n                    if (originalRange && (inStartContainer || inEndContainer)) {\n                        if (that._current == originalRange.startContainer && start <= originalRange.startOffset) {\n                            originalRange.startOffset -= delta;\n                        }\n                        if (that._current == originalRange.endContainer && end <= originalRange.endOffset) {\n                            originalRange.endOffset -= delta;\n                        }\n                    }\n                    that._current.deleteData(start, delta);\n                } else {\n                    var parent = that._current.parentNode;\n                    if (originalRange && (that.range.startContainer == parent || that.range.endContainer == parent)) {\n                        var nodeIndex = findNodeIndex(that._current);\n                        if (parent == originalRange.startContainer && nodeIndex <= originalRange.startOffset) {\n                            originalRange.startOffset -= 1;\n                        }\n                        if (parent == originalRange.endContainer && nodeIndex < originalRange.endOffset) {\n                            originalRange.endOffset -= 1;\n                        }\n                    }\n                    dom.remove(that._current);\n                }\n            },\n            hasPartialSubtree: function () {\n                return !isDataNode(this._current) && (dom.isAncestorOrSelf(this._current, this.range.startContainer) || dom.isAncestorOrSelf(this._current, this.range.endContainer));\n            },\n            getSubtreeIterator: function () {\n                return new RangeIterator(this.getSubRange());\n            },\n            getSubRange: function () {\n                var that = this, subRange = that.range.cloneRange();\n                subRange.selectNodeContents(that._current);\n                if (dom.isAncestorOrSelf(that._current, that.range.startContainer)) {\n                    subRange.setStart(that.range.startContainer, that.range.startOffset);\n                }\n                if (dom.isAncestorOrSelf(that._current, that.range.endContainer)) {\n                    subRange.setEnd(that.range.endContainer, that.range.endOffset);\n                }\n                return subRange;\n            }\n        });\n        var W3CSelection = Class.extend({\n            init: function (doc) {\n                this.ownerDocument = doc;\n                this.rangeCount = 1;\n            },\n            addRange: function (range) {\n                var textRange = this.ownerDocument.body.createTextRange();\n                adoptContainer(textRange, range, false);\n                adoptContainer(textRange, range, true);\n                textRange.select();\n            },\n            removeAllRanges: function () {\n                var selection = this.ownerDocument.selection;\n                if (selection.type != 'None') {\n                    selection.empty();\n                }\n            },\n            getRangeAt: function () {\n                var textRange, range = new W3CRange(this.ownerDocument), selection = this.ownerDocument.selection, element, commonAncestor;\n                try {\n                    textRange = selection.createRange();\n                    element = textRange.item ? textRange.item(0) : textRange.parentElement();\n                    if (element.ownerDocument != this.ownerDocument) {\n                        return range;\n                    }\n                } catch (ex) {\n                    return range;\n                }\n                if (selection.type == 'Control') {\n                    range.selectNode(textRange.item(0));\n                } else {\n                    commonAncestor = textRangeContainer(textRange);\n                    adoptEndPoint(textRange, range, commonAncestor, true);\n                    adoptEndPoint(textRange, range, commonAncestor, false);\n                    if (range.startContainer.nodeType == 9) {\n                        range.setStart(range.endContainer, range.startOffset);\n                    }\n                    if (range.endContainer.nodeType == 9) {\n                        range.setEnd(range.startContainer, range.endOffset);\n                    }\n                    if (textRange.compareEndPoints('StartToEnd', textRange) === 0) {\n                        range.collapse(false);\n                    }\n                    var startContainer = range.startContainer, endContainer = range.endContainer, body = this.ownerDocument.body;\n                    if (!range.collapsed && range.startOffset === 0 && range.endOffset == getNodeLength(range.endContainer) && !(startContainer == endContainer && isDataNode(startContainer) && startContainer.parentNode == body)) {\n                        var movedStart = false, movedEnd = false;\n                        while (findNodeIndex(startContainer) === 0 && startContainer == startContainer.parentNode.firstChild && startContainer != body) {\n                            startContainer = startContainer.parentNode;\n                            movedStart = true;\n                        }\n                        while (findNodeIndex(endContainer) == getNodeLength(endContainer.parentNode) - 1 && endContainer == endContainer.parentNode.lastChild && endContainer != body) {\n                            endContainer = endContainer.parentNode;\n                            movedEnd = true;\n                        }\n                        if (startContainer == body && endContainer == body && movedStart && movedEnd) {\n                            range.setStart(startContainer, 0);\n                            range.setEnd(endContainer, getNodeLength(body));\n                        }\n                    }\n                }\n                return range;\n            }\n        });\n        function textRangeContainer(textRange) {\n            var left = textRange.duplicate(), right = textRange.duplicate();\n            left.collapse(true);\n            right.collapse(false);\n            return dom.commonAncestor(textRange.parentElement(), left.parentElement(), right.parentElement());\n        }\n        function adoptContainer(textRange, range, start) {\n            var container = range[start ? 'startContainer' : 'endContainer'], offset = range[start ? 'startOffset' : 'endOffset'], textOffset = 0, isData = isDataNode(container), anchorNode = isData ? container : container.childNodes[offset] || null, anchorParent = isData ? container.parentNode : container, doc = range.ownerDocument, cursor = doc.body.createTextRange(), cursorNode;\n            if (container.nodeType == 3 || container.nodeType == 4) {\n                textOffset = offset;\n            }\n            if (!anchorParent) {\n                anchorParent = doc.body;\n            }\n            if (anchorParent.nodeName.toLowerCase() == 'img') {\n                cursor.moveToElementText(anchorParent);\n                cursor.collapse(false);\n                textRange.setEndPoint(start ? 'StartToStart' : 'EndToStart', cursor);\n            } else {\n                cursorNode = anchorParent.insertBefore(dom.create(doc, 'a'), anchorNode);\n                cursor.moveToElementText(cursorNode);\n                dom.remove(cursorNode);\n                cursor[start ? 'moveStart' : 'moveEnd']('character', textOffset);\n                cursor.collapse(false);\n                textRange.setEndPoint(start ? 'StartToStart' : 'EndToStart', cursor);\n            }\n        }\n        function adoptEndPoint(textRange, range, commonAncestor, start) {\n            var cursorNode = dom.create(range.ownerDocument, 'a'), cursor = textRange.duplicate(), comparison = start ? 'StartToStart' : 'StartToEnd', result, parent, target, previous, next, args, index, appended = false;\n            cursorNode.innerHTML = '\\uFEFF';\n            cursor.collapse(start);\n            parent = cursor.parentElement();\n            if (!dom.isAncestorOrSelf(commonAncestor, parent)) {\n                parent = commonAncestor;\n            }\n            do {\n                if (appended) {\n                    parent.insertBefore(cursorNode, cursorNode.previousSibling);\n                } else {\n                    parent.appendChild(cursorNode);\n                    appended = true;\n                }\n                cursor.moveToElementText(cursorNode);\n            } while ((result = cursor.compareEndPoints(comparison, textRange)) > 0 && cursorNode.previousSibling);\n            target = cursorNode.nextSibling;\n            if (result == -1 && isDataNode(target)) {\n                cursor.setEndPoint(start ? 'EndToStart' : 'EndToEnd', textRange);\n                dom.remove(cursorNode);\n                args = [\n                    target,\n                    cursor.text.length\n                ];\n            } else {\n                previous = !start && cursorNode.previousSibling;\n                next = start && cursorNode.nextSibling;\n                if (isDataNode(next)) {\n                    args = [\n                        next,\n                        0\n                    ];\n                } else if (isDataNode(previous)) {\n                    args = [\n                        previous,\n                        previous.length\n                    ];\n                } else {\n                    index = findNodeIndex(cursorNode);\n                    if (parent.nextSibling && index == parent.childNodes.length - 1) {\n                        args = [\n                            parent.nextSibling,\n                            0\n                        ];\n                    } else {\n                        args = [\n                            parent,\n                            index\n                        ];\n                    }\n                }\n                dom.remove(cursorNode);\n            }\n            range[start ? 'setStart' : 'setEnd'].apply(range, args);\n        }\n        var RangeEnumerator = Class.extend({\n            init: function (range) {\n                this.enumerate = function () {\n                    var nodes = [];\n                    function visit(node) {\n                        if (dom.is(node, 'img') || node.nodeType == 3 && (!dom.isEmptyspace(node) || node.nodeValue == '\\uFEFF')) {\n                            nodes.push(node);\n                        } else {\n                            node = node.firstChild;\n                            while (node) {\n                                visit(node);\n                                node = node.nextSibling;\n                            }\n                        }\n                    }\n                    new RangeIterator(range).traverse(visit);\n                    return nodes;\n                };\n            }\n        });\n        var ImmutablesRangeIterator = RangeIterator.extend({\n            hasPartialSubtree: function () {\n                var immutable = Editor.Immutables && Editor.Immutables.immutable;\n                return immutable && !immutable(this._current) && RangeIterator.fn.hasPartialSubtree.call(this);\n            },\n            getSubtreeIterator: function () {\n                return new ImmutablesRangeIterator(this.getSubRange());\n            }\n        });\n        var ImmutablesRangeEnumerator = Class.extend({\n            init: function (range) {\n                this.enumerate = function () {\n                    var nodes = [];\n                    var immutable = Editor.Immutables && Editor.Immutables.immutable;\n                    function visit(node) {\n                        if (immutable && !immutable(node)) {\n                            if (dom.is(node, 'img') || node.nodeType == 3 && (!dom.isEmptyspace(node) || node.nodeValue == '\\uFEFF')) {\n                                nodes.push(node);\n                            } else {\n                                node = node.firstChild;\n                                while (node) {\n                                    visit(node);\n                                    node = node.nextSibling;\n                                }\n                            }\n                        }\n                    }\n                    new ImmutablesRangeIterator(range).traverse(visit);\n                    return nodes;\n                };\n            }\n        });\n        var RestorePoint = Class.extend({\n            init: function (range, body, options) {\n                var that = this;\n                that.range = range;\n                that.rootNode = RangeUtils.documentFromRange(range);\n                that.body = body || that.getEditable(range);\n                if (dom.name(that.body) != 'body') {\n                    that.rootNode = that.body;\n                }\n                that.startContainer = that.nodeToPath(range.startContainer);\n                that.endContainer = that.nodeToPath(range.endContainer);\n                that.startOffset = that.offset(range.startContainer, range.startOffset);\n                that.endOffset = that.offset(range.endContainer, range.endOffset);\n                that.immutables = options && options.immutables;\n                if (that.immutables) {\n                    that.serializedImmutables = Editor.Immutables.removeImmutables(that.body);\n                }\n                that.html = that.body.innerHTML;\n                if (that.immutables && !that.serializedImmutables.empty) {\n                    Editor.Immutables.restoreImmutables(that.body, that.serializedImmutables);\n                }\n            },\n            index: function (node) {\n                var result = 0, lastType = node.nodeType;\n                while (node = node.previousSibling) {\n                    var nodeType = node.nodeType;\n                    if (nodeType != 3 || lastType != nodeType) {\n                        result++;\n                    }\n                    lastType = nodeType;\n                }\n                return result;\n            },\n            getEditable: function (range) {\n                var root = range.commonAncestorContainer;\n                while (root && (root.nodeType == 3 || root.attributes && (!root.attributes.contentEditable || root.attributes.contentEditable.nodeValue.toLowerCase() == 'false'))) {\n                    root = root.parentNode;\n                }\n                return root;\n            },\n            restoreHtml: function () {\n                var that = this;\n                that.body.innerHTML = that.html;\n                if (that.immutables && !that.serializedImmutables.empty) {\n                    Editor.Immutables.restoreImmutables(that.body, that.serializedImmutables);\n                }\n            },\n            offset: function (node, value) {\n                if (node.nodeType == 3) {\n                    while ((node = node.previousSibling) && node.nodeType == 3) {\n                        value += node.nodeValue.length;\n                    }\n                }\n                return value;\n            },\n            nodeToPath: function (node) {\n                var path = [];\n                while (node != this.rootNode) {\n                    path.push(this.index(node));\n                    node = node.parentNode;\n                }\n                return path;\n            },\n            toRangePoint: function (range, start, path, denormalizedOffset) {\n                var node = this.rootNode, length = path.length, offset = denormalizedOffset;\n                while (length--) {\n                    node = node.childNodes[path[length]];\n                }\n                while (node && node.nodeType == 3 && node.nodeValue.length < offset) {\n                    offset -= node.nodeValue.length;\n                    node = node.nextSibling;\n                }\n                if (node && offset >= 0) {\n                    range[start ? 'setStart' : 'setEnd'](node, offset);\n                }\n            },\n            toRange: function () {\n                var that = this, result = that.range.cloneRange();\n                that.toRangePoint(result, true, that.startContainer, that.startOffset);\n                that.toRangePoint(result, false, that.endContainer, that.endOffset);\n                return result;\n            }\n        });\n        var Marker = Class.extend({\n            init: function () {\n                this.caret = null;\n            },\n            addCaret: function (range) {\n                var that = this;\n                var caret = that.caret = dom.create(RangeUtils.documentFromRange(range), 'span', { className: 'k-marker' });\n                range.insertNode(caret);\n                dom.stripBomNode(caret.previousSibling);\n                dom.stripBomNode(caret.nextSibling);\n                range.selectNode(caret);\n                return caret;\n            },\n            removeCaret: function (range) {\n                var that = this, previous = that.caret.previousSibling, startOffset = 0;\n                if (previous) {\n                    startOffset = isDataNode(previous) ? previous.nodeValue.length : findNodeIndex(previous);\n                }\n                var container = that.caret.parentNode;\n                var containerIndex = previous ? findNodeIndex(previous) : 0;\n                dom.remove(that.caret);\n                normalize(container);\n                var node = container.childNodes[containerIndex];\n                if (isDataNode(node)) {\n                    range.setStart(node, startOffset);\n                } else if (node) {\n                    var textNode = dom.lastTextNode(node);\n                    if (textNode) {\n                        range.setStart(textNode, textNode.nodeValue.length);\n                    } else {\n                        range[previous ? 'setStartAfter' : 'setStartBefore'](node);\n                    }\n                } else {\n                    if (!browser.msie && !container.innerHTML) {\n                        container.innerHTML = '<br _moz_dirty=\"\" />';\n                    }\n                    range.selectNodeContents(container);\n                }\n                range.collapse(true);\n            },\n            add: function (range, expand) {\n                var that = this;\n                var collapsed = range.collapsed && !RangeUtils.isExpandable(range);\n                var doc = RangeUtils.documentFromRange(range);\n                if (expand && range.collapsed) {\n                    that.addCaret(range);\n                    range = RangeUtils.expand(range);\n                }\n                var rangeBoundary = range.cloneRange();\n                rangeBoundary.collapse(false);\n                that.end = dom.create(doc, 'span', { className: 'k-marker' });\n                rangeBoundary.insertNode(that.end);\n                rangeBoundary = range.cloneRange();\n                rangeBoundary.collapse(true);\n                that.start = that.end.cloneNode(true);\n                rangeBoundary.insertNode(that.start);\n                that._removeDeadMarkers(that.start, that.end);\n                if (collapsed) {\n                    var bom = doc.createTextNode('\\uFEFF');\n                    dom.insertAfter(bom.cloneNode(), that.start);\n                    dom.insertBefore(bom, that.end);\n                }\n                normalize(range.commonAncestorContainer);\n                range.setStartBefore(that.start);\n                range.setEndAfter(that.end);\n                return range;\n            },\n            _removeDeadMarkers: function (start, end) {\n                if (start.previousSibling && start.previousSibling.nodeValue == '\\uFEFF') {\n                    dom.remove(start.previousSibling);\n                }\n                if (end.nextSibling && end.nextSibling.nodeValue == '\\uFEFF') {\n                    dom.remove(end.nextSibling);\n                }\n            },\n            _normalizedIndex: function (node) {\n                var index = findNodeIndex(node);\n                var pointer = node;\n                while (pointer.previousSibling) {\n                    if (pointer.nodeType == 3 && pointer.previousSibling.nodeType == 3) {\n                        index--;\n                    }\n                    pointer = pointer.previousSibling;\n                }\n                return index;\n            },\n            remove: function (range) {\n                var that = this, start = that.start, end = that.end, shouldNormalizeStart, shouldNormalizeEnd, shouldNormalize;\n                normalize(range.commonAncestorContainer);\n                while (!start.nextSibling && start.parentNode) {\n                    start = start.parentNode;\n                }\n                while (!end.previousSibling && end.parentNode) {\n                    end = end.parentNode;\n                }\n                shouldNormalizeStart = start.previousSibling && start.previousSibling.nodeType == 3 && (start.nextSibling && start.nextSibling.nodeType == 3);\n                shouldNormalizeEnd = end.previousSibling && end.previousSibling.nodeType == 3 && (end.nextSibling && end.nextSibling.nodeType == 3);\n                shouldNormalize = shouldNormalizeStart && shouldNormalizeEnd;\n                start = start.nextSibling;\n                end = end.previousSibling;\n                var collapsed = false;\n                var collapsedToStart = false;\n                if (start == that.end) {\n                    collapsedToStart = !!that.start.previousSibling;\n                    start = end = that.start.previousSibling || that.end.nextSibling;\n                    collapsed = true;\n                }\n                dom.remove(that.start);\n                dom.remove(that.end);\n                if (!start || !end) {\n                    range.selectNodeContents(range.commonAncestorContainer);\n                    range.collapse(true);\n                    return;\n                }\n                var startOffset = collapsed ? isDataNode(start) ? start.nodeValue.length : start.childNodes.length : 0;\n                var endOffset = isDataNode(end) ? end.nodeValue.length : end.childNodes.length;\n                if (start.nodeType == 3) {\n                    while (start.previousSibling && start.previousSibling.nodeType == 3) {\n                        start = start.previousSibling;\n                        startOffset += start.nodeValue.length;\n                    }\n                }\n                if (end.nodeType == 3) {\n                    while (end.previousSibling && end.previousSibling.nodeType == 3) {\n                        end = end.previousSibling;\n                        endOffset += end.nodeValue.length;\n                    }\n                }\n                var startParent = start.parentNode;\n                var endParent = end.parentNode;\n                var startIndex = this._normalizedIndex(start);\n                var endIndex = this._normalizedIndex(end);\n                normalize(startParent);\n                if (start.nodeType == 3) {\n                    start = startParent.childNodes[startIndex];\n                }\n                normalize(endParent);\n                if (end.nodeType == 3) {\n                    end = endParent.childNodes[endIndex];\n                }\n                if (collapsed) {\n                    if (start.nodeType == 3) {\n                        range.setStart(start, startOffset);\n                    } else {\n                        range[collapsedToStart ? 'setStartAfter' : 'setStartBefore'](start);\n                    }\n                    range.collapse(true);\n                } else {\n                    if (start.nodeType == 3) {\n                        range.setStart(start, startOffset);\n                    } else {\n                        range.setStartBefore(start);\n                    }\n                    if (end.nodeType == 3) {\n                        range.setEnd(end, endOffset);\n                    } else {\n                        range.setEndAfter(end);\n                    }\n                }\n                if (that.caret) {\n                    that.removeCaret(range);\n                }\n            }\n        });\n        var boundary = /[\\u0009-\\u000d]|\\u0020|\\u00a0|\\ufeff|\\.|,|;|:|!|\\(|\\)|\\?/;\n        var RangeUtils = {\n            nodes: function (range) {\n                var nodes = RangeUtils.textNodes(range);\n                if (!nodes.length) {\n                    range.selectNodeContents(range.commonAncestorContainer);\n                    nodes = RangeUtils.textNodes(range);\n                    if (!nodes.length) {\n                        nodes = dom.significantChildNodes(range.commonAncestorContainer);\n                    }\n                }\n                return nodes;\n            },\n            textNodes: function (range) {\n                return new RangeEnumerator(range).enumerate();\n            },\n            editableTextNodes: function (range) {\n                var nodes = [], immutableParent = Editor.Immutables && Editor.Immutables.immutableParent;\n                if (immutableParent && !immutableParent(range.commonAncestorContainer)) {\n                    nodes = new ImmutablesRangeEnumerator(range).enumerate();\n                }\n                return nodes;\n            },\n            documentFromRange: function (range) {\n                var startContainer = range.startContainer;\n                return startContainer.nodeType == 9 ? startContainer : startContainer.ownerDocument;\n            },\n            createRange: function (document) {\n                if (browser.msie && browser.version < 9) {\n                    return new W3CRange(document);\n                }\n                return document.createRange();\n            },\n            selectRange: function (range) {\n                var image = RangeUtils.image(range);\n                if (image) {\n                    range.setStartAfter(image);\n                    range.setEndAfter(image);\n                }\n                var selection = SelectionUtils.selectionFromRange(range);\n                selection.removeAllRanges();\n                selection.addRange(range);\n            },\n            stringify: function (range) {\n                return kendo.format('{0}:{1} - {2}:{3}', dom.name(range.startContainer), range.startOffset, dom.name(range.endContainer), range.endOffset);\n            },\n            split: function (range, node, trim) {\n                function partition(start) {\n                    var partitionRange = range.cloneRange();\n                    partitionRange.collapse(start);\n                    partitionRange[start ? 'setStartBefore' : 'setEndAfter'](node);\n                    var contents = partitionRange.extractContents();\n                    if (trim) {\n                        contents = dom.trim(contents);\n                    }\n                    dom[start ? 'insertBefore' : 'insertAfter'](contents, node);\n                }\n                partition(true);\n                partition(false);\n            },\n            mapAll: function (range, map) {\n                var nodes = [];\n                new RangeIterator(range).traverse(function (node) {\n                    var mapped = map(node);\n                    if (mapped && $.inArray(mapped, nodes) < 0) {\n                        nodes.push(mapped);\n                    }\n                });\n                return nodes;\n            },\n            getAll: function (range, predicate) {\n                var selector = predicate;\n                if (typeof predicate == 'string') {\n                    predicate = function (node) {\n                        return dom.is(node, selector);\n                    };\n                }\n                return RangeUtils.mapAll(range, function (node) {\n                    if (predicate(node)) {\n                        return node;\n                    }\n                });\n            },\n            getMarkers: function (range) {\n                return RangeUtils.getAll(range, function (node) {\n                    return node.className == 'k-marker';\n                });\n            },\n            image: function (range) {\n                var nodes = RangeUtils.getAll(range, 'img');\n                if (nodes.length == 1) {\n                    return nodes[0];\n                }\n            },\n            isStartOf: function (originalRange, node) {\n                if (originalRange.startOffset !== 0) {\n                    return false;\n                }\n                var range = originalRange.cloneRange();\n                while (range.startOffset === 0 && range.startContainer != node) {\n                    var index = dom.findNodeIndex(range.startContainer);\n                    var parent = range.startContainer.parentNode;\n                    while (index > 0 && parent[index - 1] && dom.insignificant(parent[index - 1])) {\n                        index--;\n                    }\n                    range.setStart(parent, index);\n                }\n                return range.startOffset === 0 && range.startContainer == node;\n            },\n            isEndOf: function (originalRange, node) {\n                var range = originalRange.cloneRange();\n                range.collapse(false);\n                var start = range.startContainer;\n                if (dom.isDataNode(start) && range.startOffset == dom.getNodeLength(start)) {\n                    range.setStart(start.parentNode, dom.findNodeIndex(start) + 1);\n                    range.collapse(true);\n                }\n                range.setEnd(node, dom.getNodeLength(node));\n                var nodes = [];\n                function visit(node) {\n                    if (!dom.insignificant(node)) {\n                        nodes.push(node);\n                    }\n                }\n                new RangeIterator(range).traverse(visit);\n                return !nodes.length;\n            },\n            wrapSelectedElements: function (range) {\n                var startEditable = dom.editableParent(range.startContainer);\n                var endEditable = dom.editableParent(range.endContainer);\n                while (range.startOffset === 0 && range.startContainer != startEditable) {\n                    range.setStart(range.startContainer.parentNode, dom.findNodeIndex(range.startContainer));\n                }\n                function isEnd(offset, container) {\n                    var length = dom.getNodeLength(container);\n                    if (offset == length) {\n                        return true;\n                    }\n                    for (var i = offset; i < length; i++) {\n                        if (!dom.insignificant(container.childNodes[i])) {\n                            return false;\n                        }\n                    }\n                    return true;\n                }\n                while (isEnd(range.endOffset, range.endContainer) && range.endContainer != endEditable) {\n                    range.setEnd(range.endContainer.parentNode, dom.findNodeIndex(range.endContainer) + 1);\n                }\n                return range;\n            },\n            expand: function (range) {\n                var result = range.cloneRange();\n                var startContainer = result.startContainer.childNodes[result.startOffset === 0 ? 0 : result.startOffset - 1];\n                var endContainer = result.endContainer.childNodes[result.endOffset];\n                if (!isDataNode(startContainer) || !isDataNode(endContainer)) {\n                    return result;\n                }\n                var beforeCaret = startContainer.nodeValue;\n                var afterCaret = endContainer.nodeValue;\n                if (!beforeCaret || !afterCaret) {\n                    return result;\n                }\n                var startOffset = beforeCaret.split('').reverse().join('').search(boundary);\n                var endOffset = afterCaret.search(boundary);\n                if (!startOffset || !endOffset) {\n                    return result;\n                }\n                endOffset = endOffset == -1 ? afterCaret.length : endOffset;\n                startOffset = startOffset == -1 ? 0 : beforeCaret.length - startOffset;\n                result.setStart(startContainer, startOffset);\n                result.setEnd(endContainer, endOffset);\n                return result;\n            },\n            isExpandable: function (range) {\n                var node = range.startContainer;\n                var rangeDocument = RangeUtils.documentFromRange(range);\n                if (node == rangeDocument || node == rangeDocument.body) {\n                    return false;\n                }\n                var result = range.cloneRange();\n                var value = node.nodeValue;\n                if (!value) {\n                    return false;\n                }\n                var beforeCaret = value.substring(0, result.startOffset);\n                var afterCaret = value.substring(result.startOffset);\n                var startOffset = 0, endOffset = 0;\n                if (beforeCaret) {\n                    startOffset = beforeCaret.split('').reverse().join('').search(boundary);\n                }\n                if (afterCaret) {\n                    endOffset = afterCaret.search(boundary);\n                }\n                return startOffset && endOffset;\n            }\n        };\n        extend(Editor, {\n            SelectionUtils: SelectionUtils,\n            W3CRange: W3CRange,\n            RangeIterator: RangeIterator,\n            W3CSelection: W3CSelection,\n            RangeEnumerator: RangeEnumerator,\n            RestorePoint: RestorePoint,\n            Marker: Marker,\n            RangeUtils: RangeUtils\n        });\n    }(window.kendo.jQuery));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/system', ['editor/range'], f);\n}(function () {\n    (function ($) {\n        var kendo = window.kendo, Class = kendo.Class, editorNS = kendo.ui.editor, EditorUtils = editorNS.EditorUtils, RangeUtils = editorNS.RangeUtils, registerTool = EditorUtils.registerTool, dom = editorNS.Dom, Tool = editorNS.Tool, ToolTemplate = editorNS.ToolTemplate, RestorePoint = editorNS.RestorePoint, Marker = editorNS.Marker, browser = kendo.support.browser, br = '<br class=\"k-br\">', extend = $.extend;\n        var nodeTypes = dom.nodeTypes;\n        var PREVIOUS_SIBLING = 'previousSibling';\n        function finishUpdate(editor, startRestorePoint) {\n            var endRestorePoint = editor.selectionRestorePoint = new RestorePoint(editor.getRange(), editor.body);\n            var command = new GenericCommand(startRestorePoint, endRestorePoint);\n            command.editor = editor;\n            editor.undoRedoStack.push(command);\n            return endRestorePoint;\n        }\n        function selected(node, range) {\n            return range.startContainer === node && range.endContainer === node && range.startOffset === 0 && range.endOffset == node.childNodes.length;\n        }\n        function getSibling(node, direction, condition) {\n            var sibling = node ? node[direction] : null;\n            while (sibling && !condition(sibling)) {\n                sibling = sibling[direction];\n            }\n            return sibling;\n        }\n        var Command = Class.extend({\n            init: function (options) {\n                this.options = options;\n                this.restorePoint = new RestorePoint(options.range, options.body, { immutables: options.immutables });\n                this.marker = new Marker();\n                this.formatter = options.formatter;\n            },\n            getRange: function () {\n                return this.restorePoint.toRange();\n            },\n            lockRange: function (expand) {\n                return this.marker.add(this.getRange(), expand);\n            },\n            releaseRange: function (range) {\n                this.marker.remove(range);\n                this.editor.selectRange(range);\n            },\n            undo: function () {\n                var point = this.restorePoint;\n                point.restoreHtml();\n                this.editor.selectRange(point.toRange());\n            },\n            redo: function () {\n                this.exec();\n            },\n            createDialog: function (content, options) {\n                var editor = this.editor;\n                return $(content).appendTo(document.body).kendoWindow(extend({}, editor.options.dialogOptions, options)).closest('.k-window').toggleClass('k-rtl', kendo.support.isRtl(editor.wrapper)).end();\n            },\n            exec: function () {\n                var range = this.lockRange(true);\n                this.formatter.editor = this.editor;\n                this.formatter.toggle(range);\n                this.releaseRange(range);\n            },\n            immutables: function () {\n                return this.editor && this.editor.options.immutables;\n            },\n            expandImmutablesIn: function (range) {\n                if (this.immutables()) {\n                    kendo.ui.editor.Immutables.expandImmutablesIn(range);\n                    this.restorePoint = new RestorePoint(range, this.editor.body);\n                }\n            }\n        });\n        var GenericCommand = Class.extend({\n            init: function (startRestorePoint, endRestorePoint) {\n                this.body = startRestorePoint.body;\n                this.startRestorePoint = startRestorePoint;\n                this.endRestorePoint = endRestorePoint;\n            },\n            redo: function () {\n                this.body.innerHTML = this.endRestorePoint.html;\n                this.editor.selectRange(this.endRestorePoint.toRange());\n            },\n            undo: function () {\n                this.body.innerHTML = this.startRestorePoint.html;\n                this.editor.selectRange(this.startRestorePoint.toRange());\n            }\n        });\n        var InsertHtmlCommand = Command.extend({\n            init: function (options) {\n                Command.fn.init.call(this, options);\n                this.managesUndoRedo = true;\n            },\n            exec: function () {\n                var editor = this.editor;\n                var options = this.options;\n                var range = options.range;\n                var body = editor.body;\n                var startRestorePoint = new RestorePoint(range, body);\n                var html = options.html || options.value || '';\n                editor.selectRange(range);\n                editor.clipboard.paste(html, options);\n                if (options.postProcess) {\n                    options.postProcess(editor, editor.getRange());\n                }\n                var genericCommand = new GenericCommand(startRestorePoint, new RestorePoint(editor.getRange(), body));\n                genericCommand.editor = editor;\n                editor.undoRedoStack.push(genericCommand);\n                editor.focus();\n            }\n        });\n        var InsertHtmlTool = Tool.extend({\n            initialize: function (ui, initOptions) {\n                var editor = initOptions.editor, options = this.options, dataSource = options.items ? options.items : editor.options.insertHtml;\n                this._selectBox = new editorNS.SelectBox(ui, {\n                    dataSource: dataSource,\n                    dataTextField: 'text',\n                    dataValueField: 'value',\n                    change: function () {\n                        Tool.exec(editor, 'insertHtml', this.value());\n                    },\n                    title: editor.options.messages.insertHtml,\n                    highlightFirst: false\n                });\n            },\n            command: function (commandArguments) {\n                return new InsertHtmlCommand(commandArguments);\n            },\n            update: function (ui) {\n                var selectbox = ui.data('kendoSelectBox') || ui.find('select').data('kendoSelectBox');\n                selectbox.close();\n                selectbox.value(selectbox.options.title);\n            }\n        });\n        var tableCells = 'td,th,caption';\n        var tableCellsWrappers = 'table,tbody,thead,tfoot,tr';\n        var tableElements = tableCellsWrappers + ',' + tableCells;\n        var inTable = function (range) {\n            return !range.collapsed && $(range.commonAncestorContainer).is(tableCellsWrappers);\n        };\n        var RemoveTableContent = Class.extend({\n            remove: function (range) {\n                var that = this;\n                var marker = new Marker();\n                marker.add(range, false);\n                var nodes = RangeUtils.getAll(range, function (node) {\n                    return $(node).is(tableElements);\n                });\n                var doc = RangeUtils.documentFromRange(range);\n                var start = marker.start;\n                var end = marker.end;\n                var cellsTypes = tableCells.split(',');\n                var startCell = dom.parentOfType(start, cellsTypes);\n                var endCell = dom.parentOfType(end, cellsTypes);\n                that._removeContent(start, startCell, true);\n                that._removeContent(end, endCell, false);\n                $(nodes).each(function (i, node) {\n                    node = $(node);\n                    (node.is(tableCells) ? node : node.find(tableCells)).each(function (j, cell) {\n                        cell.innerHTML = '&#65279;';\n                    });\n                });\n                if (startCell && !start.previousSibling) {\n                    dom.insertBefore(doc.createTextNode('\\uFEFF'), start);\n                }\n                if (endCell && !end.nextSibling) {\n                    dom.insertAfter(doc.createTextNode('\\uFEFF'), end);\n                }\n                if (startCell) {\n                    range.setStartBefore(start);\n                } else if (nodes[0]) {\n                    startCell = $(nodes[0]);\n                    startCell = startCell.is(tableCells) ? startCell : startCell.find(tableCells).first();\n                    if (startCell.length) {\n                        range.setStart(startCell.get(0), 0);\n                    }\n                }\n                range.collapse(true);\n                dom.remove(start);\n                dom.remove(end);\n            },\n            _removeContent: function (start, top, forwards) {\n                if (top) {\n                    var sibling = forwards ? 'nextSibling' : 'previousSibling', next, getNext = function (node) {\n                            while (node && !node[sibling]) {\n                                node = node.parentNode;\n                            }\n                            return node && $.contains(top, node) ? node[sibling] : null;\n                        };\n                    start = getNext(start);\n                    while (start) {\n                        next = getNext(start);\n                        dom.remove(start);\n                        start = next;\n                    }\n                }\n            }\n        });\n        var TypingHandler = Class.extend({\n            init: function (editor) {\n                this.editor = editor;\n            },\n            keydown: function (e) {\n                var that = this, editor = that.editor, keyboard = editor.keyboard, isTypingKey = keyboard.isTypingKey(e), evt = extend($.Event(), e);\n                that.editor.trigger('keydown', evt);\n                if (evt.isDefaultPrevented()) {\n                    e.preventDefault();\n                    return true;\n                }\n                if (!evt.isDefaultPrevented() && isTypingKey && !keyboard.isTypingInProgress()) {\n                    var range = editor.getRange();\n                    var body = editor.body;\n                    that.startRestorePoint = new RestorePoint(range, body);\n                    if (inTable(range)) {\n                        var removeTableContent = new RemoveTableContent(editor);\n                        removeTableContent.remove(range);\n                        editor.selectRange(range);\n                    }\n                    if (browser.webkit && !range.collapsed && selected(body, range)) {\n                        body.innerHTML = '';\n                    }\n                    if (editor.immutables && editorNS.Immutables.immutablesContext(range)) {\n                        var backspaceHandler = new editorNS.BackspaceHandler(editor);\n                        backspaceHandler.deleteSelection(range);\n                    }\n                    keyboard.startTyping(function () {\n                        that.endRestorePoint = finishUpdate(editor, that.startRestorePoint);\n                    });\n                    return true;\n                }\n                return false;\n            },\n            keyup: function (e) {\n                var keyboard = this.editor.keyboard;\n                this.editor.trigger('keyup', e);\n                if (keyboard.isTypingInProgress()) {\n                    keyboard.endTyping();\n                    return true;\n                }\n                return false;\n            }\n        });\n        var BackspaceHandler = Class.extend({\n            init: function (editor) {\n                this.editor = editor;\n            },\n            _addCaret: function (container) {\n                var caret = dom.create(this.editor.document, 'a');\n                dom.insertAt(container, caret, 0);\n                dom.stripBomNode(caret.previousSibling);\n                dom.stripBomNode(caret.nextSibling);\n                return caret;\n            },\n            _restoreCaret: function (caret) {\n                var range = this.editor.createRange();\n                range.setStartAfter(caret);\n                range.collapse(true);\n                this.editor.selectRange(range);\n                dom.remove(caret);\n            },\n            _handleDelete: function (range) {\n                var node = range.endContainer;\n                var block = dom.closestEditableOfType(node, dom.blockElements);\n                if (block && editorNS.RangeUtils.isEndOf(range, block)) {\n                    var next = dom.next(block);\n                    if (!next || dom.name(next) != 'p') {\n                        return false;\n                    }\n                    var caret = this._addCaret(next);\n                    this._merge(block, next);\n                    this._restoreCaret(caret);\n                    return true;\n                }\n                return false;\n            },\n            _cleanBomBefore: function (range) {\n                var offset = range.startOffset;\n                var node = range.startContainer;\n                var text = node.nodeValue;\n                var count = 0;\n                while (offset - count >= 0 && text[offset - count - 1] == '\\uFEFF') {\n                    count++;\n                }\n                if (count > 0) {\n                    node.deleteData(offset - count, count);\n                    range.setStart(node, Math.max(0, offset - count));\n                    range.collapse(true);\n                    this.editor.selectRange(range);\n                }\n            },\n            _handleBackspace: function (range) {\n                var node = range.startContainer;\n                var li = dom.closestEditableOfType(node, ['li']);\n                var block = dom.closestEditableOfType(node, 'p,h1,h2,h3,h4,h5,h6'.split(','));\n                var previousSibling;\n                if (dom.isDataNode(node)) {\n                    this._cleanBomBefore(range);\n                }\n                previousSibling = getSibling(block, PREVIOUS_SIBLING, function (sibling) {\n                    return !dom.htmlIndentSpace(sibling);\n                });\n                if (range.collapsed && range.startOffset !== range.endOffset && range.startOffset < 0) {\n                    range.startOffset = 0;\n                    range.endOffset = 0;\n                    this.editor.selectRange(range);\n                }\n                if (block && previousSibling && editorNS.RangeUtils.isStartOf(range, block)) {\n                    var caret = this._addCaret(block);\n                    this._merge(previousSibling, block);\n                    this._restoreCaret(caret);\n                    return true;\n                }\n                if (li && editorNS.RangeUtils.isStartOf(range, li)) {\n                    var child = li.firstChild;\n                    if (!child) {\n                        li.innerHTML = editorNS.emptyElementContent;\n                        child = li.firstChild;\n                    }\n                    var formatter = new editorNS.ListFormatter(dom.name(li.parentNode), 'p');\n                    range.selectNodeContents(li);\n                    formatter.toggle(range);\n                    if (dom.insignificant(child)) {\n                        range.setStartBefore(child);\n                    } else {\n                        range.setStart(child, 0);\n                    }\n                    this.editor.selectRange(range);\n                    return true;\n                }\n                return false;\n            },\n            _handleSelection: function (range) {\n                var ancestor = range.commonAncestorContainer;\n                var table = dom.closest(ancestor, 'table');\n                var emptyParagraphContent = editorNS.emptyElementContent;\n                var editor = this.editor;\n                if (inTable(range)) {\n                    var removeTableContent = new RemoveTableContent(editor);\n                    removeTableContent.remove(range);\n                    editor.selectRange(range);\n                    return true;\n                }\n                var marker = new Marker();\n                marker.add(range, false);\n                if (editor.immutables) {\n                    this._handleImmutables(marker);\n                }\n                this._surroundFullySelectedAnchor(marker);\n                range.setStartAfter(marker.start);\n                range.setEndBefore(marker.end);\n                var start = range.startContainer;\n                var end = range.endContainer;\n                range.deleteContents();\n                if (table && $(table).text() === '') {\n                    range.selectNode(table);\n                    range.deleteContents();\n                }\n                ancestor = range.commonAncestorContainer;\n                if (dom.name(ancestor) === 'p' && ancestor.innerHTML === '') {\n                    ancestor.innerHTML = emptyParagraphContent;\n                    range.setStart(ancestor, 0);\n                }\n                this._join(start, end);\n                dom.insertAfter(editor.document.createTextNode('\\uFEFF'), marker.start);\n                marker.remove(range);\n                start = range.startContainer;\n                if (dom.name(start) == 'tr') {\n                    start = start.childNodes[Math.max(0, range.startOffset - 1)];\n                    range.setStart(start, dom.getNodeLength(start));\n                }\n                range.collapse(true);\n                editor.selectRange(range);\n                return true;\n            },\n            _handleImmutables: function (marker) {\n                var immutableParent = editorNS.Immutables.immutableParent;\n                var startImmutable = immutableParent(marker.start);\n                var endImmutable = immutableParent(marker.start);\n                if (startImmutable) {\n                    dom.insertBefore(marker.start, startImmutable);\n                }\n                if (endImmutable) {\n                    dom.insertAfter(marker.end, endImmutable);\n                }\n                if (startImmutable) {\n                    dom.remove(startImmutable);\n                }\n                if (endImmutable && endImmutable.parentNode) {\n                    dom.remove(endImmutable);\n                }\n            },\n            _surroundFullySelectedAnchor: function (marker) {\n                var start = marker.start, startParent = start.parentNode, end = marker.end, anchorParent = dom.is(startParent, 'a') && startParent === end.parentNode && startParent, parent;\n                if (anchorParent && start === anchorParent.firstChild && end === anchorParent.lastChild) {\n                    parent = anchorParent.parentNode;\n                    parent.insertBefore(start, anchorParent);\n                    parent.insertBefore(end, anchorParent.nextSibling);\n                }\n            },\n            _root: function (node) {\n                while (node && node.parentNode && dom.name(node.parentNode) != 'body') {\n                    node = node.parentNode;\n                }\n                return node;\n            },\n            _join: function (start, end) {\n                start = this._root(start);\n                end = this._root(end);\n                if (start != end && dom.is(end, 'p')) {\n                    this._merge(start, end);\n                }\n            },\n            _merge: function (dest, src) {\n                dom.removeTrailingBreak(dest);\n                while (dest && src.firstChild) {\n                    if (dest.nodeType == 1) {\n                        dest = dom.list(dest) ? dest.children[dest.children.length - 1] : dest;\n                        if (dest) {\n                            dest.appendChild(src.firstChild);\n                        }\n                    } else if (dest.nodeType === nodeTypes.TEXT_NODE) {\n                        this._mergeWithTextNode(dest, src.firstChild);\n                    } else {\n                        dest.parentNode.appendChild(src.firstChild);\n                    }\n                }\n                dom.remove(src);\n            },\n            _mergeWithTextNode: function (textNode, appendedNode) {\n                if (textNode && textNode.nodeType === nodeTypes.TEXT_NODE) {\n                    if (textNode.nextSibling && this._isCaret(textNode.nextSibling)) {\n                        dom.insertAfter(appendedNode, textNode.nextSibling);\n                    } else {\n                        dom.insertAfter(appendedNode, textNode);\n                    }\n                }\n            },\n            _isCaret: function (element) {\n                return $(element).is('a');\n            },\n            keydown: function (e) {\n                var method, startRestorePoint;\n                var editor = this.editor;\n                var range = editor.getRange();\n                var keyCode = e.keyCode;\n                var keys = kendo.keys;\n                var backspace = keyCode === keys.BACKSPACE;\n                var del = keyCode == keys.DELETE;\n                if (editor.immutables && editor.immutables.keydown(e, range)) {\n                    return;\n                }\n                if ((backspace || del) && !range.collapsed) {\n                    method = '_handleSelection';\n                } else if (backspace) {\n                    method = '_handleBackspace';\n                } else if (del) {\n                    method = '_handleDelete';\n                }\n                if (!method) {\n                    return;\n                }\n                startRestorePoint = new RestorePoint(range, editor.body);\n                if (this[method](range)) {\n                    e.preventDefault();\n                    finishUpdate(editor, startRestorePoint);\n                }\n            },\n            deleteSelection: function (range) {\n                this._handleSelection(range);\n            },\n            keyup: $.noop\n        });\n        var SystemHandler = Class.extend({\n            init: function (editor) {\n                this.editor = editor;\n                this.systemCommandIsInProgress = false;\n            },\n            createUndoCommand: function () {\n                this.startRestorePoint = this.endRestorePoint = finishUpdate(this.editor, this.startRestorePoint);\n            },\n            changed: function () {\n                if (this.startRestorePoint) {\n                    return this.startRestorePoint.html != this.editor.body.innerHTML;\n                }\n                return false;\n            },\n            keydown: function (e) {\n                var that = this, editor = that.editor, keyboard = editor.keyboard;\n                if (keyboard.isModifierKey(e)) {\n                    if (keyboard.isTypingInProgress()) {\n                        keyboard.endTyping(true);\n                    }\n                    that.startRestorePoint = new RestorePoint(editor.getRange(), editor.body);\n                    return true;\n                }\n                if (keyboard.isSystem(e)) {\n                    that.systemCommandIsInProgress = true;\n                    if (that.changed()) {\n                        that.systemCommandIsInProgress = false;\n                        that.createUndoCommand();\n                    }\n                    return true;\n                }\n                return false;\n            },\n            keyup: function () {\n                var that = this;\n                if (that.systemCommandIsInProgress && that.changed()) {\n                    that.systemCommandIsInProgress = false;\n                    that.createUndoCommand();\n                    return true;\n                }\n                return false;\n            }\n        });\n        var SelectAllHandler = Class.extend({\n            init: function (editor) {\n                this.editor = editor;\n            },\n            keydown: function (e) {\n                if (!browser.webkit || e.isDefaultPrevented() || !(e.ctrlKey && e.keyCode == 65 && !e.altKey && !e.shiftKey)) {\n                    return;\n                }\n                if (this.editor.options.immutables) {\n                    this._toSelectableImmutables();\n                }\n                this._selectEditorBody();\n            },\n            _selectEditorBody: function () {\n                var editor = this.editor;\n                var range = editor.getRange();\n                range.selectNodeContents(editor.body);\n                editor.selectRange(range);\n            },\n            _toSelectableImmutables: function () {\n                var editor = this.editor, body = editor.body, immutable = editorNS.Immutables.immutable, emptyTextNode = dom.emptyTextNode, first = body.firstChild, last = body.lastChild;\n                while (emptyTextNode(first)) {\n                    first = first.nextSibling;\n                }\n                while (emptyTextNode(last)) {\n                    last = last.previousSibling;\n                }\n                if (first && immutable(first)) {\n                    $(br).prependTo(body);\n                }\n                if (last && immutable(last)) {\n                    $(br).appendTo(body);\n                }\n            },\n            keyup: $.noop\n        });\n        var Keyboard = Class.extend({\n            init: function (handlers) {\n                this.handlers = handlers;\n                this.typingInProgress = false;\n            },\n            isCharacter: function (keyCode) {\n                return keyCode >= 48 && keyCode <= 90 || keyCode >= 96 && keyCode <= 111 || keyCode >= 186 && keyCode <= 192 || keyCode >= 219 && keyCode <= 222 || keyCode == 229;\n            },\n            toolFromShortcut: function (tools, e) {\n                var key = String.fromCharCode(e.keyCode), toolName, toolOptions, modifier = this._getShortcutModifier(e, navigator.platform);\n                for (toolName in tools) {\n                    toolOptions = $.extend({\n                        ctrl: false,\n                        alt: false,\n                        shift: false\n                    }, tools[toolName].options);\n                    if ((toolOptions.key == key || toolOptions.key == e.keyCode) && toolOptions.ctrl == modifier && toolOptions.alt == e.altKey && toolOptions.shift == e.shiftKey) {\n                        return toolName;\n                    }\n                }\n            },\n            _getShortcutModifier: function (e, platform) {\n                var mac = platform.toUpperCase().indexOf('MAC') >= 0;\n                return mac ? e.metaKey : e.ctrlKey;\n            },\n            toolsFromShortcut: function (tools, e) {\n                var key = String.fromCharCode(e.keyCode), toolName, o, matchesKey, found = [];\n                var matchKey = function (toolKey) {\n                    return toolKey == key || toolKey == e.keyCode;\n                };\n                for (toolName in tools) {\n                    o = $.extend({\n                        ctrl: false,\n                        alt: false,\n                        shift: false\n                    }, tools[toolName].options);\n                    matchesKey = $.isArray(o.key) ? $.grep(o.key, matchKey).length > 0 : matchKey(o.key);\n                    if (matchesKey && o.ctrl == e.ctrlKey && o.alt == e.altKey && o.shift == e.shiftKey) {\n                        found.push(tools[toolName]);\n                    }\n                }\n                return found;\n            },\n            isTypingKey: function (e) {\n                var keyCode = e.keyCode;\n                return this.isCharacter(keyCode) && !e.ctrlKey && !e.altKey || keyCode == 32 || keyCode == 13 || keyCode == 8 || keyCode == 46 && !e.shiftKey && !e.ctrlKey && !e.altKey;\n            },\n            isModifierKey: function (e) {\n                var keyCode = e.keyCode;\n                return keyCode == 17 && !e.shiftKey && !e.altKey || keyCode == 16 && !e.ctrlKey && !e.altKey || keyCode == 18 && !e.ctrlKey && !e.shiftKey;\n            },\n            isSystem: function (e) {\n                return e.keyCode == 46 && e.ctrlKey && !e.altKey && !e.shiftKey;\n            },\n            startTyping: function (callback) {\n                this.onEndTyping = callback;\n                this.typingInProgress = true;\n            },\n            stopTyping: function () {\n                if (this.typingInProgress && this.onEndTyping) {\n                    this.onEndTyping();\n                }\n                this.typingInProgress = false;\n            },\n            endTyping: function (force) {\n                var that = this;\n                that.clearTimeout();\n                if (force) {\n                    that.stopTyping();\n                } else {\n                    that.timeout = window.setTimeout($.proxy(that.stopTyping, that), 1000);\n                }\n            },\n            isTypingInProgress: function () {\n                return this.typingInProgress;\n            },\n            clearTimeout: function () {\n                window.clearTimeout(this.timeout);\n            },\n            notify: function (e, what) {\n                var i, handlers = this.handlers;\n                for (i = 0; i < handlers.length; i++) {\n                    if (handlers[i][what](e)) {\n                        break;\n                    }\n                }\n            },\n            keydown: function (e) {\n                this.notify(e, 'keydown');\n            },\n            keyup: function (e) {\n                this.notify(e, 'keyup');\n            }\n        });\n        var Clipboard = Class.extend({\n            init: function (editor) {\n                this.editor = editor;\n                var pasteCleanup = editor.options.pasteCleanup;\n                this.cleaners = [\n                    new ScriptCleaner(pasteCleanup),\n                    new TabCleaner(pasteCleanup),\n                    new MSWordFormatCleaner(pasteCleanup),\n                    new WebkitFormatCleaner(pasteCleanup),\n                    new HtmlTagsCleaner(pasteCleanup),\n                    new HtmlAttrCleaner(pasteCleanup),\n                    new HtmlContentCleaner(pasteCleanup),\n                    new CustomCleaner(pasteCleanup)\n                ];\n            },\n            htmlToFragment: function (html) {\n                var editor = this.editor, doc = editor.document, container = dom.create(doc, 'div'), fragment = doc.createDocumentFragment();\n                container.innerHTML = html;\n                while (container.firstChild) {\n                    fragment.appendChild(container.firstChild);\n                }\n                return fragment;\n            },\n            isBlock: function (html) {\n                return /<(div|p|ul|ol|table|h[1-6])/i.test(html);\n            },\n            _startModification: function () {\n                var range;\n                var restorePoint;\n                var editor = this.editor;\n                if (this._inProgress) {\n                    return;\n                }\n                this._inProgress = true;\n                range = editor.getRange();\n                restorePoint = new RestorePoint(range, editor.body);\n                dom.persistScrollTop(editor.document);\n                return {\n                    range: range,\n                    restorePoint: restorePoint\n                };\n            },\n            _endModification: function (modificationInfo) {\n                finishUpdate(this.editor, modificationInfo.restorePoint);\n                this.editor._selectionChange();\n                this._inProgress = false;\n            },\n            _contentModification: function (before, after) {\n                var that = this;\n                var editor = that.editor;\n                var modificationInfo = that._startModification();\n                if (!modificationInfo) {\n                    return;\n                }\n                before.call(that, editor, modificationInfo.range);\n                setTimeout(function () {\n                    after.call(that, editor, modificationInfo.range);\n                    that._endModification(modificationInfo);\n                });\n            },\n            _removeBomNodes: function (range) {\n                var nodes = editorNS.RangeUtils.textNodes(range);\n                for (var i = 0; i < nodes.length; i++) {\n                    nodes[i].nodeValue = dom.stripBom(nodes[i].nodeValue);\n                }\n            },\n            _onBeforeCopy: function (range) {\n                var marker = new Marker();\n                marker.add(range);\n                this._removeBomNodes(range);\n                marker.remove(range);\n                this.editor.selectRange(range);\n            },\n            oncopy: function () {\n                this._onBeforeCopy(this.editor.getRange());\n            },\n            oncut: function () {\n                this._onBeforeCopy(this.editor.getRange());\n                this._contentModification($.noop, $.noop);\n            },\n            _fileToDataURL: function (blob) {\n                var deferred = $.Deferred();\n                var reader = new FileReader();\n                if (!(blob instanceof window.File) && blob.getAsFile) {\n                    blob = blob.getAsFile();\n                }\n                reader.onload = $.proxy(deferred.resolve, deferred);\n                reader.readAsDataURL(blob);\n                return deferred.promise();\n            },\n            _triggerPaste: function (html, options) {\n                var args = { html: html || '' };\n                args.html = args.html.replace(/\\ufeff/g, '');\n                this.editor.trigger('paste', args);\n                this.paste(args.html, options || {});\n            },\n            _handleImagePaste: function (e) {\n                if (!('FileReader' in window) || browser.msie && browser.version > 10) {\n                    return;\n                }\n                var clipboardData = e.clipboardData || e.originalEvent.clipboardData || window.clipboardData || {};\n                var items = clipboardData.items || clipboardData.files;\n                if (!items) {\n                    return;\n                }\n                var images = $.grep(items, function (item) {\n                    return /^image\\//i.test(item.type);\n                });\n                var html = $.grep(items, function (item) {\n                    return /^text\\/html/i.test(item.type);\n                });\n                if (html.length || !images.length) {\n                    return;\n                }\n                var modificationInfo = this._startModification();\n                if (!modificationInfo) {\n                    return;\n                }\n                $.when.apply($, $.map(images, this._fileToDataURL)).done($.proxy(function () {\n                    var results = Array.prototype.slice.call(arguments);\n                    var html = $.map(results, function (e) {\n                        return '<img src=\"' + e.target.result + '\" />';\n                    }).join('');\n                    this._triggerPaste(html);\n                    this._endModification(modificationInfo);\n                }, this));\n                return true;\n            },\n            onpaste: function (e) {\n                if (this._handleImagePaste(e)) {\n                    e.preventDefault();\n                    return;\n                }\n                this.expandImmutablesIn();\n                this._contentModification(function beforePaste(editor, range) {\n                    var clipboardNode = dom.create(editor.document, 'div', {\n                        className: 'k-paste-container',\n                        innerHTML: '\\uFEFF'\n                    });\n                    var browser = kendo.support.browser;\n                    var body = editor.body;\n                    this._decoreateClipboardNode(clipboardNode, body);\n                    body.appendChild(clipboardNode);\n                    if (browser.webkit) {\n                        this._moveToCaretPosition(clipboardNode, range);\n                    }\n                    if (browser.msie && browser.version < 11) {\n                        e.preventDefault();\n                        var r = editor.createRange();\n                        r.selectNodeContents(clipboardNode);\n                        editor.selectRange(r);\n                        var textRange = editor.document.body.createTextRange();\n                        textRange.moveToElementText(clipboardNode);\n                        $(body).unbind('paste');\n                        textRange.execCommand('Paste');\n                        $(body).bind('paste', $.proxy(this.onpaste, this));\n                    } else {\n                        var clipboardRange = editor.createRange();\n                        clipboardRange.selectNodeContents(clipboardNode);\n                        editor.selectRange(clipboardRange);\n                    }\n                    range.deleteContents();\n                }, function afterPaste(editor, range) {\n                    var html = '', containers;\n                    editor.selectRange(range);\n                    containers = $(editor.body).children('.k-paste-container');\n                    containers.each(function () {\n                        var lastChild = this.lastChild;\n                        if (lastChild && dom.is(lastChild, 'br')) {\n                            dom.remove(lastChild);\n                        }\n                        html += this.innerHTML;\n                    });\n                    containers.remove();\n                    this._triggerPaste(html, { clean: true });\n                });\n            },\n            _decoreateClipboardNode: function (node, body) {\n                if (!browser.msie && !browser.webkit) {\n                    return;\n                }\n                node = $(node);\n                node.css({\n                    borderWidth: '0px',\n                    width: '0px',\n                    height: '0px',\n                    overflow: 'hidden',\n                    margin: '0',\n                    padding: '0'\n                });\n                if (browser.msie) {\n                    var documentElement = $(body.ownerDocument.documentElement);\n                    node.css({\n                        fontVariant: 'normal',\n                        fontWeight: 'normal',\n                        lineSpacing: 'normal',\n                        lineHeight: 'normal',\n                        textDecoration: 'none'\n                    });\n                    var color = documentElement.css('color');\n                    if (color) {\n                        node.css('color', color);\n                    }\n                    var fontFamily = documentElement.css('fontFamily');\n                    if (fontFamily) {\n                        node.css('fontFamily', fontFamily);\n                    }\n                    var fontSize = documentElement.css('fontSize');\n                    if (fontSize) {\n                        node.css('fontSize', fontSize);\n                    }\n                }\n            },\n            _moveToCaretPosition: function (node, range) {\n                var that = this;\n                var body = that.editor.body;\n                var nodeOffset = dom.offset(node, body);\n                var caretOffset = that._caretOffset(range, body);\n                var translateX = caretOffset.left - nodeOffset.left;\n                var translateY = caretOffset.top - nodeOffset.top;\n                var translate = 'translate(' + translateX + 'px,' + translateY + 'px)';\n                $(node).css({\n                    '-webkit-transform': translate,\n                    'transform': translate\n                });\n            },\n            _caretOffset: function (range, body) {\n                var editor = this.editor;\n                var caret = dom.create(editor.document, 'span', { innerHTML: '\\uFEFF' });\n                var startContainer = range.startContainer;\n                var rangeChanged;\n                if (range.collapsed) {\n                    var isStartTextNode = dom.isDataNode(startContainer);\n                    if (isStartTextNode && (dom.isBom(startContainer) || range.startOffset === 0)) {\n                        dom.insertBefore(caret, startContainer);\n                    } else if (isStartTextNode && range.startOffset === startContainer.length) {\n                        dom.insertAfter(caret, startContainer);\n                    } else {\n                        range.insertNode(caret);\n                        rangeChanged = true;\n                    }\n                } else {\n                    startContainer = startContainer === body ? startContainer.childNodes[range.startOffset] : startContainer;\n                    dom.insertBefore(caret, startContainer);\n                }\n                var offset = dom.offset(caret, body);\n                var prev = caret.previousSibling;\n                var next = caret.nextSibling;\n                dom.remove(caret);\n                if (rangeChanged && dom.isDataNode(prev) && dom.isDataNode(next) && !dom.isBom(prev) && !dom.isBom(next)) {\n                    var prevLength = prev.length;\n                    next.data = prev.data + next.data;\n                    range.setStart(next, prevLength);\n                    dom.remove(prev);\n                    range.collapse(true);\n                    editor.selectRange(range);\n                }\n                return offset;\n            },\n            expandImmutablesIn: function (range) {\n                var editor = this.editor;\n                if (editor && editor.options.immutables) {\n                    var body = editor.body;\n                    range = range || editor.getRange();\n                    kendo.ui.editor.Immutables.expandImmutablesIn(range);\n                    if (range.startContainer === body && range.startOffset === 0) {\n                        var doc = body.ownerDocument;\n                        var bomNode = doc.createTextNode('\\uFEFF');\n                        body.insertBefore(bomNode, body.childNodes[0]);\n                        range.setStartBefore(bomNode);\n                    }\n                    editor.selectRange(range);\n                }\n            },\n            splittableParent: function (block, node) {\n                var parentNode, body;\n                if (block) {\n                    return dom.closestEditableOfType(node, [\n                        'p',\n                        'ul',\n                        'ol'\n                    ]) || node.parentNode;\n                }\n                parentNode = node.parentNode;\n                body = node.ownerDocument.body;\n                if (dom.isInline(parentNode)) {\n                    while (parentNode.parentNode != body && !dom.isBlock(parentNode.parentNode)) {\n                        parentNode = parentNode.parentNode;\n                    }\n                }\n                return parentNode;\n            },\n            paste: function (html, options) {\n                var editor = this.editor, i, l;\n                this.expandImmutablesIn();\n                options = extend({\n                    clean: false,\n                    split: true\n                }, options);\n                if (!options.skipCleaners) {\n                    for (i = 0, l = this.cleaners.length; i < l; i++) {\n                        if (this.cleaners[i].applicable(html)) {\n                            html = this.cleaners[i].clean(html);\n                        }\n                    }\n                }\n                if (options.clean) {\n                    html = html.replace(/(<br>(\\s|&nbsp;)*)+(<\\/?(div|p|li|col|t))/gi, '$3');\n                    html = html.replace(/<(a|span)[^>]*><\\/\\1>/gi, '');\n                }\n                html = html.replace(/^<li/i, '<ul><li').replace(/li>$/g, 'li></ul>');\n                var block = this.isBlock(html);\n                editor.focus();\n                var range = editor.getRange();\n                range.deleteContents();\n                if (range.startContainer == editor.document) {\n                    range.selectNodeContents(editor.body);\n                }\n                var marker = new Marker();\n                var caret = marker.addCaret(range);\n                var parent = this.splittableParent(block, caret);\n                var unwrap = false;\n                var splittable = parent != editor.body && !dom.is(parent, 'td');\n                if (options.split && splittable && (block || dom.isInline(parent))) {\n                    range.selectNode(caret);\n                    editorNS.RangeUtils.split(range, parent, true);\n                    unwrap = true;\n                }\n                var fragment = this.htmlToFragment(html);\n                if (fragment.firstChild && fragment.firstChild.className === 'k-paste-container') {\n                    var fragmentsHtml = [];\n                    for (i = 0, l = fragment.childNodes.length; i < l; i++) {\n                        fragmentsHtml.push(fragment.childNodes[i].innerHTML);\n                    }\n                    fragment = this.htmlToFragment(fragmentsHtml.join('<br />'));\n                }\n                $(fragment.childNodes).filter('table').addClass('k-table').end().find('table').addClass('k-table');\n                range.insertNode(fragment);\n                parent = this.splittableParent(block, caret);\n                if (unwrap) {\n                    while (caret.parentNode != parent) {\n                        dom.unwrap(caret.parentNode);\n                    }\n                    dom.unwrap(caret.parentNode);\n                }\n                dom.normalize(range.commonAncestorContainer);\n                caret.style.display = 'inline';\n                dom.restoreScrollTop(editor.document);\n                dom.scrollTo(caret);\n                marker.removeCaret(range);\n                var rangeEnd = range.commonAncestorContainer.parentNode;\n                if (range.collapsed && dom.name(rangeEnd) == 'tbody') {\n                    range.setStartAfter($(rangeEnd).closest('table')[0]);\n                    range.collapse(true);\n                }\n                editor.selectRange(range);\n            }\n        });\n        var Cleaner = Class.extend({\n            init: function (options) {\n                this.options = options || {};\n                this.replacements = [];\n            },\n            clean: function (html, customReplacements) {\n                var that = this, replacements = customReplacements || that.replacements, i, l;\n                for (i = 0, l = replacements.length; i < l; i += 2) {\n                    html = html.replace(replacements[i], replacements[i + 1]);\n                }\n                return html;\n            }\n        });\n        var ScriptCleaner = Cleaner.extend({\n            init: function (options) {\n                Cleaner.fn.init.call(this, options);\n                this.replacements = [\n                    /<(\\/?)script([^>]*)>/i,\n                    '<$1telerik:script$2>'\n                ];\n            },\n            applicable: function (html) {\n                return !this.options.none && /<script[^>]*>/i.test(html);\n            }\n        });\n        var TabCleaner = Cleaner.extend({\n            init: function (options) {\n                Cleaner.fn.init.call(this, options);\n                var replacement = ' ';\n                this.replacements = [\n                    /<span\\s+class=\"Apple-tab-span\"[^>]*>\\s*<\\/span>/gi,\n                    replacement,\n                    /\\t/gi,\n                    replacement,\n                    /&nbsp;&nbsp; &nbsp;/gi,\n                    replacement\n                ];\n            },\n            applicable: function (html) {\n                return /&nbsp;&nbsp; &nbsp;|class=\"?Apple-tab-span/i.test(html);\n            }\n        });\n        var MSWordFormatCleaner = Cleaner.extend({\n            init: function (options) {\n                Cleaner.fn.init.call(this, options);\n                this.junkReplacements = [\n                    /<\\?xml[^>]*>/gi,\n                    '',\n                    /<!--(.|\\n)*?-->/g,\n                    '',\n                    /&quot;/g,\n                    '\\'',\n                    /<o:p>&nbsp;<\\/o:p>/gi,\n                    '&nbsp;',\n                    /<\\/?(meta|link|style|o:|v:|x:)[^>]*>((?:.|\\n)*?<\\/(meta|link|style|o:|v:|x:)[^>]*>)?/gi,\n                    '',\n                    /<\\/o>/g,\n                    ''\n                ];\n                this.replacements = this.junkReplacements.concat([\n                    /(?:<br>&nbsp;[\\s\\r\\n]+|<br>)*(<\\/?(h[1-6]|hr|p|div|table|tbody|thead|tfoot|th|tr|td|li|ol|ul|caption|address|pre|form|blockquote|dl|dt|dd|dir|fieldset)[^>]*>)(?:<br>&nbsp;[\\s\\r\\n]+|<br>)*/g,\n                    '$1',\n                    /<br><br>/g,\n                    '<BR><BR>',\n                    /<br>(?!\\n)/g,\n                    ' ',\n                    /<table([^>]*)>(\\s|&nbsp;)+<t/gi,\n                    '<table$1><t',\n                    /<tr[^>]*>(\\s|&nbsp;)*<\\/tr>/gi,\n                    '',\n                    /<tbody[^>]*>(\\s|&nbsp;)*<\\/tbody>/gi,\n                    '',\n                    /<table[^>]*>(\\s|&nbsp;)*<\\/table>/gi,\n                    '',\n                    /<BR><BR>/g,\n                    '<br>',\n                    /^\\s*(&nbsp;)+/gi,\n                    '',\n                    /(&nbsp;|<br[^>]*>)+\\s*$/gi,\n                    '',\n                    /mso-[^;\"]*;?/gi,\n                    '',\n                    /<(\\/?)b(\\s[^>]*)?>/gi,\n                    '<$1strong$2>',\n                    /<(\\/?)font(\\s[^>]*)?>/gi,\n                    this.convertFontMatch,\n                    /<(\\/?)i(\\s[^>]*)?>/gi,\n                    '<$1em$2>',\n                    /style=([\"|'])\\s*\\1/g,\n                    '',\n                    /(<br[^>]*>)?\\n/g,\n                    function ($0, $1) {\n                        return $1 ? $0 : ' ';\n                    }\n                ]);\n            },\n            convertFontMatch: function (match, closing, args) {\n                var faceRe = /face=['\"]([^'\"]+)['\"]/i;\n                var face = faceRe.exec(args);\n                var family = args && face && face[1];\n                if (closing) {\n                    return '</span>';\n                } else if (family) {\n                    return '<span style=\"font-family:' + family + '\">';\n                } else {\n                    return '<span>';\n                }\n            },\n            applicable: function (html) {\n                return /class=\"?Mso/i.test(html) || /style=\"[^\"]*mso-/i.test(html) || /urn:schemas-microsoft-com:office/.test(html);\n            },\n            stripEmptyAnchors: function (html) {\n                return html.replace(/<a([^>]*)>\\s*<\\/a>/gi, function (a, attributes) {\n                    if (!attributes || attributes.indexOf('href') < 0) {\n                        return '';\n                    }\n                    return a;\n                });\n            },\n            listType: function (p, listData) {\n                var html = p.innerHTML;\n                var text = dom.innerText(p);\n                var startingSymbol;\n                var matchSymbol = html.match(/^(?:<span [^>]*texhtml[^>]*>)?<span [^>]*(?:Symbol|Wingdings)[^>]*>([^<]+)/i);\n                var symbol = matchSymbol && matchSymbol[1];\n                var isNumber = /^[a-z\\d]/i.test(symbol);\n                var trimStartText = function (text) {\n                    return text.replace(/^(?:&nbsp;|[\\u00a0\\n\\r\\s])+/, '');\n                };\n                if (matchSymbol) {\n                    startingSymbol = true;\n                }\n                html = html.replace(/<\\/?\\w+[^>]*>/g, '').replace(/&nbsp;/g, '\\xA0');\n                if (!startingSymbol && /^[\\u2022\\u00b7\\u00a7\\u00d8o]\\u00a0+/.test(html) || startingSymbol && /^.\\u00a0+/.test(html) || symbol && !isNumber && listData) {\n                    return {\n                        tag: 'ul',\n                        style: this._guessUnorderedListStyle(trimStartText(text))\n                    };\n                }\n                if (/^\\s*\\w+[\\.\\)][\\u00a0 ]{2,}/.test(html)) {\n                    return {\n                        tag: 'ol',\n                        style: this._guessOrderedListStyle(trimStartText(text))\n                    };\n                }\n            },\n            _convertToLi: function (p) {\n                var content;\n                if (p.childNodes.length == 1) {\n                    content = p.firstChild.innerHTML.replace(/^\\w+[\\.\\)](&nbsp;)+ /, '');\n                } else {\n                    dom.remove(p.firstChild);\n                    if (p.firstChild.nodeType == 3) {\n                        if (/^[ivxlcdm]+\\.$/i.test(p.firstChild.nodeValue)) {\n                            dom.remove(p.firstChild);\n                        }\n                    }\n                    if (/^(&nbsp;|\\s)+$/i.test(p.firstChild.innerHTML)) {\n                        dom.remove(p.firstChild);\n                    }\n                    content = p.innerHTML;\n                }\n                dom.remove(p);\n                return dom.create(document, 'li', { innerHTML: content });\n            },\n            _guessUnorderedListStyle: function (symbol) {\n                if (/^[\\u2022\\u00b7\\u00FC\\u00D8\\u002dv-]/.test(symbol)) {\n                    return null;\n                } else if (/^o/.test(symbol)) {\n                    return 'circle';\n                } else {\n                    return 'square';\n                }\n            },\n            _guessOrderedListStyle: function (symbol) {\n                var listType = null;\n                if (!/^\\d/.test(symbol)) {\n                    listType = (/^[a-z]/.test(symbol) ? 'lower-' : 'upper-') + (/^[ivxlcdm]/i.test(symbol) ? 'roman' : 'alpha');\n                }\n                return listType;\n            },\n            extractListLevels: function (html) {\n                var msoListRegExp = /style=['\"]?[^'\"]*?mso-list:\\s?[a-zA-Z]+(\\d+)\\s[a-zA-Z]+(\\d+)\\s(\\w+)/gi;\n                html = html.replace(msoListRegExp, function (match, list, level) {\n                    return kendo.format('data-list=\"{0}\" data-level=\"{1}\" {2}', list, level, match);\n                });\n                return html;\n            },\n            lists: function (placeholder) {\n                var blockChildren = $(placeholder).find(dom.blockElements.join(',')), lastMargin = -1, name, levels = {}, li = placeholder, rootMargin, listContainer, i, p, type, margin, list, listData;\n                for (i = 0; i < blockChildren.length; i++) {\n                    p = blockChildren[i];\n                    listData = $(p).data();\n                    var listIndex = listData.list;\n                    name = dom.name(p);\n                    if (name == 'td') {\n                        continue;\n                    }\n                    var listType = this.listType(p, listData);\n                    type = listType && listType.tag;\n                    if (!type || name != 'p') {\n                        if (!p.innerHTML) {\n                            dom.remove(p);\n                        } else {\n                            lastMargin = -1;\n                            li = placeholder;\n                        }\n                        continue;\n                    }\n                    margin = parseFloat(p.style.marginLeft || 0);\n                    if (rootMargin === undefined) {\n                        rootMargin = margin;\n                    }\n                    var levelType = type + listIndex;\n                    if (!levels[margin]) {\n                        levels[margin] = {};\n                    }\n                    list = levels[margin][levelType];\n                    if (margin > lastMargin || !list) {\n                        list = dom.create(document, type, { style: { listStyleType: listType.style } });\n                        if (li == placeholder || margin <= lastMargin) {\n                            if (listContainer && rootMargin !== margin) {\n                                listContainer.appendChild(list);\n                            } else {\n                                dom.insertBefore(list, p);\n                            }\n                            levels[margin] = {};\n                        } else {\n                            listContainer = li;\n                            li.appendChild(list);\n                        }\n                        levels[margin][levelType] = list;\n                    }\n                    li = this._convertToLi(p);\n                    list.appendChild(li);\n                    lastMargin = margin;\n                }\n            },\n            removeAttributes: function (element) {\n                var attributes = element.attributes, i = attributes.length;\n                while (i--) {\n                    if (dom.name(attributes[i]) != 'colspan') {\n                        element.removeAttributeNode(attributes[i]);\n                    }\n                }\n            },\n            createColGroup: function (row) {\n                var cells = row.cells;\n                var table = $(row).closest('table');\n                var colgroup = table.children('colgroup');\n                if (cells.length < 2) {\n                    return;\n                } else if (colgroup.length) {\n                    cells = colgroup.children();\n                    colgroup[0].parentNode.removeChild(colgroup[0]);\n                }\n                colgroup = $($.map(cells, function (cell) {\n                    var width = cell.width;\n                    if (width && parseInt(width, 10) !== 0) {\n                        return kendo.format('<col style=\"width:{0}px;\"/>', width);\n                    }\n                    return '<col />';\n                }).join(''));\n                if (!colgroup.is('colgroup')) {\n                    colgroup = $('<colgroup/>').append(colgroup);\n                }\n                colgroup.prependTo(table);\n            },\n            convertHeaders: function (row) {\n                var cells = row.cells, i, boldedCells = $.map(cells, function (cell) {\n                        var child = $(cell).children('p').children('strong')[0];\n                        if (child && dom.name(child) == 'strong') {\n                            return child;\n                        }\n                    });\n                if (boldedCells.length == cells.length) {\n                    for (i = 0; i < boldedCells.length; i++) {\n                        dom.unwrap(boldedCells[i]);\n                    }\n                    $(row).closest('table').find('colgroup').after('<thead></thead>').end().find('thead').append(row);\n                    for (i = 0; i < cells.length; i++) {\n                        dom.changeTag(cells[i], 'th');\n                    }\n                }\n            },\n            removeParagraphs: function (cells) {\n                var i, j, len, cell, paragraphs;\n                for (i = 0; i < cells.length; i++) {\n                    this.removeAttributes(cells[i]);\n                    cell = $(cells[i]);\n                    paragraphs = cell.children('p');\n                    for (j = 0, len = paragraphs.length; j < len; j++) {\n                        if (j < len - 1) {\n                            dom.insertAfter(dom.create(document, 'br'), paragraphs[j]);\n                        }\n                        dom.unwrap(paragraphs[j]);\n                    }\n                }\n            },\n            removeDefaultColors: function (spans) {\n                for (var i = 0; i < spans.length; i++) {\n                    if (/^\\s*color:\\s*[^;]*;?$/i.test(spans[i].style.cssText)) {\n                        dom.unwrap(spans[i]);\n                    }\n                }\n            },\n            tables: function (placeholder) {\n                var tables = $(placeholder).find('table'), that = this, rows, firstRow, longestRow, i, j;\n                for (i = 0; i < tables.length; i++) {\n                    rows = tables[i].rows;\n                    longestRow = firstRow = rows[0];\n                    for (j = 1; j < rows.length; j++) {\n                        if (rows[j].cells.length > longestRow.cells.length) {\n                            longestRow = rows[j];\n                        }\n                    }\n                    that.createColGroup(longestRow);\n                    that.convertHeaders(firstRow);\n                    that.removeAttributes(tables[i]);\n                    that.removeParagraphs(tables.eq(i).find('td,th'));\n                    that.removeDefaultColors(tables.eq(i).find('span'));\n                }\n            },\n            headers: function (placeholder) {\n                var titles = $(placeholder).find('p.MsoTitle');\n                for (var i = 0; i < titles.length; i++) {\n                    dom.changeTag(titles[i], 'h1');\n                }\n            },\n            removeFormatting: function (placeholder) {\n                $(placeholder).find('*').each(function () {\n                    $(this).css({\n                        fontSize: '',\n                        fontFamily: ''\n                    });\n                    if (!this.getAttribute('style') && !this.style.cssText) {\n                        this.removeAttribute('style');\n                    }\n                });\n            },\n            clean: function (html) {\n                var that = this, placeholder;\n                var filters = this.options;\n                if (filters.none) {\n                    html = Cleaner.fn.clean.call(that, html, this.junkReplacements);\n                    html = that.stripEmptyAnchors(html);\n                } else {\n                    html = this.extractListLevels(html);\n                    html = Cleaner.fn.clean.call(that, html);\n                    html = that.stripEmptyAnchors(html);\n                    placeholder = dom.create(document, 'div', { innerHTML: html });\n                    that.headers(placeholder);\n                    if (filters.msConvertLists) {\n                        that.lists(placeholder);\n                    }\n                    that.tables(placeholder);\n                    if (filters.msAllFormatting) {\n                        that.removeFormatting(placeholder);\n                    }\n                    html = placeholder.innerHTML.replace(/(<[^>]*)\\s+class=\"?[^\"\\s>]*\"?/gi, '$1');\n                }\n                return html;\n            }\n        });\n        var WebkitFormatCleaner = Cleaner.extend({\n            init: function (options) {\n                Cleaner.fn.init.call(this, options);\n                this.replacements = [\n                    /\\s+class=\"Apple-style-span[^\"]*\"/gi,\n                    '',\n                    /<(div|p|h[1-6])\\s+style=\"[^\"]*\"/gi,\n                    '<$1',\n                    /^<div>(.*)<\\/div>$/,\n                    '$1'\n                ];\n            },\n            applicable: function (html) {\n                return /class=\"?Apple-style-span|style=\"[^\"]*-webkit-nbsp-mode/i.test(html);\n            }\n        });\n        var DomCleaner = Cleaner.extend({\n            clean: function (html) {\n                var container = dom.create(document, 'div', { innerHTML: html });\n                container = this.cleanDom(container);\n                return container.innerHTML;\n            },\n            cleanDom: function (container) {\n                return container;\n            }\n        });\n        var HtmlTagsCleaner = DomCleaner.extend({\n            cleanDom: function (container) {\n                var tags = this.collectTags();\n                $(container).find(tags).each(function () {\n                    dom.unwrap(this);\n                });\n                return container;\n            },\n            collectTags: function () {\n                if (this.options.span) {\n                    return 'span';\n                }\n            },\n            applicable: function () {\n                return this.options.span;\n            }\n        });\n        var HtmlAttrCleaner = DomCleaner.extend({\n            cleanDom: function (container) {\n                var attributes = this.collectAttr();\n                var nodes = $(container).find('[' + attributes.join('],[') + ']');\n                nodes.removeAttr(attributes.join(' '));\n                return container;\n            },\n            collectAttr: function () {\n                if (this.options.css) {\n                    return [\n                        'class',\n                        'style'\n                    ];\n                }\n                return [];\n            },\n            applicable: function () {\n                return this.options.css;\n            }\n        });\n        var TextContainer = function () {\n            this.text = '';\n            this.add = function (text) {\n                this.text += text;\n            };\n        };\n        var HtmlTextLines = Class.extend({\n            init: function (separators) {\n                this.separators = separators || {\n                    text: ' ',\n                    line: '<br/>'\n                };\n                this.lines = [];\n                this.inlineBlockText = [];\n                this.resetLine();\n            },\n            appendText: function (text) {\n                if (text.nodeType === 3) {\n                    text = text.nodeValue;\n                }\n                this.textContainer.add(text);\n            },\n            appendInlineBlockText: function (text) {\n                this.inlineBlockText.push(text);\n            },\n            flashInlineBlockText: function () {\n                if (this.inlineBlockText.length) {\n                    this.appendText(this.inlineBlockText.join(' '));\n                    this.inlineBlockText = [];\n                }\n            },\n            endLine: function () {\n                this.flashInlineBlockText();\n                this.resetLine();\n            },\n            html: function () {\n                var separators = this.separators;\n                var result = '';\n                var lines = this.lines;\n                this.flashInlineBlockText();\n                for (var i = 0, il = lines.length, il1 = il - 1; i < il; i++) {\n                    var line = lines[i];\n                    for (var j = 0, jl = line.length, jl1 = jl - 1; j < jl; j++) {\n                        var text = line[j].text;\n                        result += text;\n                        if (j !== jl1) {\n                            result += separators.text;\n                        }\n                    }\n                    if (i !== il1) {\n                        result += separators.line;\n                    }\n                }\n                return result;\n            },\n            resetLine: function () {\n                this.textContainer = new TextContainer();\n                this.line = [];\n                this.line.push(this.textContainer);\n                this.lines.push(this.line);\n            }\n        });\n        var DomEnumerator = Class.extend({\n            init: function (callback) {\n                this.callback = callback;\n            },\n            enumerate: function (node) {\n                if (!node) {\n                    return;\n                }\n                var preventDown = this.callback(node);\n                var child = node.firstChild;\n                if (!preventDown && child) {\n                    this.enumerate(child);\n                }\n                this.enumerate(node.nextSibling);\n            }\n        });\n        var HtmlContentCleaner = Cleaner.extend({\n            init: function (options) {\n                Cleaner.fn.init.call(this, options);\n                this.hasText = false;\n                this.enumerator = new DomEnumerator($.proxy(this.buildText, this));\n            },\n            clean: function (html) {\n                var container = dom.create(document, 'div', { innerHTML: html });\n                return this.cleanDom(container);\n            },\n            cleanDom: function (container) {\n                this.separators = this.getDefaultSeparators();\n                this.htmlLines = new HtmlTextLines(this.separators);\n                this.enumerator.enumerate(container.firstChild);\n                this.hasText = false;\n                return this.htmlLines.html();\n            },\n            buildText: function (node) {\n                if (dom.isDataNode(node)) {\n                    if (dom.isEmptyspace(node)) {\n                        return;\n                    }\n                    this.htmlLines.appendText(node.nodeValue.replace('\\n', this.separators.line));\n                    this.hasText = true;\n                } else if (dom.isBlock(node) && this.hasText) {\n                    var action = this.actions[dom.name(node)] || this.actions.block;\n                    return action(this, node);\n                }\n            },\n            applicable: function () {\n                var o = this.options;\n                return o.all || o.keepNewLines;\n            },\n            getDefaultSeparators: function () {\n                if (this.options.all) {\n                    return {\n                        text: ' ',\n                        line: ' '\n                    };\n                } else {\n                    return {\n                        text: ' ',\n                        line: '<br/>'\n                    };\n                }\n            },\n            actions: {\n                ul: $.noop,\n                ol: $.noop,\n                table: $.noop,\n                thead: $.noop,\n                tbody: $.noop,\n                td: function (cleaner, node) {\n                    var tdCleaner = new HtmlContentCleaner({ all: true });\n                    var cellText = tdCleaner.cleanDom(node);\n                    cleaner.htmlLines.appendInlineBlockText(cellText);\n                    return true;\n                },\n                block: function (cleaner) {\n                    cleaner.htmlLines.endLine();\n                }\n            }\n        });\n        var CustomCleaner = Cleaner.extend({\n            clean: function (html) {\n                return this.options.custom(html);\n            },\n            applicable: function () {\n                return typeof this.options.custom === 'function';\n            }\n        });\n        var PrintCommand = Command.extend({\n            init: function (options) {\n                Command.fn.init.call(this, options);\n                this.managesUndoRedo = true;\n            },\n            exec: function () {\n                var editor = this.editor;\n                if (kendo.support.browser.msie) {\n                    editor.document.execCommand('print', false, null);\n                } else if (editor.window.print) {\n                    editor.window.print();\n                }\n            }\n        });\n        var ExportPdfCommand = Command.extend({\n            init: function (options) {\n                this.async = true;\n                Command.fn.init.call(this, options);\n            },\n            exec: function () {\n                var that = this;\n                var range = this.lockRange(true);\n                this.editor.saveAsPDF().then(function () {\n                    that.releaseRange(range);\n                });\n            }\n        });\n        extend(editorNS, {\n            _finishUpdate: finishUpdate,\n            Command: Command,\n            GenericCommand: GenericCommand,\n            InsertHtmlCommand: InsertHtmlCommand,\n            InsertHtmlTool: InsertHtmlTool,\n            TypingHandler: TypingHandler,\n            SystemHandler: SystemHandler,\n            BackspaceHandler: BackspaceHandler,\n            SelectAllHandler: SelectAllHandler,\n            Keyboard: Keyboard,\n            Clipboard: Clipboard,\n            Cleaner: Cleaner,\n            ScriptCleaner: ScriptCleaner,\n            TabCleaner: TabCleaner,\n            MSWordFormatCleaner: MSWordFormatCleaner,\n            WebkitFormatCleaner: WebkitFormatCleaner,\n            HtmlTagsCleaner: HtmlTagsCleaner,\n            HtmlAttrCleaner: HtmlAttrCleaner,\n            HtmlContentCleaner: HtmlContentCleaner,\n            HtmlTextLines: HtmlTextLines,\n            CustomCleaner: CustomCleaner,\n            PrintCommand: PrintCommand,\n            ExportPdfCommand: ExportPdfCommand\n        });\n        registerTool('insertHtml', new InsertHtmlTool({\n            template: new ToolTemplate({\n                template: EditorUtils.dropDownListTemplate,\n                title: 'Insert HTML',\n                initialValue: 'Insert HTML'\n            })\n        }));\n        registerTool('print', new Tool({\n            command: PrintCommand,\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Print'\n            })\n        }));\n        registerTool('pdf', new Tool({\n            command: ExportPdfCommand,\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Export PDF'\n            })\n        }));\n    }(window.kendo.jQuery));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/inlineformat', ['editor/system'], f);\n}(function () {\n    (function ($) {\n        var kendo = window.kendo, Class = kendo.Class, Editor = kendo.ui.editor, formats = kendo.ui.Editor.fn.options.formats, EditorUtils = Editor.EditorUtils, Tool = Editor.Tool, ToolTemplate = Editor.ToolTemplate, FormatTool = Editor.FormatTool, dom = Editor.Dom, RangeUtils = Editor.RangeUtils, extend = $.extend, registerTool = Editor.EditorUtils.registerTool, registerFormat = Editor.EditorUtils.registerFormat, preventDefault = function (ev) {\n                ev.preventDefault();\n            }, MOUSEDOWN_NS = 'mousedown.kendoEditor', KMARKER = 'k-marker';\n        var InlineFormatFinder = Class.extend({\n            init: function (format) {\n                this.format = format;\n            },\n            numberOfSiblings: function (referenceNode) {\n                var textNodesCount = 0, elementNodesCount = 0, markerCount = 0, parentNode = referenceNode.parentNode, node;\n                for (node = parentNode.firstChild; node; node = node.nextSibling) {\n                    if (node != referenceNode) {\n                        if (node.className == KMARKER) {\n                            markerCount++;\n                        } else if (node.nodeType == 3) {\n                            textNodesCount++;\n                        } else {\n                            elementNodesCount++;\n                        }\n                    }\n                }\n                if (markerCount > 1 && parentNode.firstChild.className == KMARKER && parentNode.lastChild.className == KMARKER) {\n                    return 0;\n                } else {\n                    return elementNodesCount + textNodesCount;\n                }\n            },\n            findSuitable: function (sourceNode, skip) {\n                if (!skip && this.numberOfSiblings(sourceNode) > 0) {\n                    return null;\n                }\n                var node = sourceNode.parentNode;\n                var tags = this.format[0].tags;\n                while (!dom.ofType(node, tags)) {\n                    if (this.numberOfSiblings(node) > 0) {\n                        return null;\n                    }\n                    node = node.parentNode;\n                }\n                return node;\n            },\n            findFormat: function (sourceNode) {\n                var format = this.format, attrEquals = dom.attrEquals, i, len, node, tags, attributes;\n                for (i = 0, len = format.length; i < len; i++) {\n                    node = sourceNode;\n                    tags = format[i].tags;\n                    attributes = format[i].attr;\n                    if (node && dom.ofType(node, tags) && attrEquals(node, attributes)) {\n                        return node;\n                    }\n                    while (node) {\n                        node = dom.parentOfType(node, tags);\n                        if (node && attrEquals(node, attributes)) {\n                            return node;\n                        }\n                    }\n                }\n                return null;\n            },\n            isFormatted: function (nodes) {\n                var i, len;\n                for (i = 0, len = nodes.length; i < len; i++) {\n                    if (this.findFormat(nodes[i])) {\n                        return true;\n                    }\n                }\n                return false;\n            }\n        });\n        var InlineFormatter = Class.extend({\n            init: function (format, values) {\n                this.finder = new InlineFormatFinder(format);\n                this.attributes = extend({}, format[0].attr, values);\n                this.tag = format[0].tags[0];\n            },\n            wrap: function (node) {\n                return dom.wrap(node, dom.create(node.ownerDocument, this.tag, this.attributes));\n            },\n            activate: function (range, nodes) {\n                if (this.finder.isFormatted(nodes)) {\n                    this.split(range);\n                    this.remove(nodes);\n                } else {\n                    this.apply(nodes);\n                }\n            },\n            toggle: function (range) {\n                var textNodes = this.immutables() ? RangeUtils.editableTextNodes : RangeUtils.textNodes;\n                var nodes = textNodes(range);\n                if (nodes.length > 0) {\n                    this.activate(range, nodes);\n                }\n            },\n            immutables: function () {\n                return this.editor && this.editor.options.immutables;\n            },\n            apply: function (nodes) {\n                var formatNodes = [];\n                var i, l, node, formatNode;\n                var attributes = this.attributes;\n                var styleAttr = attributes ? attributes.style || {} : {};\n                for (i = 0, l = nodes.length; i < l; i++) {\n                    node = nodes[i];\n                    formatNode = this.finder.findSuitable(node);\n                    if (formatNode) {\n                        if (dom.is(formatNode, 'font')) {\n                            if (styleAttr.color) {\n                                formatNode.removeAttribute('color');\n                            }\n                            if (styleAttr.fontName) {\n                                formatNode.removeAttribute('face');\n                            }\n                            if (styleAttr.fontSize) {\n                                formatNode.removeAttribute('size');\n                            }\n                        }\n                        dom.attr(formatNode, attributes);\n                    } else {\n                        while (!dom.isBlock(node.parentNode) && node.parentNode.childNodes.length == 1 && node.parentNode.contentEditable !== 'true') {\n                            node = node.parentNode;\n                        }\n                        formatNode = this.wrap(node);\n                    }\n                    formatNodes.push(formatNode);\n                }\n                this.consolidate(formatNodes);\n            },\n            remove: function (nodes) {\n                var i, l, formatNode;\n                for (i = 0, l = nodes.length; i < l; i++) {\n                    formatNode = this.finder.findFormat(nodes[i]);\n                    if (formatNode) {\n                        if (this.attributes && this.attributes.style) {\n                            dom.unstyle(formatNode, this.attributes.style);\n                            if (!formatNode.style.cssText && !formatNode.attributes['class']) {\n                                dom.unwrap(formatNode);\n                            }\n                        } else {\n                            dom.unwrap(formatNode);\n                        }\n                    }\n                }\n            },\n            split: function (range) {\n                var nodes = RangeUtils.textNodes(range);\n                var l = nodes.length;\n                var i, formatNode;\n                if (l > 0) {\n                    for (i = 0; i < l; i++) {\n                        formatNode = this.finder.findFormat(nodes[i]);\n                        if (formatNode) {\n                            RangeUtils.split(range, formatNode, true);\n                        }\n                    }\n                }\n            },\n            consolidate: function (nodes) {\n                var node, last;\n                while (nodes.length > 1) {\n                    node = nodes.pop();\n                    last = nodes[nodes.length - 1];\n                    if (node.previousSibling && node.previousSibling.className == KMARKER) {\n                        last.appendChild(node.previousSibling);\n                    }\n                    if (node.tagName == last.tagName && node.previousSibling == last && node.style.cssText == last.style.cssText) {\n                        while (node.firstChild) {\n                            last.appendChild(node.firstChild);\n                        }\n                        dom.remove(node);\n                    }\n                }\n            }\n        });\n        var GreedyInlineFormatFinder = InlineFormatFinder.extend({\n            init: function (format, greedyProperty) {\n                this.format = format;\n                this.greedyProperty = greedyProperty;\n                InlineFormatFinder.fn.init.call(this, format);\n            },\n            getInlineCssValue: function (node) {\n                var attributes = node.attributes;\n                var trim = $.trim;\n                var i, l, attribute, name, attributeValue, css, pair, cssIndex, len;\n                var propertyAndValue, property, value;\n                if (!attributes) {\n                    return;\n                }\n                for (i = 0, l = attributes.length; i < l; i++) {\n                    attribute = attributes[i];\n                    name = attribute.nodeName;\n                    attributeValue = attribute.nodeValue;\n                    if (attribute.specified && name == 'style') {\n                        css = trim(attributeValue || node.style.cssText).split(';');\n                        for (cssIndex = 0, len = css.length; cssIndex < len; cssIndex++) {\n                            pair = css[cssIndex];\n                            if (pair.length) {\n                                propertyAndValue = pair.split(':');\n                                property = trim(propertyAndValue[0].toLowerCase());\n                                value = trim(propertyAndValue[1]);\n                                if (property != this.greedyProperty) {\n                                    continue;\n                                }\n                                return property.indexOf('color') >= 0 ? dom.toHex(value) : value;\n                            }\n                        }\n                    }\n                }\n            },\n            getFormatInner: function (node) {\n                var $node = $(dom.isDataNode(node) ? node.parentNode : node);\n                var parents = $node.parentsUntil('[contentEditable]').addBack().toArray().reverse();\n                var i, len, value;\n                for (i = 0, len = parents.length; i < len; i++) {\n                    value = this.greedyProperty == 'className' ? parents[i].className : this.getInlineCssValue(parents[i]);\n                    if (value) {\n                        return value;\n                    }\n                }\n                return 'inherit';\n            },\n            getFormat: function (nodes) {\n                var result = this.getFormatInner(nodes[0]), i, len;\n                for (i = 1, len = nodes.length; i < len; i++) {\n                    if (result != this.getFormatInner(nodes[i])) {\n                        return '';\n                    }\n                }\n                return result;\n            },\n            isFormatted: function (nodes) {\n                return this.getFormat(nodes) !== '';\n            }\n        });\n        var GreedyInlineFormatter = InlineFormatter.extend({\n            init: function (format, values, greedyProperty) {\n                InlineFormatter.fn.init.call(this, format, values);\n                this.values = values;\n                this.finder = new GreedyInlineFormatFinder(format, greedyProperty);\n                if (greedyProperty) {\n                    this.greedyProperty = kendo.toCamelCase(greedyProperty);\n                }\n            },\n            activate: function (range, nodes) {\n                var greedyProperty = this.greedyProperty;\n                var action = 'apply';\n                this.split(range);\n                if (greedyProperty && this.values.style[greedyProperty] == 'inherit') {\n                    action = 'remove';\n                }\n                this[action](nodes);\n            }\n        });\n        var InlineFormatTool = FormatTool.extend({\n            init: function (options) {\n                FormatTool.fn.init.call(this, extend(options, {\n                    finder: new InlineFormatFinder(options.format),\n                    formatter: function () {\n                        return new InlineFormatter(options.format);\n                    }\n                }));\n            }\n        });\n        var DelayedExecutionTool = Tool.extend({\n            update: function (ui, nodes) {\n                var list = ui.data(this.type);\n                list.close();\n                list.value(this.finder.getFormat(nodes));\n            }\n        });\n        var FontTool = DelayedExecutionTool.extend({\n            init: function (options) {\n                Tool.fn.init.call(this, options);\n                this.type = kendo.support.browser.msie || kendo.support.touch ? 'kendoDropDownList' : 'kendoComboBox';\n                this.format = [{\n                        tags: [\n                            'span',\n                            'font'\n                        ]\n                    }];\n                this.finder = new GreedyInlineFormatFinder(this.format, options.cssAttr);\n            },\n            command: function (commandArguments) {\n                var options = this.options, format = this.format, style = {};\n                return new Editor.FormatCommand(extend(commandArguments, {\n                    formatter: function () {\n                        style[options.domAttr] = commandArguments.value;\n                        return new GreedyInlineFormatter(format, { style: style }, options.cssAttr);\n                    }\n                }));\n            },\n            initialize: function (ui, initOptions) {\n                var editor = initOptions.editor, options = this.options, toolName = options.name, dataSource, range, defaultValue = [];\n                if (options.defaultValue) {\n                    defaultValue = [{\n                            text: editor.options.messages[options.defaultValue[0].text],\n                            value: options.defaultValue[0].value\n                        }];\n                }\n                dataSource = defaultValue.concat(options.items ? options.items : editor.options[toolName] || []);\n                ui.attr({ title: initOptions.title });\n                ui[this.type]({\n                    dataTextField: 'text',\n                    dataValueField: 'value',\n                    dataSource: dataSource,\n                    change: function () {\n                        editor._range = range;\n                        Tool.exec(editor, toolName, this.value());\n                    },\n                    close: function () {\n                        setTimeout(function () {\n                            if ('_range' in editor) {\n                                delete editor._range;\n                            }\n                        }, 0);\n                    },\n                    highlightFirst: false\n                });\n                ui.closest('.k-widget').removeClass('k-' + toolName).find('*').addBack().attr('unselectable', 'on');\n                var widget = ui.data(this.type);\n                widget.value('inherit');\n                widget.wrapper.on(MOUSEDOWN_NS, '.k-select', function () {\n                    range = editor.getRange();\n                });\n            }\n        });\n        var ColorTool = Tool.extend({\n            init: function (options) {\n                Tool.fn.init.call(this, options);\n                this.format = [{\n                        tags: [\n                            'span',\n                            'font'\n                        ]\n                    }];\n                this.finder = new GreedyInlineFormatFinder(this.format, options.cssAttr);\n            },\n            options: { palette: 'websafe' },\n            update: function () {\n                this._widget.close();\n            },\n            command: function (commandArguments) {\n                var options = this.options, format = this.format, style = {};\n                return new Editor.FormatCommand(extend(commandArguments, {\n                    formatter: function () {\n                        style[options.domAttr] = commandArguments.value;\n                        return new GreedyInlineFormatter(format, { style: style }, options.cssAttr);\n                    }\n                }));\n            },\n            initialize: function (ui, initOptions) {\n                var editor = initOptions.editor, toolName = this.name, options = extend({}, ColorTool.fn.options, this.options), palette = options.palette;\n                ui = this._widget = new kendo.ui.ColorPicker(ui, {\n                    toolIcon: 'k-icon k-i-' + EditorUtils.getToolCssClass(options.name),\n                    palette: palette,\n                    change: function () {\n                        var color = ui.value();\n                        if (color) {\n                            Tool.exec(editor, toolName, color);\n                        }\n                        editor.focus();\n                    },\n                    open: function (e) {\n                        var picker = e.sender;\n                        picker.value(null);\n                        picker._popup.element.on(MOUSEDOWN_NS, preventDefault);\n                    },\n                    close: function (e) {\n                        e.sender._popup.element.off(MOUSEDOWN_NS);\n                    },\n                    activate: function (e) {\n                        e.preventDefault();\n                        ui.trigger('change');\n                    }\n                });\n                ui.wrapper.attr({\n                    title: initOptions.title,\n                    unselectable: 'on'\n                }).find('*').attr('unselectable', 'on');\n            }\n        });\n        extend(Editor, {\n            InlineFormatFinder: InlineFormatFinder,\n            InlineFormatter: InlineFormatter,\n            DelayedExecutionTool: DelayedExecutionTool,\n            GreedyInlineFormatFinder: GreedyInlineFormatFinder,\n            GreedyInlineFormatter: GreedyInlineFormatter,\n            InlineFormatTool: InlineFormatTool,\n            FontTool: FontTool,\n            ColorTool: ColorTool\n        });\n        registerFormat('bold', [\n            {\n                tags: [\n                    'strong',\n                    'b'\n                ]\n            },\n            {\n                tags: ['span'],\n                attr: { style: { fontWeight: 'bold' } }\n            }\n        ]);\n        registerTool('bold', new InlineFormatTool({\n            key: 'B',\n            ctrl: true,\n            format: formats.bold,\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Bold'\n            })\n        }));\n        registerFormat('italic', [\n            {\n                tags: [\n                    'em',\n                    'i'\n                ]\n            },\n            {\n                tags: ['span'],\n                attr: { style: { fontStyle: 'italic' } }\n            }\n        ]);\n        registerTool('italic', new InlineFormatTool({\n            key: 'I',\n            ctrl: true,\n            format: formats.italic,\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Italic'\n            })\n        }));\n        registerFormat('underline', [\n            {\n                tags: ['span'],\n                attr: { style: { textDecoration: 'underline' } }\n            },\n            { tags: ['u'] }\n        ]);\n        registerTool('underline', new InlineFormatTool({\n            key: 'U',\n            ctrl: true,\n            format: formats.underline,\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Underline'\n            })\n        }));\n        registerFormat('strikethrough', [\n            {\n                tags: [\n                    'del',\n                    'strike'\n                ]\n            },\n            {\n                tags: ['span'],\n                attr: { style: { textDecoration: 'line-through' } }\n            }\n        ]);\n        registerTool('strikethrough', new InlineFormatTool({\n            format: formats.strikethrough,\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Strikethrough'\n            })\n        }));\n        registerFormat('superscript', [{ tags: ['sup'] }]);\n        registerTool('superscript', new InlineFormatTool({\n            format: formats.superscript,\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Superscript'\n            })\n        }));\n        registerFormat('subscript', [{ tags: ['sub'] }]);\n        registerTool('subscript', new InlineFormatTool({\n            format: formats.subscript,\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Subscript'\n            })\n        }));\n        registerTool('foreColor', new ColorTool({\n            cssAttr: 'color',\n            domAttr: 'color',\n            name: 'foreColor',\n            template: new ToolTemplate({\n                template: EditorUtils.colorPickerTemplate,\n                title: 'Color'\n            })\n        }));\n        registerTool('backColor', new ColorTool({\n            cssAttr: 'background-color',\n            domAttr: 'backgroundColor',\n            name: 'backColor',\n            template: new ToolTemplate({\n                template: EditorUtils.colorPickerTemplate,\n                title: 'Background Color'\n            })\n        }));\n        registerTool('fontName', new FontTool({\n            cssAttr: 'font-family',\n            domAttr: 'fontFamily',\n            name: 'fontName',\n            defaultValue: [{\n                    text: 'fontNameInherit',\n                    value: 'inherit'\n                }],\n            template: new ToolTemplate({\n                template: EditorUtils.comboBoxTemplate,\n                title: 'Font Name'\n            })\n        }));\n        registerTool('fontSize', new FontTool({\n            cssAttr: 'font-size',\n            domAttr: 'fontSize',\n            name: 'fontSize',\n            defaultValue: [{\n                    text: 'fontSizeInherit',\n                    value: 'inherit'\n                }],\n            template: new ToolTemplate({\n                template: EditorUtils.comboBoxTemplate,\n                title: 'Font Size'\n            })\n        }));\n    }(window.kendo.jQuery));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/formatblock', ['editor/inlineformat'], f);\n}(function () {\n    (function ($) {\n        var kendo = window.kendo, Class = kendo.Class, extend = $.extend, Editor = kendo.ui.editor, formats = kendo.ui.Editor.fn.options.formats, dom = Editor.Dom, Command = Editor.Command, ToolTemplate = Editor.ToolTemplate, FormatTool = Editor.FormatTool, EditorUtils = Editor.EditorUtils, registerTool = EditorUtils.registerTool, registerFormat = EditorUtils.registerFormat, RangeUtils = Editor.RangeUtils;\n        var BlockFormatFinder = Class.extend({\n            init: function (format) {\n                this.format = format;\n            },\n            contains: function (node, children) {\n                var i, len, child;\n                for (i = 0, len = children.length; i < len; i++) {\n                    child = children[i];\n                    if (!child || !dom.isAncestorOrSelf(node, child)) {\n                        return false;\n                    }\n                }\n                return true;\n            },\n            findSuitable: function (nodes) {\n                var format = this.format, suitable = [], i, len, candidate;\n                for (i = 0, len = nodes.length; i < len; i++) {\n                    for (var f = format.length - 1; f >= 0; f--) {\n                        candidate = dom.ofType(nodes[i], format[f].tags) ? nodes[i] : dom.closestEditableOfType(nodes[i], format[f].tags);\n                        if (candidate) {\n                            break;\n                        }\n                    }\n                    if (!candidate || candidate.contentEditable === 'true') {\n                        return [];\n                    }\n                    if ($.inArray(candidate, suitable) < 0) {\n                        suitable.push(candidate);\n                    }\n                }\n                this._resolveListsItems(suitable);\n                for (i = 0, len = suitable.length; i < len; i++) {\n                    if (this.contains(suitable[i], suitable)) {\n                        return [suitable[i]];\n                    }\n                }\n                return suitable;\n            },\n            _resolveListsItems: function (nodes) {\n                var i, node, wrapper;\n                for (i = 0; i < nodes.length; i++) {\n                    node = nodes[i];\n                    wrapper = dom.is(node, 'li') ? node : dom.wrapper(node);\n                    wrapper = wrapper && dom.list(wrapper) ? wrapper.children[0] : wrapper;\n                    if (dom.is(wrapper, 'li')) {\n                        node = nodes[i] = wrapper;\n                    }\n                }\n            },\n            findFormat: function (sourceNode) {\n                var format = this.format, i, len, node, tags, attributes;\n                var editableParent = dom.editableParent(sourceNode);\n                var immutables = this.options && this.options.immutables;\n                var ImmutablesNS = Editor.Immutables;\n                for (i = 0, len = format.length; i < len; i++) {\n                    node = sourceNode;\n                    tags = format[i].tags;\n                    attributes = format[i].attr;\n                    if (immutables && tags && tags[0] == 'immutable') {\n                        var immutable = ImmutablesNS.immutableParent(node);\n                        if (immutable && dom.attrEquals(immutable, attributes)) {\n                            return node;\n                        }\n                    }\n                    while (node && dom.isAncestorOf(editableParent, node)) {\n                        if (dom.ofType(node, tags) && dom.attrEquals(node, attributes)) {\n                            return node;\n                        }\n                        node = node.parentNode;\n                    }\n                }\n                return null;\n            },\n            getFormat: function (nodes) {\n                var that = this, findFormat = function (node) {\n                        return that.findFormat(dom.isDataNode(node) ? node.parentNode : node);\n                    }, result = findFormat(nodes[0]), i, len;\n                if (!result) {\n                    return '';\n                }\n                for (i = 1, len = nodes.length; i < len; i++) {\n                    if (result != findFormat(nodes[i])) {\n                        return '';\n                    }\n                }\n                return result.nodeName.toLowerCase();\n            },\n            isFormatted: function (nodes) {\n                for (var i = 0, len = nodes.length; i < len; i++) {\n                    if (!this.findFormat(nodes[i])) {\n                        return false;\n                    }\n                }\n                return true;\n            }\n        });\n        var BlockFormatter = Class.extend({\n            init: function (format, values) {\n                this.format = format;\n                this.values = values;\n                this.finder = new BlockFormatFinder(format);\n            },\n            wrap: function (tag, attributes, nodes) {\n                var commonAncestor = nodes.length == 1 ? dom.blockParentOrBody(nodes[0]) : dom.commonAncestor.apply(null, nodes);\n                if (dom.isInline(commonAncestor)) {\n                    commonAncestor = dom.blockParentOrBody(commonAncestor);\n                }\n                var ancestors = dom.significantChildNodes(commonAncestor), position = dom.findNodeIndex(ancestors[0]), wrapper = dom.create(commonAncestor.ownerDocument, tag, attributes), i, ancestor;\n                for (i = 0; i < ancestors.length; i++) {\n                    ancestor = ancestors[i];\n                    if (dom.isBlock(ancestor)) {\n                        dom.attr(ancestor, attributes);\n                        if (wrapper.childNodes.length) {\n                            dom.insertBefore(wrapper, ancestor);\n                            wrapper = wrapper.cloneNode(false);\n                        }\n                        position = dom.findNodeIndex(ancestor) + 1;\n                        continue;\n                    }\n                    wrapper.appendChild(ancestor);\n                }\n                if (wrapper.firstChild) {\n                    dom.insertAt(commonAncestor, wrapper, position);\n                }\n            },\n            apply: function (nodes) {\n                var format, values = this.values;\n                function attributes(format) {\n                    return extend({}, format && format.attr, values);\n                }\n                this._handleImmutables(nodes, true);\n                var images = dom.filter('img', nodes);\n                var imageFormat = EditorUtils.formatByName('img', this.format);\n                var imageAttributes = attributes(imageFormat);\n                $.each(images, function () {\n                    dom.attr(this, imageAttributes);\n                });\n                if (images.length == nodes.length) {\n                    return;\n                }\n                var nonImages = dom.filter('img', nodes, true);\n                var formatNodes = this.finder.findSuitable(nonImages);\n                if (formatNodes.length) {\n                    for (var i = 0, len = formatNodes.length; i < len; i++) {\n                        format = EditorUtils.formatByName(dom.name(formatNodes[i]), this.format);\n                        dom.attr(formatNodes[i], attributes(format));\n                    }\n                } else {\n                    format = this.format[0];\n                    this.wrap(format.tags[0], attributes(format), nonImages);\n                }\n            },\n            _handleImmutables: function (nodes, applyFormatting) {\n                if (!this.immutables()) {\n                    return;\n                }\n                var immutableFormat = EditorUtils.formatByName('immutable', this.format);\n                if (!immutableFormat) {\n                    return;\n                }\n                var ImmutablesNS = Editor.Immutables;\n                var l = nodes.length - 1;\n                for (var i = l; i >= 0; i--) {\n                    var immutableParent = ImmutablesNS.immutableParent(nodes[i]);\n                    if (!immutableParent) {\n                        continue;\n                    }\n                    if (immutableParent !== nodes[i + 1]) {\n                        if (applyFormatting) {\n                            dom.attr(immutableParent, immutableFormat.attr);\n                        } else {\n                            dom.unstyle(immutableParent, immutableFormat.attr.style);\n                        }\n                    }\n                    nodes.splice(i, 1);\n                }\n            },\n            immutables: function () {\n                return this.editor && this.editor.options.immutables;\n            },\n            remove: function (nodes) {\n                var i, l, formatNode, namedFormat, name;\n                this._handleImmutables(nodes, false);\n                for (i = 0, l = nodes.length; i < l; i++) {\n                    formatNode = this.finder.findFormat(nodes[i]);\n                    if (formatNode) {\n                        name = dom.name(formatNode);\n                        if (name == 'div' && !formatNode.getAttribute('class')) {\n                            dom.unwrap(formatNode);\n                        } else {\n                            namedFormat = EditorUtils.formatByName(name, this.format);\n                            if (namedFormat.attr.style) {\n                                dom.unstyle(formatNode, namedFormat.attr.style);\n                            }\n                            if (namedFormat.attr.className) {\n                                dom.removeClass(formatNode, namedFormat.attr.className);\n                            }\n                        }\n                    }\n                }\n            },\n            toggle: function (range) {\n                var that = this, nodes = dom.filterBy(RangeUtils.nodes(range), dom.htmlIndentSpace, true);\n                if (that.finder.isFormatted(nodes)) {\n                    that.remove(nodes);\n                } else {\n                    that.apply(nodes);\n                }\n            }\n        });\n        var GreedyBlockFormatter = Class.extend({\n            init: function (format, values) {\n                var that = this;\n                that.format = format;\n                that.values = values;\n                that.finder = new BlockFormatFinder(format);\n            },\n            apply: function (nodes) {\n                var format = this.format;\n                var blocks = dom.blockParents(nodes);\n                var formatTag = format[0].tags[0];\n                var i, len, list, formatter, range;\n                var element;\n                var tagName;\n                var block;\n                var immutalbeParent;\n                if (blocks.length) {\n                    for (i = 0, len = blocks.length; i < len; i++) {\n                        block = blocks[i];\n                        immutalbeParent = this.immutables() && Editor.Immutables.immutableParent(block);\n                        if (!immutalbeParent) {\n                            tagName = dom.name(block);\n                            if (tagName == 'li') {\n                                list = block.parentNode;\n                                formatter = new Editor.ListFormatter(list.nodeName.toLowerCase(), formatTag);\n                                range = this.editor.createRange();\n                                range.selectNode(blocks[i]);\n                                formatter.toggle(range);\n                            } else if (formatTag && (tagName == 'td' || block.attributes.contentEditable)) {\n                                new BlockFormatter(format, this.values).apply(block.childNodes);\n                            } else {\n                                element = dom.changeTag(block, formatTag);\n                                dom.attr(element, format[0].attr);\n                            }\n                        }\n                    }\n                } else {\n                    var blockFormatter = new BlockFormatter(format, this.values);\n                    blockFormatter.editor = this.editor;\n                    blockFormatter.apply(nodes);\n                }\n            },\n            toggle: function (range) {\n                var nodes = RangeUtils.textNodes(range);\n                if (!nodes.length) {\n                    range.selectNodeContents(range.commonAncestorContainer);\n                    nodes = RangeUtils.textNodes(range);\n                    if (!nodes.length) {\n                        nodes = dom.significantChildNodes(range.commonAncestorContainer);\n                    }\n                }\n                this.apply(nodes);\n            },\n            immutables: function () {\n                return this.editor && this.editor.options.immutables;\n            }\n        });\n        var FormatCommand = Command.extend({\n            init: function (options) {\n                options.formatter = options.formatter();\n                var finder = options.formatter.finder;\n                if (finder && EditorUtils.formatByName('immutable', finder.format)) {\n                    finder._initOptions({ immutables: options.immutables });\n                }\n                Command.fn.init.call(this, options);\n            }\n        });\n        var BlockFormatTool = FormatTool.extend({\n            init: function (options) {\n                FormatTool.fn.init.call(this, extend(options, {\n                    finder: new BlockFormatFinder(options.format),\n                    formatter: function () {\n                        return new BlockFormatter(options.format);\n                    }\n                }));\n            }\n        });\n        extend(Editor, {\n            BlockFormatFinder: BlockFormatFinder,\n            BlockFormatter: BlockFormatter,\n            GreedyBlockFormatter: GreedyBlockFormatter,\n            FormatCommand: FormatCommand,\n            BlockFormatTool: BlockFormatTool\n        });\n        var listElements = [\n            'ul',\n            'ol',\n            'li'\n        ];\n        registerFormat('justifyLeft', [\n            {\n                tags: dom.nonListBlockElements,\n                attr: { style: { textAlign: 'left' } }\n            },\n            {\n                tags: ['img'],\n                attr: {\n                    style: {\n                        'float': 'left',\n                        display: '',\n                        marginLeft: '',\n                        marginRight: ''\n                    }\n                }\n            },\n            {\n                tags: ['immutable'],\n                attr: {\n                    style: {\n                        'float': 'left',\n                        display: '',\n                        marginLeft: '',\n                        marginRight: ''\n                    }\n                }\n            },\n            {\n                tags: listElements,\n                attr: {\n                    style: {\n                        textAlign: 'left',\n                        listStylePosition: ''\n                    }\n                }\n            }\n        ]);\n        registerTool('justifyLeft', new BlockFormatTool({\n            format: formats.justifyLeft,\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Justify Left'\n            })\n        }));\n        registerFormat('justifyCenter', [\n            {\n                tags: dom.nonListBlockElements,\n                attr: { style: { textAlign: 'center' } }\n            },\n            {\n                tags: ['img'],\n                attr: {\n                    style: {\n                        display: 'block',\n                        marginLeft: 'auto',\n                        marginRight: 'auto',\n                        'float': ''\n                    }\n                }\n            },\n            {\n                tags: ['immutable'],\n                attr: {\n                    style: {\n                        display: 'block',\n                        marginLeft: 'auto',\n                        marginRight: 'auto',\n                        'float': ''\n                    }\n                }\n            },\n            {\n                tags: listElements,\n                attr: {\n                    style: {\n                        textAlign: 'center',\n                        listStylePosition: 'inside'\n                    }\n                }\n            }\n        ]);\n        registerTool('justifyCenter', new BlockFormatTool({\n            format: formats.justifyCenter,\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Justify Center'\n            })\n        }));\n        registerFormat('justifyRight', [\n            {\n                tags: dom.nonListBlockElements,\n                attr: { style: { textAlign: 'right' } }\n            },\n            {\n                tags: ['img'],\n                attr: {\n                    style: {\n                        'float': 'right',\n                        display: '',\n                        marginLeft: '',\n                        marginRight: ''\n                    }\n                }\n            },\n            {\n                tags: ['immutable'],\n                attr: {\n                    style: {\n                        'float': 'right',\n                        display: '',\n                        marginLeft: '',\n                        marginRight: ''\n                    }\n                }\n            },\n            {\n                tags: listElements,\n                attr: {\n                    style: {\n                        textAlign: 'right',\n                        listStylePosition: 'inside'\n                    }\n                }\n            }\n        ]);\n        registerTool('justifyRight', new BlockFormatTool({\n            format: formats.justifyRight,\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Justify Right'\n            })\n        }));\n        registerFormat('justifyFull', [\n            {\n                tags: dom.nonListBlockElements,\n                attr: { style: { textAlign: 'justify' } }\n            },\n            {\n                tags: ['img'],\n                attr: {\n                    style: {\n                        display: 'block',\n                        marginLeft: 'auto',\n                        marginRight: 'auto',\n                        'float': ''\n                    }\n                }\n            },\n            {\n                tags: ['immutable'],\n                attr: {\n                    style: {\n                        display: 'block',\n                        marginLeft: 'auto',\n                        marginRight: 'auto',\n                        'float': ''\n                    }\n                }\n            },\n            {\n                tags: listElements,\n                attr: {\n                    style: {\n                        textAlign: 'justify',\n                        listStylePosition: ''\n                    }\n                }\n            }\n        ]);\n        registerTool('justifyFull', new BlockFormatTool({\n            format: formats.justifyFull,\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Justify Full'\n            })\n        }));\n    }(window.kendo.jQuery));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/linebreak', ['editor/formatblock'], f);\n}(function () {\n    (function ($) {\n        var kendo = window.kendo, extend = $.extend, editorNS = kendo.ui.editor, dom = editorNS.Dom, Command = editorNS.Command, Tool = editorNS.Tool, BlockFormatter = editorNS.BlockFormatter, normalize = dom.normalize, RangeUtils = editorNS.RangeUtils, registerTool = editorNS.EditorUtils.registerTool;\n        var ParagraphCommand = Command.extend({\n            init: function (options) {\n                this.options = options;\n                Command.fn.init.call(this, options);\n            },\n            _insertMarker: function (doc, range) {\n                var marker = dom.create(doc, 'a'), container;\n                marker.className = 'k-marker';\n                range.insertNode(marker);\n                if (!marker.parentNode) {\n                    container = range.commonAncestorContainer;\n                    container.innerHTML = '';\n                    container.appendChild(marker);\n                }\n                normalize(marker.parentNode);\n                return marker;\n            },\n            _moveFocus: function (range, candidate) {\n                if (dom.isEmpty(candidate)) {\n                    range.setStartBefore(candidate);\n                } else {\n                    range.selectNodeContents(candidate);\n                    var focusNode = RangeUtils.textNodes(range)[0];\n                    if (!focusNode) {\n                        while (candidate.childNodes.length && !dom.is(candidate.firstChild, 'br')) {\n                            candidate = candidate.firstChild;\n                        }\n                        focusNode = candidate;\n                    }\n                    if (dom.isEmpty(focusNode)) {\n                        range.setStartBefore(focusNode);\n                    } else {\n                        if (dom.emptyNode(focusNode)) {\n                            focusNode.innerHTML = '\\uFEFF';\n                        }\n                        range.setStartBefore(focusNode.firstChild || focusNode);\n                    }\n                }\n            },\n            shouldTrim: function (range) {\n                var blocks = 'p,h1,h2,h3,h4,h5,h6'.split(','), startInBlock = dom.parentOfType(range.startContainer, blocks), endInBlock = dom.parentOfType(range.endContainer, blocks);\n                return startInBlock && !endInBlock || !startInBlock && endInBlock;\n            },\n            _blankAfter: function (node) {\n                while (node && (dom.isMarker(node) || dom.stripBom(node.nodeValue) === '')) {\n                    node = node.nextSibling;\n                }\n                return !node;\n            },\n            exec: function () {\n                var range = this.getRange(), doc = RangeUtils.documentFromRange(range), parent, previous, next, emptyParagraphContent = editorNS.emptyElementContent, paragraph, marker, li, heading, rng, shouldTrim;\n                this.expandImmutablesIn(range);\n                shouldTrim = this.shouldTrim(range);\n                range.deleteContents();\n                marker = this._insertMarker(doc, range);\n                dom.stripBomNode(marker.previousSibling);\n                dom.stripBomNode(marker.nextSibling);\n                li = dom.closestEditableOfType(marker, ['li']);\n                heading = dom.closestEditableOfType(marker, 'h1,h2,h3,h4,h5,h6'.split(','));\n                if (li) {\n                    if (dom.emptyNode(li)) {\n                        paragraph = dom.create(doc, 'p');\n                        if (dom.next(li)) {\n                            rng = range.cloneRange();\n                            rng.selectNode(li);\n                            RangeUtils.split(rng, li.parentNode);\n                        }\n                        var br = $('br', li);\n                        if (br.length == 1) {\n                            br.remove();\n                        }\n                        var parentNode = li.parentNode;\n                        var parentChildrenLength = li.parentNode.children.length;\n                        var firstChild = parentChildrenLength > 1 && li.childNodes.length == 1 && li.children[0];\n                        dom.insertAfter(paragraph, parentNode);\n                        dom.remove(parentChildrenLength == 1 ? li.parentNode : li);\n                        if (firstChild && firstChild !== marker) {\n                            paragraph.appendChild(firstChild);\n                            paragraph.appendChild(marker);\n                        } else {\n                            paragraph.innerHTML = emptyParagraphContent;\n                        }\n                        next = paragraph;\n                    }\n                } else if (heading && this._blankAfter(marker)) {\n                    paragraph = dom.create(doc, 'p');\n                    dom.insertAfter(paragraph, heading);\n                    paragraph.innerHTML = emptyParagraphContent;\n                    dom.remove(marker);\n                    next = paragraph;\n                }\n                if (!next) {\n                    if (!(li || heading)) {\n                        new BlockFormatter([{ tags: ['p'] }]).apply([marker]);\n                    }\n                    range.selectNode(marker);\n                    parent = dom.parentOfType(marker, [li ? 'li' : heading ? dom.name(heading) : 'p']);\n                    RangeUtils.split(range, parent, shouldTrim);\n                    previous = parent.previousSibling;\n                    if (dom.is(previous, 'li') && previous.firstChild && !dom.is(previous.firstChild, 'br')) {\n                        previous = previous.firstChild;\n                    }\n                    next = parent.nextSibling;\n                    this.clean(previous);\n                    this.clean(next, { links: true });\n                    if (dom.is(next, 'li') && next.firstChild && !dom.is(next.firstChild, 'br')) {\n                        next = next.firstChild;\n                    }\n                    dom.remove(parent);\n                    normalize(previous);\n                }\n                normalize(next);\n                this._moveFocus(range, next);\n                range.collapse(true);\n                dom.scrollTo(next);\n                RangeUtils.selectRange(range);\n            },\n            clean: function (node, options) {\n                var root = node;\n                if (node.firstChild && dom.is(node.firstChild, 'br')) {\n                    dom.remove(node.firstChild);\n                }\n                if (dom.isDataNode(node) && !node.nodeValue) {\n                    node = node.parentNode;\n                }\n                if (node) {\n                    var siblings = false;\n                    while (node.firstChild && node.firstChild.nodeType == 1) {\n                        siblings = siblings || dom.significantNodes(node.childNodes).length > 1;\n                        node = node.firstChild;\n                    }\n                    if (!dom.isEmpty(node) && /^\\s*$/.test(node.innerHTML) && !siblings) {\n                        $(root).find('.k-br').remove();\n                        node.innerHTML = editorNS.emptyElementContent;\n                    }\n                    if (options && options.links) {\n                        while (node != root) {\n                            if (dom.is(node, 'a') && dom.emptyNode(node)) {\n                                dom.unwrap(node);\n                                break;\n                            }\n                            node = node.parentNode;\n                        }\n                    }\n                }\n            }\n        });\n        var NewLineCommand = Command.extend({\n            init: function (options) {\n                this.options = options;\n                Command.fn.init.call(this, options);\n            },\n            exec: function () {\n                var range = this.getRange();\n                this.expandImmutablesIn(range);\n                var br = dom.create(RangeUtils.documentFromRange(range), 'br');\n                var filler;\n                var browser = kendo.support.browser;\n                var oldIE = browser.msie && browser.version < 11;\n                range.deleteContents();\n                range.insertNode(br);\n                normalize(br.parentNode);\n                if (!oldIE && (!br.nextSibling || dom.isWhitespace(br.nextSibling))) {\n                    filler = br.cloneNode(true);\n                    filler.className = 'k-br';\n                    dom.insertAfter(filler, br);\n                }\n                range.setStartAfter(br);\n                range.collapse(true);\n                dom.scrollTo(br.nextSibling || br);\n                RangeUtils.selectRange(range);\n            }\n        });\n        extend(editorNS, {\n            ParagraphCommand: ParagraphCommand,\n            NewLineCommand: NewLineCommand\n        });\n        registerTool('insertLineBreak', new Tool({\n            key: 13,\n            shift: true,\n            command: NewLineCommand\n        }));\n        registerTool('insertParagraph', new Tool({\n            key: 13,\n            command: ParagraphCommand\n        }));\n    }(window.kendo.jQuery));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/lists', ['editor/linebreak'], f);\n}(function () {\n    (function ($) {\n        var kendo = window.kendo, Class = kendo.Class, extend = $.extend, Editor = kendo.ui.editor, dom = Editor.Dom, RangeUtils = Editor.RangeUtils, EditorUtils = Editor.EditorUtils, Command = Editor.Command, ToolTemplate = Editor.ToolTemplate, FormatTool = Editor.FormatTool, BlockFormatFinder = Editor.BlockFormatFinder, textNodes = RangeUtils.textNodes, registerTool = Editor.EditorUtils.registerTool;\n        var ListFormatFinder = BlockFormatFinder.extend({\n            init: function (tag) {\n                this.tag = tag;\n                var tags = this.tags = [\n                    tag == 'ul' ? 'ol' : 'ul',\n                    tag\n                ];\n                BlockFormatFinder.fn.init.call(this, [{ tags: tags }]);\n            },\n            isFormatted: function (nodes) {\n                var formatNodes = [];\n                var formatNode, i;\n                for (i = 0; i < nodes.length; i++) {\n                    formatNode = this.findFormat(nodes[i]);\n                    if (formatNode && dom.name(formatNode) == this.tag) {\n                        formatNodes.push(formatNode);\n                    }\n                }\n                if (formatNodes.length < 1) {\n                    return false;\n                }\n                if (formatNodes.length != nodes.length) {\n                    return false;\n                }\n                for (i = 0; i < formatNodes.length; i++) {\n                    if (formatNodes[i].parentNode != formatNode.parentNode) {\n                        break;\n                    }\n                    if (formatNodes[i] != formatNode) {\n                        return false;\n                    }\n                }\n                return true;\n            },\n            findSuitable: function (nodes) {\n                var candidate = this.findFormat(nodes[0]);\n                if (candidate && dom.name(candidate) == this.tag) {\n                    return candidate;\n                }\n                return null;\n            }\n        });\n        var ListFormatter = Class.extend({\n            init: function (tag, unwrapTag) {\n                var that = this;\n                that.finder = new ListFormatFinder(tag);\n                that.tag = tag;\n                that.unwrapTag = unwrapTag;\n            },\n            isList: function (node) {\n                return dom.list(node);\n            },\n            immutables: function () {\n                return this.editor && !!this.editor.options.immutables;\n            },\n            wrap: function (list, nodes) {\n                var li = dom.create(list.ownerDocument, 'li'), i, node, isImmutable = this.immutables() ? Editor.Immutables.immutable : $.noop;\n                for (i = 0; i < nodes.length; i++) {\n                    node = nodes[i];\n                    if (dom.is(node, 'li')) {\n                        list.appendChild(node);\n                        continue;\n                    }\n                    if (this.isList(node)) {\n                        while (node.firstChild) {\n                            list.appendChild(node.firstChild);\n                        }\n                        continue;\n                    }\n                    if (dom.is(node, 'td')) {\n                        while (node.firstChild) {\n                            li.appendChild(node.firstChild);\n                        }\n                        list.appendChild(li);\n                        node.appendChild(list);\n                        list = list.cloneNode(false);\n                        li = li.cloneNode(false);\n                        continue;\n                    }\n                    li.appendChild(node);\n                    if (dom.isBlock(node)) {\n                        list.appendChild(li);\n                        if (!isImmutable(node)) {\n                            dom.unwrap(node);\n                        }\n                        li = li.cloneNode(false);\n                    }\n                }\n                if (li.firstChild) {\n                    list.appendChild(li);\n                }\n            },\n            containsAny: function (parent, nodes) {\n                for (var i = 0; i < nodes.length; i++) {\n                    if (dom.isAncestorOrSelf(parent, nodes[i])) {\n                        return true;\n                    }\n                }\n                return false;\n            },\n            suitable: function (candidate, nodes) {\n                if (candidate.className == 'k-marker') {\n                    var sibling = candidate.nextSibling;\n                    if (sibling && dom.isBlock(sibling)) {\n                        return false;\n                    }\n                    sibling = candidate.previousSibling;\n                    if (sibling && dom.isBlock(sibling)) {\n                        return false;\n                    }\n                }\n                return this.containsAny(candidate, nodes) || dom.isInline(candidate) || candidate.nodeType == 3;\n            },\n            _parentLists: function (node) {\n                var editable = dom.closestEditable(node);\n                return $(node).parentsUntil(editable, 'ul,ol');\n            },\n            split: function (range) {\n                var nodes = textNodes(range);\n                var start, end, parents;\n                if (nodes.length) {\n                    start = dom.parentOfType(nodes[0], ['li']);\n                    end = dom.parentOfType(nodes[nodes.length - 1], ['li']);\n                    range.setStartBefore(start);\n                    range.setEndAfter(end);\n                    for (var i = 0, l = nodes.length; i < l; i++) {\n                        var formatNode = this.finder.findFormat(nodes[i]);\n                        if (formatNode) {\n                            parents = this._parentLists(formatNode);\n                            if (parents.length) {\n                                RangeUtils.split(range, parents.last()[0], true);\n                            } else {\n                                RangeUtils.split(range, formatNode, true);\n                            }\n                        }\n                    }\n                }\n            },\n            merge: function (tag, formatNode) {\n                var prev = formatNode.previousSibling, next;\n                while (prev && (prev.className == 'k-marker' || prev.nodeType == 3 && dom.isWhitespace(prev))) {\n                    prev = prev.previousSibling;\n                }\n                if (prev && dom.name(prev) == tag) {\n                    while (formatNode.firstChild) {\n                        prev.appendChild(formatNode.firstChild);\n                    }\n                    dom.remove(formatNode);\n                    formatNode = prev;\n                }\n                next = formatNode.nextSibling;\n                while (next && (next.className == 'k-marker' || next.nodeType == 3 && dom.isWhitespace(next))) {\n                    next = next.nextSibling;\n                }\n                if (next && dom.name(next) == tag) {\n                    while (formatNode.lastChild) {\n                        next.insertBefore(formatNode.lastChild, next.firstChild);\n                    }\n                    dom.remove(formatNode);\n                }\n            },\n            breakable: function (node) {\n                return node != node.ownerDocument.body && !/table|tbody|tr|td/.test(dom.name(node)) && !node.attributes.contentEditable;\n            },\n            applyOnSection: function (section, nodes) {\n                var tag = this.tag;\n                var commonAncestor = dom.closestSplittableParent(nodes);\n                var ancestors = [];\n                var formatNode = this.finder.findSuitable(nodes);\n                if (!formatNode) {\n                    formatNode = new ListFormatFinder(tag == 'ul' ? 'ol' : 'ul').findSuitable(nodes);\n                }\n                var childNodes;\n                if (/table|tbody/.test(dom.name(commonAncestor))) {\n                    childNodes = $.map(nodes, function (node) {\n                        return dom.parentOfType(node, ['td']);\n                    });\n                } else {\n                    childNodes = dom.significantChildNodes(commonAncestor);\n                    if ($.grep(childNodes, dom.isBlock).length) {\n                        childNodes = $.grep(childNodes, $.proxy(function (node) {\n                            return this.containsAny(node, nodes);\n                        }, this));\n                    }\n                    if (!childNodes.length) {\n                        childNodes = nodes;\n                    }\n                }\n                function pushAncestor() {\n                    ancestors.push(this);\n                }\n                for (var i = 0; i < childNodes.length; i++) {\n                    var child = childNodes[i];\n                    var suitable = (!formatNode || !dom.isAncestorOrSelf(formatNode, child)) && this.suitable(child, nodes);\n                    if (!suitable) {\n                        continue;\n                    }\n                    if (formatNode && this.isList(child)) {\n                        $.each(child.children, pushAncestor);\n                        dom.remove(child);\n                    } else {\n                        ancestors.push(child);\n                    }\n                }\n                if (ancestors.length == childNodes.length && this.breakable(commonAncestor)) {\n                    ancestors = [commonAncestor];\n                }\n                if (!formatNode) {\n                    formatNode = dom.create(commonAncestor.ownerDocument, tag);\n                    dom.insertBefore(formatNode, ancestors[0]);\n                }\n                this.wrap(formatNode, ancestors);\n                while (dom.isBom(formatNode.nextSibling)) {\n                    dom.remove(formatNode.nextSibling);\n                }\n                if (!dom.is(formatNode, tag)) {\n                    dom.changeTag(formatNode, tag);\n                }\n                this.merge(tag, formatNode);\n            },\n            apply: function (nodes) {\n                var i = 0, sections = [], lastSection, lastNodes, section, node, l = nodes.length, immutableParent = this.immutables() ? Editor.Immutables.immutableParent : $.noop;\n                function addLastSection() {\n                    if (lastSection) {\n                        sections.push({\n                            section: lastSection,\n                            nodes: lastNodes\n                        });\n                    }\n                }\n                for (i = 0; i < l; i++) {\n                    node = immutableParent(nodes[i]) || nodes[i];\n                    section = dom.closestEditable(node, [\n                        'td',\n                        'body'\n                    ]);\n                    if (!lastSection || section != lastSection) {\n                        addLastSection();\n                        lastNodes = [node];\n                        lastSection = section;\n                    } else {\n                        lastNodes.push(node);\n                    }\n                }\n                addLastSection();\n                for (i = 0; i < sections.length; i++) {\n                    this.applyOnSection(sections[i].section, sections[i].nodes);\n                }\n            },\n            unwrap: function (ul) {\n                var fragment = ul.ownerDocument.createDocumentFragment(), unwrapTag = this.unwrapTag, parents, li, p, child;\n                for (li = ul.firstChild; li; li = li.nextSibling) {\n                    p = dom.create(ul.ownerDocument, unwrapTag || 'p');\n                    while (li.firstChild) {\n                        child = li.firstChild;\n                        if (dom.isBlock(child)) {\n                            if (p.firstChild) {\n                                fragment.appendChild(p);\n                                p = dom.create(ul.ownerDocument, unwrapTag || 'p');\n                            }\n                            fragment.appendChild(child);\n                        } else {\n                            p.appendChild(child);\n                        }\n                    }\n                    if (p.firstChild) {\n                        fragment.appendChild(p);\n                    }\n                }\n                parents = this._parentLists(ul);\n                if (parents[0]) {\n                    dom.insertAfter(fragment, parents.last()[0]);\n                    parents.last().remove();\n                } else {\n                    dom.insertAfter(fragment, ul);\n                }\n                dom.remove(ul);\n            },\n            remove: function (nodes) {\n                var formatNode;\n                for (var i = 0, l = nodes.length; i < l; i++) {\n                    formatNode = this.finder.findFormat(nodes[i]);\n                    if (formatNode) {\n                        this.unwrap(formatNode);\n                    }\n                }\n            },\n            toggle: function (range) {\n                var that = this, nodes = textNodes(range), ancestor = range.commonAncestorContainer;\n                if (!nodes.length) {\n                    range.selectNodeContents(ancestor);\n                    nodes = textNodes(range);\n                    if (!nodes.length) {\n                        var text = ancestor.ownerDocument.createTextNode('');\n                        range.startContainer.appendChild(text);\n                        nodes = [text];\n                        range.selectNode(text.parentNode);\n                    }\n                }\n                nodes = dom.filterBy(nodes, dom.htmlIndentSpace, true);\n                if (that.finder.isFormatted(nodes)) {\n                    that.split(range);\n                    that.remove(nodes);\n                } else {\n                    that.apply(nodes);\n                }\n            }\n        });\n        var ListCommand = Command.extend({\n            init: function (options) {\n                options.formatter = new ListFormatter(options.tag);\n                Command.fn.init.call(this, options);\n            }\n        });\n        var ListTool = FormatTool.extend({\n            init: function (options) {\n                this.options = options;\n                FormatTool.fn.init.call(this, extend(options, { finder: new ListFormatFinder(options.tag) }));\n            },\n            command: function (commandArguments) {\n                return new ListCommand(extend(commandArguments, { tag: this.options.tag }));\n            }\n        });\n        extend(Editor, {\n            ListFormatFinder: ListFormatFinder,\n            ListFormatter: ListFormatter,\n            ListCommand: ListCommand,\n            ListTool: ListTool\n        });\n        registerTool('insertUnorderedList', new ListTool({\n            tag: 'ul',\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Insert unordered list'\n            })\n        }));\n        registerTool('insertOrderedList', new ListTool({\n            tag: 'ol',\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Insert ordered list'\n            })\n        }));\n    }(window.kendo.jQuery));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/link', ['editor/lists'], f);\n}(function () {\n    (function ($, undefined) {\n        var kendo = window.kendo, Class = kendo.Class, extend = $.extend, proxy = $.proxy, Editor = kendo.ui.editor, dom = Editor.Dom, RangeUtils = Editor.RangeUtils, EditorUtils = Editor.EditorUtils, Command = Editor.Command, Tool = Editor.Tool, ToolTemplate = Editor.ToolTemplate, InlineFormatter = Editor.InlineFormatter, InlineFormatFinder = Editor.InlineFormatFinder, textNodes = RangeUtils.textNodes, editableTextNodes = RangeUtils.editableTextNodes, registerTool = Editor.EditorUtils.registerTool, keys = kendo.keys;\n        var HTTP_PROTOCOL = 'http://';\n        var protocolRegExp = /^\\w*:\\/\\//;\n        var endLinkCharsRegExp = /[\\w\\/\\$\\-_\\*\\?]/i;\n        var LinkFormatFinder = Class.extend({\n            findSuitable: function (sourceNode) {\n                return dom.parentOfType(sourceNode, ['a']);\n            }\n        });\n        var LinkFormatter = Class.extend({\n            init: function () {\n                this.finder = new LinkFormatFinder();\n            },\n            apply: function (range, attributes) {\n                var nodes = this.immutables ? editableTextNodes(range) : textNodes(range);\n                var markers, doc, formatter, a, parent;\n                if (attributes.innerHTML) {\n                    doc = RangeUtils.documentFromRange(range);\n                    markers = RangeUtils.getMarkers(range);\n                    range.deleteContents();\n                    a = dom.create(doc, 'a', attributes);\n                    range.insertNode(a);\n                    parent = a.parentNode;\n                    if (dom.name(parent) == 'a') {\n                        dom.insertAfter(a, parent);\n                    }\n                    if (dom.emptyNode(parent)) {\n                        dom.remove(parent);\n                    }\n                    var ref = a;\n                    for (var i = 0; i < markers.length; i++) {\n                        dom.insertAfter(markers[i], ref);\n                        ref = markers[i];\n                    }\n                    if (markers.length) {\n                        dom.insertBefore(doc.createTextNode('\\uFEFF'), markers[1]);\n                        dom.insertAfter(doc.createTextNode('\\uFEFF'), markers[1]);\n                        range.setStartBefore(markers[0]);\n                        range.setEndAfter(markers[markers.length - 1]);\n                    }\n                } else {\n                    formatter = new InlineFormatter([{ tags: ['a'] }], attributes);\n                    formatter.finder = this.finder;\n                    formatter.apply(nodes);\n                }\n            }\n        });\n        var UnlinkCommand = Command.extend({\n            init: function (options) {\n                var that = this;\n                options.formatter = {\n                    toggle: function (range) {\n                        var nodes = that.immutables() ? editableTextNodes(range) : textNodes(range);\n                        new InlineFormatter([{ tags: ['a'] }]).remove(nodes);\n                    }\n                };\n                this.options = options;\n                Command.fn.init.call(this, options);\n            }\n        });\n        var LinkCommand = Command.extend({\n            init: function (options) {\n                var that;\n                this.options = options;\n                Command.fn.init.call(this, options);\n                this.formatter = new LinkFormatter();\n                if (!options.url) {\n                    this.attributes = null;\n                    this.async = true;\n                } else {\n                    this.exec = function () {\n                        this.formatter.immutables = that && that.immutables();\n                        this.formatter.apply(options.range, {\n                            href: options.url,\n                            innerHTML: options.text || options.url,\n                            target: options.target\n                        });\n                    };\n                }\n            },\n            _dialogTemplate: function () {\n                return kendo.template('<div class=\"k-editor-dialog k-popup-edit-form k-edit-form-container\">' + '<div class=\\'k-edit-label\\'>' + '<label for=\\'k-editor-link-url\\'>#: messages.linkWebAddress #</label>' + '</div>' + '<div class=\\'k-edit-field\\'>' + '<input type=\\'text\\' class=\\'k-input k-textbox\\' id=\\'k-editor-link-url\\'>' + '</div>' + '<div class=\\'k-edit-label k-editor-link-text-row\\'>' + '<label for=\\'k-editor-link-text\\'>#: messages.linkText #</label>' + '</div>' + '<div class=\\'k-edit-field k-editor-link-text-row\\'>' + '<input type=\\'text\\' class=\\'k-input k-textbox\\' id=\\'k-editor-link-text\\'>' + '</div>' + '<div class=\\'k-edit-label\\'>' + '<label for=\\'k-editor-link-title\\'>#: messages.linkToolTip #</label>' + '</div>' + '<div class=\\'k-edit-field\\'>' + '<input type=\\'text\\' class=\\'k-input k-textbox\\' id=\\'k-editor-link-title\\'>' + '</div>' + '<div class=\\'k-edit-label\\'></div>' + '<div class=\\'k-edit-field\\'>' + '<input type=\\'checkbox\\' class=\\'k-checkbox\\' id=\\'k-editor-link-target\\'>' + '<label for=\\'k-editor-link-target\\' class=\\'k-checkbox-label\\'>#: messages.linkOpenInNewWindow #</label>' + '</div>' + '<div class=\\'k-edit-buttons k-state-default\\'>' + '<button class=\"k-dialog-insert k-button k-primary\">#: messages.dialogInsert #</button>' + '<button class=\"k-dialog-close k-button\">#: messages.dialogCancel #</button>' + '</div>' + '</div>')({ messages: this.editor.options.messages });\n            },\n            exec: function () {\n                var messages = this.editor.options.messages;\n                this._initialText = '';\n                this._range = this.lockRange(true);\n                this.formatter.immutables = this.immutables();\n                var nodes = textNodes(this._range);\n                var a = nodes.length ? this.formatter.finder.findSuitable(nodes[0]) : null;\n                var img = nodes.length && dom.name(nodes[0]) == 'img';\n                var dialog = this.createDialog(this._dialogTemplate(), {\n                    title: messages.createLink,\n                    close: proxy(this._close, this),\n                    visible: false\n                });\n                if (a) {\n                    this._range.selectNodeContents(a);\n                    nodes = textNodes(this._range);\n                }\n                this._initialText = this.linkText(nodes);\n                dialog.find('.k-dialog-insert').click(proxy(this._apply, this)).end().find('.k-dialog-close').click(proxy(this._close, this)).end().find('.k-edit-field input').keydown(proxy(this._keydown, this)).end().find('#k-editor-link-url').val(this.linkUrl(a)).end().find('#k-editor-link-text').val(this._initialText).end().find('#k-editor-link-title').val(a ? a.title : '').end().find('#k-editor-link-target').attr('checked', a ? a.target == '_blank' : false).end().find('.k-editor-link-text-row').toggle(!img);\n                this._dialog = dialog.data('kendoWindow').center().open();\n                $('#k-editor-link-url', dialog).focus().select();\n            },\n            _keydown: function (e) {\n                var keys = kendo.keys;\n                if (e.keyCode == keys.ENTER) {\n                    this._apply(e);\n                } else if (e.keyCode == keys.ESC) {\n                    this._close(e);\n                }\n            },\n            _apply: function (e) {\n                var element = this._dialog.element;\n                var href = $('#k-editor-link-url', element).val();\n                var title, text, target;\n                var textInput = $('#k-editor-link-text', element);\n                if (href && href != HTTP_PROTOCOL) {\n                    if (href.indexOf('@') > 0 && !/^(\\w+:)|(\\/\\/)/i.test(href)) {\n                        href = 'mailto:' + href;\n                    }\n                    this.attributes = { href: href };\n                    title = $('#k-editor-link-title', element).val();\n                    if (title) {\n                        this.attributes.title = title;\n                    }\n                    if (textInput.is(':visible')) {\n                        text = textInput.val();\n                        if (!text && !this._initialText) {\n                            this.attributes.innerHTML = href;\n                        } else if (text && text !== this._initialText) {\n                            this.attributes.innerHTML = dom.stripBom(text);\n                        }\n                    }\n                    target = $('#k-editor-link-target', element).is(':checked');\n                    this.attributes.target = target ? '_blank' : null;\n                    this.formatter.apply(this._range, this.attributes);\n                }\n                this._close(e);\n                if (this.change) {\n                    this.change();\n                }\n            },\n            _close: function (e) {\n                e.preventDefault();\n                this._dialog.destroy();\n                dom.windowFromDocument(RangeUtils.documentFromRange(this._range)).focus();\n                this.releaseRange(this._range);\n            },\n            linkUrl: function (anchor) {\n                if (anchor) {\n                    return anchor.getAttribute('href', 2);\n                }\n                return HTTP_PROTOCOL;\n            },\n            linkText: function (nodes) {\n                var text = '';\n                var i;\n                for (i = 0; i < nodes.length; i++) {\n                    text += nodes[i].nodeValue;\n                }\n                return dom.stripBom(text || '');\n            },\n            redo: function () {\n                var range = this.lockRange(true);\n                this.formatter.apply(range, this.attributes);\n                this.releaseRange(range);\n            }\n        });\n        var AutoLinkCommand = Command.extend({\n            init: function (options) {\n                Command.fn.init.call(this, options);\n                this.formatter = new LinkFormatter();\n            },\n            exec: function () {\n                var detectedLink = this.detectLink();\n                if (!detectedLink) {\n                    return;\n                }\n                var range = this.getRange();\n                var linkMarker = new kendo.ui.editor.Marker();\n                var linkRange = range.cloneRange();\n                linkRange.setStart(detectedLink.start.node, detectedLink.start.offset);\n                linkRange.setEnd(detectedLink.end.node, detectedLink.end.offset);\n                range = this.lockRange();\n                linkMarker.add(linkRange);\n                this.formatter.apply(linkRange, { href: this._ensureWebProtocol(detectedLink.text) });\n                linkMarker.remove(linkRange);\n                this.releaseRange(range);\n            },\n            detectLink: function () {\n                var range = this.getRange();\n                var traverser = new LeftDomTextTraverser({\n                    node: range.startContainer,\n                    offset: range.startOffset,\n                    cancelAtNode: function (node) {\n                        return node && dom.name(node) === 'a';\n                    }\n                });\n                var detection = new DomTextLinkDetection(traverser);\n                return detection.detectLink();\n            },\n            changesContent: function () {\n                return !!this.detectLink();\n            },\n            _ensureWebProtocol: function (linkText) {\n                var hasProtocol = this._hasProtocolPrefix(linkText);\n                return hasProtocol ? linkText : this._prefixWithWebProtocol(linkText);\n            },\n            _hasProtocolPrefix: function (linkText) {\n                return protocolRegExp.test(linkText);\n            },\n            _prefixWithWebProtocol: function (linkText) {\n                return HTTP_PROTOCOL + linkText;\n            }\n        });\n        var UnlinkTool = Tool.extend({\n            init: function (options) {\n                this.options = options;\n                this.finder = new InlineFormatFinder([{ tags: ['a'] }]);\n                Tool.fn.init.call(this, $.extend(options, { command: UnlinkCommand }));\n            },\n            initialize: function (ui, options) {\n                Tool.fn.initialize.call(this, ui, options);\n                ui.addClass('k-state-disabled');\n            },\n            update: function (ui, nodes) {\n                ui.toggleClass('k-state-disabled', !this.finder.isFormatted(nodes)).removeClass('k-state-hover');\n            }\n        });\n        var DomTextLinkDetection = Class.extend({\n            init: function (traverser) {\n                this.traverser = traverser;\n                this.start = DomPos();\n                this.end = DomPos();\n                this.text = '';\n            },\n            detectLink: function () {\n                var node = this.traverser.node;\n                var offset = this.traverser.offset;\n                if (dom.isDataNode(node)) {\n                    var text = node.data.substring(0, offset);\n                    if (/\\s{2}$/.test(dom.stripBom(text))) {\n                        return;\n                    }\n                } else if (offset === 0) {\n                    var p = dom.closestEditableOfType(node, dom.blockElements);\n                    if (p && p.previousSibling) {\n                        this.traverser.init({ node: p.previousSibling });\n                    }\n                }\n                this.traverser.traverse($.proxy(this._detectEnd, this));\n                if (!this.end.blank()) {\n                    this.traverser = this.traverser.clone(this.end);\n                    this.traverser.traverse($.proxy(this._detectStart, this));\n                    if (!this._isLinkDetected()) {\n                        var puntuationOptions = this.traverser.extendOptions(this.start);\n                        var puntuationTraverser = new RightDomTextTraverser(puntuationOptions);\n                        puntuationTraverser.traverse($.proxy(this._skipStartPuntuation, this));\n                        if (!this._isLinkDetected()) {\n                            this.start = DomPos();\n                        }\n                    }\n                }\n                if (this.start.blank()) {\n                    return null;\n                } else {\n                    return {\n                        start: this.start,\n                        end: this.end,\n                        text: this.text\n                    };\n                }\n            },\n            _isLinkDetected: function () {\n                return protocolRegExp.test(this.text) || /^w{3}\\./i.test(this.text);\n            },\n            _detectEnd: function (text, node) {\n                var i = lastIndexOfRegExp(text, endLinkCharsRegExp);\n                if (i > -1) {\n                    this.end.node = node;\n                    this.end.offset = i + 1;\n                    return false;\n                }\n            },\n            _detectStart: function (text, node) {\n                var i = lastIndexOfRegExp(text, /\\s/);\n                var ii = i + 1;\n                this.text = text.substring(ii) + this.text;\n                this.start.node = node;\n                this.start.offset = ii;\n                if (i > -1) {\n                    return false;\n                }\n            },\n            _skipStartPuntuation: function (text, node, offset) {\n                var i = indexOfRegExp(text, /\\w/);\n                var ii = i;\n                if (i === -1) {\n                    ii = text.length;\n                }\n                this.text = this.text.substring(ii);\n                this.start.node = node;\n                this.start.offset = ii + (offset | 0);\n                if (i > -1) {\n                    return false;\n                }\n            }\n        });\n        function lastIndexOfRegExp(str, search) {\n            var i = str.length;\n            while (i-- && !search.test(str[i])) {\n            }\n            return i;\n        }\n        function indexOfRegExp(str, search) {\n            var r = search.exec(str);\n            return r ? r.index : -1;\n        }\n        var DomPos = function () {\n            return {\n                node: null,\n                offset: null,\n                blank: function () {\n                    return this.node === null && this.offset === null;\n                }\n            };\n        };\n        var DomTextTraverser = Class.extend({\n            init: function (options) {\n                this.node = options.node;\n                this.offset = options.offset === undefined ? dom.isDataNode(this.node) && this.node.length || 0 : options.offset;\n                this.cancelAtNode = options.cancelAtNode || this.cancelAtNode || $.noop;\n            },\n            traverse: function (callback) {\n                if (!callback) {\n                    return;\n                }\n                this.cancel = false;\n                this._traverse(callback, this.node, this.offset);\n            },\n            _traverse: function (callback, node, offset) {\n                if (!node || this.cancel) {\n                    return;\n                }\n                if (node.nodeType === 3) {\n                    var text = node.data;\n                    if (offset !== undefined) {\n                        text = this.subText(text, offset);\n                    }\n                    this.cancel = callback(text, node, offset) === false;\n                } else {\n                    var edgeNode = this.edgeNode(node);\n                    this.cancel = this.cancel || this.cancelAtNode(edgeNode);\n                    return this._traverse(callback, edgeNode);\n                }\n                var next = this.next(node);\n                if (!next) {\n                    var parent = node.parentNode;\n                    while (!next && dom.isInline(parent)) {\n                        next = this.next(parent);\n                        parent = parent.parentNode;\n                    }\n                }\n                this.cancel = this.cancel || this.cancelAtNode(next);\n                this._traverse(callback, next);\n            },\n            extendOptions: function (o) {\n                return $.extend({\n                    node: this.node,\n                    offset: this.offset,\n                    cancelAtNode: this.cancelAtNode\n                }, o || {});\n            },\n            edgeNode: function (node) {\n            },\n            next: function (node) {\n            },\n            subText: function (text, offset) {\n            }\n        });\n        var LeftDomTextTraverser = DomTextTraverser.extend({\n            subText: function (text, splitIndex) {\n                return text.substring(0, splitIndex);\n            },\n            next: function (node) {\n                return node.previousSibling;\n            },\n            edgeNode: function (node) {\n                return node.lastChild;\n            },\n            clone: function (options) {\n                var o = this.extendOptions(options);\n                return new LeftDomTextTraverser(o);\n            }\n        });\n        var RightDomTextTraverser = DomTextTraverser.extend({\n            subText: function (text, splitIndex) {\n                return text.substring(splitIndex);\n            },\n            next: function (node) {\n                return node.nextSibling;\n            },\n            edgeNode: function (node) {\n                return node.firstChild;\n            },\n            clone: function (options) {\n                var o = this.extendOptions(options);\n                return new RightDomTextTraverser(o);\n            }\n        });\n        extend(kendo.ui.editor, {\n            LinkFormatFinder: LinkFormatFinder,\n            LinkFormatter: LinkFormatter,\n            UnlinkCommand: UnlinkCommand,\n            LinkCommand: LinkCommand,\n            AutoLinkCommand: AutoLinkCommand,\n            UnlinkTool: UnlinkTool,\n            DomTextLinkDetection: DomTextLinkDetection,\n            LeftDomTextTraverser: LeftDomTextTraverser,\n            RightDomTextTraverser: RightDomTextTraverser\n        });\n        registerTool('createLink', new Tool({\n            key: 'K',\n            ctrl: true,\n            command: LinkCommand,\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Create Link'\n            })\n        }));\n        registerTool('unlink', new UnlinkTool({\n            key: 'K',\n            ctrl: true,\n            shift: true,\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Remove Link'\n            })\n        }));\n        registerTool('autoLink', new Tool({\n            key: [\n                keys.ENTER,\n                keys.SPACEBAR\n            ],\n            keyPressCommand: true,\n            command: AutoLinkCommand\n        }));\n    }(window.kendo.jQuery));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/file', [\n        'kendo.filebrowser',\n        'editor/link'\n    ], f);\n}(function () {\n    (function ($, undefined) {\n        var kendo = window.kendo, extend = $.extend, Editor = kendo.ui.editor, EditorUtils = Editor.EditorUtils, dom = Editor.Dom, registerTool = EditorUtils.registerTool, ToolTemplate = Editor.ToolTemplate, RangeUtils = Editor.RangeUtils, Command = Editor.Command, LinkFormatter = Editor.LinkFormatter, textNodes = RangeUtils.textNodes, keys = kendo.keys, KEDITORFILEURL = '#k-editor-file-url', KEDITORFILETITLE = '#k-editor-file-title';\n        var FileCommand = Command.extend({\n            init: function (options) {\n                var that = this;\n                Command.fn.init.call(that, options);\n                that.formatter = new LinkFormatter();\n                that.async = true;\n                that.attributes = {};\n            },\n            insertFile: function (file, range) {\n                var attributes = this.attributes;\n                var doc = RangeUtils.documentFromRange(range);\n                if (attributes.href && attributes.href != 'http://') {\n                    if (!file) {\n                        file = dom.create(doc, 'a', { href: attributes.href });\n                        file.innerHTML = attributes.innerHTML;\n                        range.deleteContents();\n                        range.insertNode(file);\n                        if (!file.nextSibling) {\n                            dom.insertAfter(doc.createTextNode('\\uFEFF'), file);\n                        }\n                        range.setStartAfter(file);\n                        range.setEndAfter(file);\n                        RangeUtils.selectRange(range);\n                        return true;\n                    } else {\n                        dom.attr(file, attributes);\n                    }\n                }\n                return false;\n            },\n            _dialogTemplate: function (showBrowser) {\n                return kendo.template('<div class=\"k-editor-dialog k-popup-edit-form k-edit-form-container\">' + '# if (showBrowser) { #' + '<div class=\"k-filebrowser\"></div>' + '# } #' + '<div class=\\'k-edit-label\\'>' + '<label for=\"k-editor-file-url\">#: messages.fileWebAddress #</label>' + '</div>' + '<div class=\\'k-edit-field\\'>' + '<input type=\"text\" class=\"k-input k-textbox\" id=\"k-editor-file-url\">' + '</div>' + '<div class=\\'k-edit-label\\'>' + '<label for=\"k-editor-file-title\">#: messages.fileTitle #</label>' + '</div>' + '<div class=\\'k-edit-field\\'>' + '<input type=\"text\" class=\"k-input k-textbox\" id=\"k-editor-file-title\">' + '</div>' + '<div class=\"k-edit-buttons k-state-default\">' + '<button class=\"k-dialog-insert k-button k-primary\">#: messages.dialogInsert #</button>' + '<button class=\"k-dialog-close k-button\">#: messages.dialogCancel #</button>' + '</div>' + '</div>')({\n                    messages: this.editor.options.messages,\n                    showBrowser: showBrowser\n                });\n            },\n            redo: function () {\n                var that = this, range = that.lockRange();\n                this.formatter.apply(range, this.attributes);\n                that.releaseRange(range);\n            },\n            exec: function () {\n                var that = this, range = that.lockRange(), nodes = textNodes(range), applied = false, file = nodes.length ? this.formatter.finder.findSuitable(nodes[0]) : null, dialog, options = that.editor.options, messages = options.messages, fileBrowser = options.fileBrowser, showBrowser = !!(kendo.ui.FileBrowser && fileBrowser && fileBrowser.transport && fileBrowser.transport.read !== undefined), dialogOptions = {\n                        title: messages.insertFile,\n                        visible: false,\n                        resizable: showBrowser\n                    };\n                this.expandImmutablesIn(range);\n                function apply(e) {\n                    var element = dialog.element, href = element.find(KEDITORFILEURL).val().replace(/ /g, '%20'), innerHTML = element.find(KEDITORFILETITLE).val();\n                    that.attributes = {\n                        href: href,\n                        innerHTML: innerHTML !== '' ? innerHTML : href\n                    };\n                    applied = that.insertFile(file, range);\n                    close(e);\n                    if (that.change) {\n                        that.change();\n                    }\n                }\n                function close(e) {\n                    e.preventDefault();\n                    dialog.destroy();\n                    dom.windowFromDocument(RangeUtils.documentFromRange(range)).focus();\n                    if (!applied) {\n                        that.releaseRange(range);\n                    }\n                }\n                function keyDown(e) {\n                    if (e.keyCode == keys.ENTER) {\n                        apply(e);\n                    } else if (e.keyCode == keys.ESC) {\n                        close(e);\n                    }\n                }\n                dialogOptions.close = close;\n                if (showBrowser) {\n                    dialogOptions.width = 750;\n                }\n                dialog = this.createDialog(that._dialogTemplate(showBrowser), dialogOptions).toggleClass('k-filebrowser-dialog', showBrowser).find('.k-dialog-insert').click(apply).end().find('.k-dialog-close').click(close).end().find('.k-edit-field input').keydown(keyDown).end().find(KEDITORFILEURL).val(file ? file.getAttribute('href', 2) : 'http://').end().find(KEDITORFILETITLE).val(file ? file.title : '').end().data('kendoWindow');\n                if (showBrowser) {\n                    that._fileBrowser = new kendo.ui.FileBrowser(dialog.element.find('.k-filebrowser'), extend({}, fileBrowser));\n                    that._fileBrowser.bind('change', function (ev) {\n                        if (ev.selected.get('type') === 'f') {\n                            dialog.element.find(KEDITORFILEURL).val(this.value());\n                        }\n                    });\n                    that._fileBrowser.bind('apply', apply);\n                }\n                dialog.center().open();\n                dialog.element.find(KEDITORFILEURL).focus().select();\n            }\n        });\n        kendo.ui.editor.FileCommand = FileCommand;\n        registerTool('insertFile', new Editor.Tool({\n            command: FileCommand,\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Insert File'\n            })\n        }));\n    }(window.kendo.jQuery));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/image', [\n        'kendo.imagebrowser',\n        'editor/link'\n    ], f);\n}(function () {\n    (function ($, undefined) {\n        var kendo = window.kendo, extend = $.extend, Editor = kendo.ui.editor, EditorUtils = Editor.EditorUtils, dom = Editor.Dom, registerTool = EditorUtils.registerTool, ToolTemplate = Editor.ToolTemplate, RangeUtils = Editor.RangeUtils, Command = Editor.Command, keys = kendo.keys, KEDITORIMAGEURL = '#k-editor-image-url', KEDITORIMAGETITLE = '#k-editor-image-title', KEDITORIMAGEWIDTH = '#k-editor-image-width', KEDITORIMAGEHEIGHT = '#k-editor-image-height';\n        var ImageCommand = Command.extend({\n            init: function (options) {\n                var that = this;\n                Command.fn.init.call(that, options);\n                that.async = true;\n                that.attributes = {};\n            },\n            insertImage: function (img, range) {\n                var attributes = this.attributes;\n                var doc = RangeUtils.documentFromRange(range);\n                if (attributes.src && attributes.src != 'http://') {\n                    var removeIEAttributes = function () {\n                        setTimeout(function () {\n                            if (!attributes.width) {\n                                img.removeAttribute('width');\n                            }\n                            if (!attributes.height) {\n                                img.removeAttribute('height');\n                            }\n                            img.removeAttribute('complete');\n                        });\n                    };\n                    if (!img) {\n                        img = dom.create(doc, 'img', attributes);\n                        img.onload = img.onerror = removeIEAttributes;\n                        range.deleteContents();\n                        range.insertNode(img);\n                        if (!img.nextSibling) {\n                            dom.insertAfter(doc.createTextNode('\\uFEFF'), img);\n                        }\n                        removeIEAttributes();\n                        range.setStartAfter(img);\n                        range.setEndAfter(img);\n                        RangeUtils.selectRange(range);\n                        return true;\n                    } else {\n                        img.onload = img.onerror = removeIEAttributes;\n                        dom.attr(img, attributes);\n                        removeIEAttributes();\n                    }\n                }\n                return false;\n            },\n            _dialogTemplate: function (showBrowser) {\n                return kendo.template('<div class=\"k-editor-dialog k-popup-edit-form k-edit-form-container\">' + '# if (showBrowser) { #' + '<div class=\"k-filebrowser k-imagebrowser\"></div>' + '# } #' + '<div class=\\'k-edit-label\\'>' + '<label for=\"k-editor-image-url\">#: messages.imageWebAddress #</label>' + '</div>' + '<div class=\\'k-edit-field\\'>' + '<input type=\"text\" class=\"k-input k-textbox\" id=\"k-editor-image-url\">' + '</div>' + '<div class=\\'k-edit-label\\'>' + '<label for=\"k-editor-image-title\">#: messages.imageAltText #</label>' + '</div>' + '<div class=\\'k-edit-field\\'>' + '<input type=\"text\" class=\"k-input k-textbox\" id=\"k-editor-image-title\">' + '</div>' + '<div class=\\'k-edit-label\\'>' + '<label for=\"k-editor-image-width\">#: messages.imageWidth #</label>' + '</div>' + '<div class=\\'k-edit-field\\'>' + '<input type=\"text\" class=\"k-input k-textbox\" id=\"k-editor-image-width\">' + '</div>' + '<div class=\\'k-edit-label\\'>' + '<label for=\"k-editor-image-height\">#: messages.imageHeight #</label>' + '</div>' + '<div class=\\'k-edit-field\\'>' + '<input type=\"text\" class=\"k-input k-textbox\" id=\"k-editor-image-height\">' + '</div>' + '<div class=\"k-edit-buttons k-state-default\">' + '<button class=\"k-dialog-insert k-button k-primary\">#: messages.dialogInsert #</button>' + '<button class=\"k-dialog-close k-button\">#: messages.dialogCancel #</button>' + '</div>' + '</div>')({\n                    messages: this.editor.options.messages,\n                    showBrowser: showBrowser\n                });\n            },\n            redo: function () {\n                var that = this, range = that.lockRange();\n                if (!that.insertImage(RangeUtils.image(range), range)) {\n                    that.releaseRange(range);\n                }\n            },\n            exec: function () {\n                var that = this, range = that.lockRange(), applied = false, img = RangeUtils.image(range), imageWidth = img && img.getAttribute('width') || '', imageHeight = img && img.getAttribute('height') || '', dialog, options = that.editor.options, messages = options.messages, imageBrowser = options.imageBrowser, showBrowser = !!(kendo.ui.ImageBrowser && imageBrowser && imageBrowser.transport && imageBrowser.transport.read !== undefined), dialogOptions = {\n                        title: messages.insertImage,\n                        visible: false,\n                        resizable: showBrowser\n                    };\n                this.expandImmutablesIn(range);\n                function apply(e) {\n                    var element = dialog.element, w = parseInt(element.find(KEDITORIMAGEWIDTH).val(), 10), h = parseInt(element.find(KEDITORIMAGEHEIGHT).val(), 10);\n                    that.attributes = {\n                        src: element.find(KEDITORIMAGEURL).val().replace(/ /g, '%20'),\n                        alt: element.find(KEDITORIMAGETITLE).val()\n                    };\n                    that.attributes.width = null;\n                    that.attributes.height = null;\n                    if (!isNaN(w) && w > 0) {\n                        that.attributes.width = w;\n                    }\n                    if (!isNaN(h) && h > 0) {\n                        that.attributes.height = h;\n                    }\n                    applied = that.insertImage(img, range);\n                    close(e);\n                    if (that.change) {\n                        that.change();\n                    }\n                }\n                function close(e) {\n                    e.preventDefault();\n                    dialog.destroy();\n                    dom.windowFromDocument(RangeUtils.documentFromRange(range)).focus();\n                    if (!applied) {\n                        that.releaseRange(range);\n                    }\n                }\n                function keyDown(e) {\n                    if (e.keyCode == keys.ENTER) {\n                        apply(e);\n                    } else if (e.keyCode == keys.ESC) {\n                        close(e);\n                    }\n                }\n                dialogOptions.close = close;\n                if (showBrowser) {\n                    dialogOptions.width = 750;\n                }\n                dialog = this.createDialog(that._dialogTemplate(showBrowser), dialogOptions).toggleClass('k-filebrowser-dialog', showBrowser).find('.k-dialog-insert').click(apply).end().find('.k-dialog-close').click(close).end().find('.k-edit-field input').keydown(keyDown).end().find(KEDITORIMAGEURL).val(img ? img.getAttribute('src', 2) : 'http://').end().find(KEDITORIMAGETITLE).val(img ? img.alt : '').end().find(KEDITORIMAGEWIDTH).val(imageWidth).end().find(KEDITORIMAGEHEIGHT).val(imageHeight).end().data('kendoWindow');\n                if (showBrowser) {\n                    this._imageBrowser = new kendo.ui.ImageBrowser(dialog.element.find('.k-imagebrowser'), extend({}, imageBrowser));\n                    this._imageBrowser.bind('change', function (ev) {\n                        if (ev.selected.get('type') === 'f') {\n                            dialog.element.find(KEDITORIMAGEURL).val(this.value());\n                        }\n                    });\n                    this._imageBrowser.bind('apply', apply);\n                }\n                dialog.center().open();\n                dialog.element.find(KEDITORIMAGEURL).focus().select();\n            }\n        });\n        kendo.ui.editor.ImageCommand = ImageCommand;\n        registerTool('insertImage', new Editor.Tool({\n            command: ImageCommand,\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Insert Image'\n            })\n        }));\n    }(window.kendo.jQuery));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/components', ['editor/image'], f);\n}(function () {\n    (function ($, undefined) {\n        var kendo = window.kendo, DropDownList = kendo.ui.DropDownList, dom = kendo.ui.editor.Dom;\n        var SelectBox = DropDownList.extend({\n            init: function (element, options) {\n                var that = this;\n                DropDownList.fn.init.call(that, element, options);\n                if (kendo.support.mobileOS.ios) {\n                    this._initSelectOverlay();\n                    this.bind('dataBound', $.proxy(this._initSelectOverlay, this));\n                }\n                that.text(that.options.title);\n                that.bind('open', function () {\n                    if (that.options.autoSize) {\n                        var list = that.list, listWidth;\n                        list.css({\n                            whiteSpace: 'nowrap',\n                            width: 'auto'\n                        });\n                        listWidth = list.width();\n                        if (listWidth) {\n                            listWidth += 20;\n                        } else {\n                            listWidth = that._listWidth;\n                        }\n                        list.css('width', listWidth + kendo.support.scrollbar());\n                        that._listWidth = listWidth;\n                    }\n                });\n            },\n            options: {\n                name: 'SelectBox',\n                index: -1\n            },\n            _initSelectOverlay: function () {\n                var selectBox = this;\n                var value = selectBox.value();\n                var view = this.dataSource.view();\n                var item;\n                var html = '';\n                var encode = kendo.htmlEncode;\n                for (var i = 0; i < view.length; i++) {\n                    item = view[i];\n                    html += '<option value=\\'' + encode(item.value) + '\\'';\n                    if (item.value == value) {\n                        html += ' selected';\n                    }\n                    html += '>' + encode(item.text) + '</option>';\n                }\n                var select = $('<select class=\\'k-select-overlay\\'>' + html + '</select>');\n                var wrapper = $(this.element).closest('.k-widget');\n                wrapper.next('.k-select-overlay').remove();\n                select.insertAfter(wrapper);\n                select.on('change', function () {\n                    selectBox.value(this.value);\n                    selectBox.trigger('change');\n                });\n            },\n            value: function (value) {\n                var that = this, result = DropDownList.fn.value.call(that, value);\n                if (value === undefined) {\n                    return result;\n                }\n                if (!DropDownList.fn.value.call(that)) {\n                    that.text(that.options.title);\n                }\n            },\n            decorate: function (body) {\n                var that = this, dataSource = that.dataSource, items = dataSource.data(), i, tag, className, style;\n                if (body) {\n                    that.list.css('background-color', dom.getEffectiveBackground($(body)));\n                }\n                for (i = 0; i < items.length; i++) {\n                    tag = items[i].tag || 'span';\n                    className = items[i].className;\n                    style = dom.inlineStyle(body, tag, { className: className });\n                    style = style.replace(/\"/g, '\\'');\n                    items[i].style = style + ';display:inline-block';\n                }\n                dataSource.trigger('change');\n            }\n        });\n        kendo.ui.plugin(SelectBox);\n        kendo.ui.editor.SelectBox = SelectBox;\n    }(window.kendo.jQuery));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/indent', ['editor/components'], f);\n}(function () {\n    (function ($, undefined) {\n        var kendo = window.kendo, Class = kendo.Class, extend = $.extend, Editor = kendo.ui.editor, dom = Editor.Dom, EditorUtils = Editor.EditorUtils, registerTool = EditorUtils.registerTool, Command = Editor.Command, Tool = Editor.Tool, ToolTemplate = Editor.ToolTemplate, RangeUtils = Editor.RangeUtils, blockElements = dom.blockElements, BlockFormatFinder = Editor.BlockFormatFinder, BlockFormatter = Editor.BlockFormatter;\n        function indent(node, value) {\n            var isRtl = $(node).css('direction') == 'rtl', indentDirection = isRtl ? 'Right' : 'Left', property = dom.name(node) != 'td' ? 'margin' + indentDirection : 'padding' + indentDirection;\n            if (value === undefined) {\n                return node.style[property] || 0;\n            } else {\n                if (value > 0) {\n                    node.style[property] = value + 'px';\n                } else {\n                    node.style[property] = '';\n                    if (!node.style.cssText) {\n                        node.removeAttribute('style');\n                    }\n                }\n            }\n        }\n        var IndentFormatter = Class.extend({\n            init: function () {\n                this.finder = new BlockFormatFinder([{ tags: dom.blockElements }]);\n            },\n            apply: function (nodes) {\n                nodes = dom.filterBy(nodes, dom.htmlIndentSpace, true);\n                var formatNodes = this.finder.findSuitable(nodes), targets = [], i, len, formatNode, parentList, sibling;\n                formatNodes = this.mapImmutables(formatNodes);\n                if (formatNodes.length) {\n                    for (i = 0, len = formatNodes.length; i < len; i++) {\n                        if (dom.is(formatNodes[i], 'li')) {\n                            if (!$(formatNodes[i]).index()) {\n                                targets.push(formatNodes[i].parentNode);\n                            } else if ($.inArray(formatNodes[i].parentNode, targets) < 0) {\n                                targets.push(formatNodes[i]);\n                            }\n                        } else {\n                            targets.push(formatNodes[i]);\n                        }\n                    }\n                    while (targets.length) {\n                        formatNode = targets.shift();\n                        if (dom.is(formatNode, 'li')) {\n                            parentList = formatNode.parentNode;\n                            sibling = $(formatNode).prev('li');\n                            var siblingList = sibling.find('ul,ol').last();\n                            var nestedList = $(formatNode).children('ul,ol')[0];\n                            if (nestedList && sibling[0]) {\n                                if (siblingList[0]) {\n                                    siblingList.append(formatNode);\n                                    siblingList.append($(nestedList).children());\n                                    dom.remove(nestedList);\n                                } else {\n                                    sibling.append(nestedList);\n                                    nestedList.insertBefore(formatNode, nestedList.firstChild);\n                                }\n                            } else {\n                                nestedList = sibling.children('ul,ol')[0];\n                                if (!nestedList) {\n                                    nestedList = dom.create(formatNode.ownerDocument, dom.name(parentList));\n                                    sibling.append(nestedList);\n                                }\n                                while (formatNode && formatNode.parentNode == parentList) {\n                                    nestedList.appendChild(formatNode);\n                                    formatNode = targets.shift();\n                                }\n                            }\n                        } else {\n                            var marginLeft = parseInt(indent(formatNode), 10) + 30;\n                            indent(formatNode, marginLeft);\n                            for (var targetIndex = 0; targetIndex < targets.length; targetIndex++) {\n                                if ($.contains(formatNode, targets[targetIndex])) {\n                                    targets.splice(targetIndex, 1);\n                                }\n                            }\n                        }\n                    }\n                } else {\n                    var formatter = new BlockFormatter([{ tags: ['p'] }], { style: { marginLeft: 30 } });\n                    formatter.apply(nodes);\n                }\n            },\n            mapImmutables: function (nodes) {\n                if (!this.immutables) {\n                    return nodes;\n                } else {\n                    var immutables = [];\n                    return $.map(nodes, function (node) {\n                        var immutable = Editor.Immutables.immutableParent(node);\n                        if (immutable) {\n                            if ($.inArray(immutable, immutables) === -1) {\n                                immutables.push(immutable);\n                            } else {\n                                return null;\n                            }\n                        }\n                        return immutable || node;\n                    });\n                }\n            },\n            remove: function (nodes) {\n                nodes = dom.filterBy(nodes, dom.htmlIndentSpace, true);\n                var formatNodes = this.finder.findSuitable(nodes), targetNode, i, len, list, listParent, siblings, formatNode, marginLeft;\n                formatNodes = this.mapImmutables(formatNodes);\n                for (i = 0, len = formatNodes.length; i < len; i++) {\n                    formatNode = $(formatNodes[i]);\n                    if (formatNode.is('li')) {\n                        list = formatNode.parent();\n                        listParent = list.parent();\n                        if (listParent.is('li,ul,ol') && !indent(list[0])) {\n                            if (targetNode && $.contains(targetNode, listParent[0])) {\n                                continue;\n                            }\n                            siblings = formatNode.nextAll('li');\n                            if (siblings.length) {\n                                $(list[0].cloneNode(false)).appendTo(formatNode).append(siblings);\n                            }\n                            if (listParent.is('li')) {\n                                formatNode.insertAfter(listParent);\n                            } else {\n                                formatNode.appendTo(listParent);\n                            }\n                            if (!list.children('li').length) {\n                                list.remove();\n                            }\n                            continue;\n                        } else {\n                            if (targetNode == list[0]) {\n                                continue;\n                            }\n                            targetNode = list[0];\n                        }\n                    } else {\n                        targetNode = formatNodes[i];\n                    }\n                    marginLeft = parseInt(indent(targetNode), 10) - 30;\n                    indent(targetNode, marginLeft);\n                }\n            }\n        });\n        var IndentCommand = Command.extend({\n            init: function (options) {\n                var that = this;\n                options.formatter = {\n                    toggle: $.proxy(function (range) {\n                        var indentFormatter = new IndentFormatter();\n                        indentFormatter.immutables = this.editor && this.editor.options.immutables;\n                        indentFormatter.apply(RangeUtils.nodes(range));\n                    }, that)\n                };\n                Command.fn.init.call(this, options);\n            }\n        });\n        var OutdentCommand = Command.extend({\n            init: function (options) {\n                var that = this;\n                options.formatter = {\n                    toggle: $.proxy(function (range) {\n                        var indentFormatter = new IndentFormatter();\n                        indentFormatter.immutables = this.editor && this.editor.options.immutables;\n                        indentFormatter.remove(RangeUtils.nodes(range));\n                    }, that)\n                };\n                Command.fn.init.call(this, options);\n            }\n        });\n        var OutdentTool = Tool.extend({\n            init: function (options) {\n                Tool.fn.init.call(this, options);\n                this.finder = new BlockFormatFinder([{ tags: blockElements }]);\n            },\n            initialize: function (ui, options) {\n                Tool.fn.initialize.call(this, ui, options);\n                $.extend(this.options, { immutables: options.editor && options.editor.options.immutables });\n                ui.addClass('k-state-disabled');\n            },\n            update: function (ui, nodes) {\n                var suitableNodes = this.finder.findSuitable(nodes), isOutdentable, listParentsCount, i, len, suitable, immutableParent;\n                for (i = 0, len = suitableNodes.length; i < len; i++) {\n                    suitable = suitableNodes[i];\n                    if (this.options.immutables) {\n                        immutableParent = Editor.Immutables.immutableParent(suitable);\n                        if (immutableParent) {\n                            suitable = immutableParent;\n                        }\n                    }\n                    isOutdentable = indent(suitable);\n                    if (!isOutdentable) {\n                        listParentsCount = $(suitable).parents('ul,ol').length;\n                        isOutdentable = dom.is(suitable, 'li') && (listParentsCount > 1 || indent(suitable.parentNode)) || dom.ofType(suitable, [\n                            'ul',\n                            'ol'\n                        ]) && listParentsCount > 0;\n                    }\n                    if (isOutdentable) {\n                        ui.removeClass('k-state-disabled');\n                        return;\n                    }\n                }\n                ui.addClass('k-state-disabled').removeClass('k-state-hover');\n            }\n        });\n        extend(Editor, {\n            IndentFormatter: IndentFormatter,\n            IndentCommand: IndentCommand,\n            OutdentCommand: OutdentCommand,\n            OutdentTool: OutdentTool\n        });\n        registerTool('indent', new Tool({\n            command: IndentCommand,\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Indent'\n            })\n        }));\n        registerTool('outdent', new OutdentTool({\n            command: OutdentCommand,\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Outdent'\n            })\n        }));\n    }(window.kendo.jQuery));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/viewhtml', ['editor/indent'], f);\n}(function () {\n    (function ($, undefined) {\n        var kendo = window.kendo, extend = $.extend, Editor = kendo.ui.editor, EditorUtils = Editor.EditorUtils, Command = Editor.Command, Tool = Editor.Tool, ToolTemplate = Editor.ToolTemplate;\n        var ViewHtmlCommand = Command.extend({\n            init: function (options) {\n                var cmd = this;\n                cmd.options = options;\n                Command.fn.init.call(cmd, options);\n                cmd.attributes = null;\n                cmd.async = true;\n            },\n            exec: function () {\n                var that = this, editor = that.editor, options = editor.options, messages = editor.options.messages, dialog = $(kendo.template(ViewHtmlCommand.template)(messages)).appendTo(document.body), textarea = '.k-editor-textarea', content;\n                options.serialization.immutables = editor.immutables;\n                content = ViewHtmlCommand.indent(editor.value());\n                options.serialization.immutables = undefined;\n                function apply(e) {\n                    options.deserialization.immutables = editor.immutables;\n                    editor.value(dialog.find(textarea).val());\n                    options.deserialization.immutables = undefined;\n                    close(e);\n                    if (that.change) {\n                        that.change();\n                    }\n                    editor.trigger('change');\n                }\n                function close(e) {\n                    e.preventDefault();\n                    dialog.data('kendoWindow').destroy();\n                    if (editor.immutables) {\n                        editor.immutables.serializedImmutables = {};\n                    }\n                    editor.focus();\n                }\n                this.createDialog(dialog, {\n                    title: messages.viewHtml,\n                    close: close,\n                    visible: false\n                }).find(textarea).val(content).end().find('.k-dialog-update').click(apply).end().find('.k-dialog-close').click(close).end().data('kendoWindow').center().open();\n                dialog.find(textarea).focus();\n            }\n        });\n        extend(ViewHtmlCommand, {\n            template: '<div class=\\'k-editor-dialog k-popup-edit-form k-edit-form-container k-viewhtml-dialog\\'>' + '<textarea class=\\'k-editor-textarea k-input\\'></textarea>' + '<div class=\\'k-edit-buttons k-state-default\\'>' + '<button class=\\'k-dialog-update k-button k-primary\\'>#: dialogUpdate #</button>' + '<button class=\\'k-dialog-close k-button\\'>#: dialogCancel #</button>' + '</div>' + '</div>',\n            indent: function (content) {\n                return content.replace(/<\\/(p|li|ul|ol|h[1-6]|table|tr|td|th)>/gi, '</$1>\\n').replace(/<(ul|ol)([^>]*)><li/gi, '<$1$2>\\n<li').replace(/<br \\/>/gi, '<br />\\n').replace(/\\n$/, '');\n            }\n        });\n        kendo.ui.editor.ViewHtmlCommand = ViewHtmlCommand;\n        Editor.EditorUtils.registerTool('viewHtml', new Tool({\n            command: ViewHtmlCommand,\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'View HTML'\n            })\n        }));\n    }(window.kendo.jQuery));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/formatting', ['editor/viewhtml'], f);\n}(function () {\n    (function ($) {\n        var kendo = window.kendo, Editor = kendo.ui.editor, Tool = Editor.Tool, ToolTemplate = Editor.ToolTemplate, DelayedExecutionTool = Editor.DelayedExecutionTool, Command = Editor.Command, dom = Editor.Dom, EditorUtils = Editor.EditorUtils, RangeUtils = Editor.RangeUtils, registerTool = EditorUtils.registerTool;\n        var FormattingTool = DelayedExecutionTool.extend({\n            init: function (options) {\n                var that = this;\n                Tool.fn.init.call(that, kendo.deepExtend({}, that.options, options));\n                that.type = 'kendoSelectBox';\n                that.finder = {\n                    getFormat: function () {\n                        return '';\n                    }\n                };\n            },\n            options: {\n                items: [\n                    {\n                        text: 'Paragraph',\n                        value: 'p'\n                    },\n                    {\n                        text: 'Quotation',\n                        value: 'blockquote'\n                    },\n                    {\n                        text: 'Heading 1',\n                        value: 'h1'\n                    },\n                    {\n                        text: 'Heading 2',\n                        value: 'h2'\n                    },\n                    {\n                        text: 'Heading 3',\n                        value: 'h3'\n                    },\n                    {\n                        text: 'Heading 4',\n                        value: 'h4'\n                    },\n                    {\n                        text: 'Heading 5',\n                        value: 'h5'\n                    },\n                    {\n                        text: 'Heading 6',\n                        value: 'h6'\n                    }\n                ],\n                width: 110\n            },\n            toFormattingItem: function (item) {\n                var value = item.value;\n                if (!value) {\n                    return item;\n                }\n                if (item.tag || item.className) {\n                    return item;\n                }\n                var dot = value.indexOf('.');\n                if (dot === 0) {\n                    item.className = value.substring(1);\n                } else if (dot == -1) {\n                    item.tag = value;\n                } else {\n                    item.tag = value.substring(0, dot);\n                    item.className = value.substring(dot + 1);\n                }\n                return item;\n            },\n            command: function (args) {\n                var that = this;\n                var item = args.value;\n                item = this.toFormattingItem(item);\n                return new Editor.FormatCommand({\n                    range: args.range,\n                    formatter: function () {\n                        var formatter, tags = (item.tag || item.context || 'span').split(','), format = [{\n                                    tags: tags,\n                                    attr: { className: item.className || '' }\n                                }];\n                        if ($.inArray(tags[0], dom.inlineElements) >= 0) {\n                            formatter = new Editor.GreedyInlineFormatter(format);\n                        } else {\n                            formatter = new Editor.GreedyBlockFormatter(format);\n                        }\n                        formatter.editor = that.editor;\n                        return formatter;\n                    }\n                });\n            },\n            initialize: function (ui, initOptions) {\n                var editor = initOptions.editor;\n                var options = this.options;\n                var toolName = options.name;\n                var that = this;\n                that.editor = editor;\n                ui.width(options.width);\n                ui.kendoSelectBox({\n                    dataTextField: 'text',\n                    dataValueField: 'value',\n                    dataSource: options.items || editor.options[toolName],\n                    title: editor.options.messages[toolName],\n                    autoSize: true,\n                    change: function () {\n                        var dataItem = this.dataItem();\n                        if (dataItem) {\n                            Tool.exec(editor, toolName, dataItem.toJSON());\n                        }\n                    },\n                    dataBound: function () {\n                        var i, items = this.dataSource.data();\n                        for (i = 0; i < items.length; i++) {\n                            items[i] = that.toFormattingItem(items[i]);\n                        }\n                    },\n                    highlightFirst: false,\n                    template: kendo.template('<span unselectable=\"on\" style=\"display:block;#=(data.style||\"\")#\">#:data.text#</span>')\n                });\n                ui.addClass('k-decorated').closest('.k-widget').removeClass('k-' + toolName).find('*').addBack().attr('unselectable', 'on');\n            },\n            getFormattingValue: function (items, nodes) {\n                for (var i = 0; i < items.length; i++) {\n                    var item = items[i];\n                    var tag = item.tag || item.context || '';\n                    var className = item.className ? '.' + item.className : '';\n                    var selector = tag + className;\n                    var element = $(nodes[0]).closest(selector)[0];\n                    if (!element) {\n                        continue;\n                    }\n                    if (nodes.length == 1) {\n                        return item.value;\n                    }\n                    for (var n = 1; n < nodes.length; n++) {\n                        if (!$(nodes[n]).closest(selector)[0]) {\n                            break;\n                        } else if (n == nodes.length - 1) {\n                            return item.value;\n                        }\n                    }\n                }\n                return '';\n            },\n            update: function (ui, nodes) {\n                var selectBox = $(ui).data(this.type);\n                if (!selectBox) {\n                    return;\n                }\n                var dataSource = selectBox.dataSource, items = dataSource.data(), i, context, ancestor = dom.commonAncestor.apply(null, nodes);\n                if (ancestor != dom.closestEditable(ancestor) && this._ancestor == ancestor) {\n                    return;\n                } else {\n                    this._ancestor = ancestor;\n                }\n                for (i = 0; i < items.length; i++) {\n                    context = items[i].context;\n                    items[i].visible = !context || !!$(ancestor).closest(context).length;\n                }\n                dataSource.filter([{\n                        field: 'visible',\n                        operator: 'eq',\n                        value: true\n                    }]);\n                DelayedExecutionTool.fn.update.call(this, ui, nodes);\n                selectBox.value(this.getFormattingValue(dataSource.view(), nodes));\n                selectBox.wrapper.toggleClass('k-state-disabled', !dataSource.view().length);\n            },\n            destroy: function () {\n                this._ancestor = null;\n            }\n        });\n        var CleanFormatCommand = Command.extend({\n            exec: function () {\n                var range = this.lockRange(true);\n                this.tagsToClean = this.options.remove || 'strong,em,span,sup,sub,del,b,i,u,font'.split(',');\n                RangeUtils.wrapSelectedElements(range);\n                var nodes = RangeUtils.mapAll(range, function (node) {\n                    return node;\n                });\n                for (var c = nodes.length - 1; c >= 0; c--) {\n                    var node = nodes[c];\n                    if (!this.immutableParent(node)) {\n                        this.clean(node);\n                    }\n                }\n                this.releaseRange(range);\n            },\n            clean: function (node) {\n                if (!node || dom.isMarker(node)) {\n                    return;\n                }\n                var name = dom.name(node);\n                if (name == 'ul' || name == 'ol') {\n                    var listFormatter = new Editor.ListFormatter(name);\n                    var prev = node.previousSibling;\n                    var next = node.nextSibling;\n                    listFormatter.unwrap(node);\n                    for (; prev && prev != next; prev = prev.nextSibling) {\n                        this.clean(prev);\n                    }\n                } else if (name == 'blockquote') {\n                    dom.changeTag(node, 'p');\n                } else if (node.nodeType == 1 && !dom.insignificant(node)) {\n                    for (var i = node.childNodes.length - 1; i >= 0; i--) {\n                        this.clean(node.childNodes[i]);\n                    }\n                    node.removeAttribute('style');\n                    node.removeAttribute('class');\n                } else {\n                    unwrapListItem(node);\n                }\n                if ($.inArray(name, this.tagsToClean) > -1) {\n                    dom.unwrap(node);\n                }\n            },\n            immutableParent: function (node) {\n                return this.immutables() && Editor.Immutables.immutableParent(node);\n            }\n        });\n        function unwrapListItem(node) {\n            var li = dom.closestEditableOfType(node, ['li']);\n            if (li) {\n                var listFormatter = new Editor.ListFormatter(dom.name(li.parentNode));\n                var range = kendo.ui.editor.W3CRange.fromNode(node);\n                range.selectNode(li);\n                listFormatter.toggle(range);\n            }\n        }\n        $.extend(Editor, {\n            FormattingTool: FormattingTool,\n            CleanFormatCommand: CleanFormatCommand\n        });\n        registerTool('formatting', new FormattingTool({\n            template: new ToolTemplate({\n                template: EditorUtils.dropDownListTemplate,\n                title: 'Format'\n            })\n        }));\n        registerTool('cleanFormatting', new Tool({\n            command: CleanFormatCommand,\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Clean formatting'\n            })\n        }));\n    }(window.kendo.jQuery));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/toolbar', ['editor/formatting'], f);\n}(function () {\n    (function ($, undefined) {\n        var kendo = window.kendo;\n        var ui = kendo.ui;\n        var editorNS = ui.editor;\n        var Widget = ui.Widget;\n        var extend = $.extend;\n        var proxy = $.proxy;\n        var keys = kendo.keys;\n        var NS = '.kendoEditor';\n        var EditorUtils = kendo.ui.editor.EditorUtils;\n        var ToolTemplate = kendo.ui.editor.ToolTemplate;\n        var Tool = kendo.ui.editor.Tool;\n        var outerWidth = kendo._outerWidth;\n        var outerHeight = kendo._outerHeight;\n        var OVERFLOWANCHOR = 'overflowAnchor';\n        var focusable = '.k-tool-group:visible a.k-tool:not(.k-state-disabled),' + '.k-tool.k-overflow-anchor,' + '.k-tool-group:visible .k-widget.k-colorpicker,' + '.k-tool-group:visible .k-selectbox,' + '.k-tool-group:visible .k-dropdown,' + '.k-tool-group:visible .k-combobox .k-input';\n        var toolNamesByCssClass = {\n            'k-i-sup-script': 'superscript',\n            'k-i-sub-script': 'subscript',\n            'k-i-align-left': 'justifyLeft',\n            'k-i-align-center': 'justifyCenter',\n            'k-i-align-right': 'justifyRight',\n            'k-i-align-justify': 'justifyFull',\n            'k-i-list-unordered': 'insertUnorderedList',\n            'k-i-list-ordered': 'insertOrderedList',\n            'k-i-login': 'import',\n            'k-i-indent-increase': 'indent',\n            'k-i-indent-decrease': 'outdent',\n            'k-i-link-horizontal': 'createLink',\n            'k-i-unlink-horizontal': 'unlink',\n            'k-i-image': 'insertImage',\n            'k-i-file-add': 'insertFile',\n            'k-i-html': 'viewHtml',\n            'k-i-foreground-color': 'foreColor',\n            'k-i-paint': 'backColor',\n            'k-i-table': 'createTable',\n            'k-i-table-column-insert-left': 'addColumnLeft',\n            'k-i-table-column-insert-right': 'addColumnRight',\n            'k-i-table-row-insert-above': 'addRowAbove',\n            'k-i-table-row-insert-below': 'addRowBelow',\n            'k-i-table-row-delete': 'deleteRow',\n            'k-i-table-column-delete': 'deleteColumn',\n            'k-i-table-properties': 'tableWizard',\n            'k-i-table-wizard': 'tableWizardInsert',\n            'k-i-clear-css': 'cleanFormatting'\n        };\n        var OverflowAnchorTool = Tool.extend({\n            initialize: function (ui, options) {\n                ui.attr({ unselectable: 'on' });\n                var toolbar = options.editor.toolbar;\n                ui.on('click', $.proxy(function () {\n                    this.overflowPopup.toggle();\n                }, toolbar));\n            },\n            options: { name: OVERFLOWANCHOR },\n            command: $.noop,\n            update: $.noop,\n            destroy: $.noop\n        });\n        EditorUtils.registerTool(OVERFLOWANCHOR, new OverflowAnchorTool({\n            key: '',\n            ctrl: true,\n            template: new ToolTemplate({ template: EditorUtils.overflowAnchorTemplate })\n        }));\n        var Toolbar = Widget.extend({\n            init: function (element, options) {\n                var that = this;\n                options = extend({}, options, { name: 'EditorToolbar' });\n                Widget.fn.init.call(that, element, options);\n                if (options.popup) {\n                    that._initPopup();\n                }\n                if (options.resizable && options.resizable.toolbar) {\n                    that._resizeHandler = kendo.onResize(function () {\n                        that.resize();\n                    });\n                    that.element.addClass('k-toolbar-resizable');\n                }\n            },\n            events: ['execute'],\n            groups: {\n                basic: [\n                    'bold',\n                    'italic',\n                    'underline',\n                    'strikethrough'\n                ],\n                scripts: [\n                    'subscript',\n                    'superscript'\n                ],\n                alignment: [\n                    'justifyLeft',\n                    'justifyCenter',\n                    'justifyRight',\n                    'justifyFull'\n                ],\n                links: [\n                    'insertImage',\n                    'insertFile',\n                    'createLink',\n                    'unlink'\n                ],\n                lists: [\n                    'insertUnorderedList',\n                    'insertOrderedList',\n                    'indent',\n                    'outdent'\n                ],\n                tables: [\n                    'createTable',\n                    'addColumnLeft',\n                    'addColumnRight',\n                    'addRowAbove',\n                    'addRowBelow',\n                    'deleteRow',\n                    'deleteColumn'\n                ],\n                advanced: [\n                    'viewHtml',\n                    'cleanFormatting',\n                    'print',\n                    'pdf',\n                    'exportAs',\n                    'import'\n                ],\n                fonts: [\n                    'fontName',\n                    'fontSize'\n                ],\n                colors: [\n                    'foreColor',\n                    'backColor'\n                ]\n            },\n            overflowFlaseTools: [\n                'formatting',\n                'fontName',\n                'fontSize',\n                'foreColor',\n                'backColor',\n                'insertHtml'\n            ],\n            _initPopup: function () {\n                var that = this;\n                this.window = $(this.element).wrap('<div class=\\'editorToolbarWindow k-header\\' />').parent().prepend('<button class=\\'k-button k-button-bare k-editortoolbar-dragHandle\\'><span class=\\'k-icon k-i-handler-drag\\' /></button>').kendoWindow({\n                    title: false,\n                    resizable: false,\n                    draggable: { dragHandle: '.k-editortoolbar-dragHandle' },\n                    animation: {\n                        open: { effects: 'fade:in' },\n                        close: { effects: 'fade:out' }\n                    },\n                    minHeight: 42,\n                    visible: false,\n                    autoFocus: false,\n                    actions: [],\n                    dragend: function () {\n                        this._moved = true;\n                    }\n                }).on('mousedown', function (e) {\n                    if (!$(e.target).is('.k-icon')) {\n                        that.preventPopupHide = true;\n                    }\n                }).on('focusout', function () {\n                    that.options.editor.element.focusout();\n                }).data('kendoWindow');\n            },\n            _toggleOverflowStyles: function (element, show) {\n                element.find('li').toggleClass('k-item k-state-default', show).find('.k-tool:not(.k-state-disabled),.k-overflow-button').toggleClass('k-overflow-button k-button', show);\n            },\n            _initOverflowPopup: function (ui) {\n                var that = this;\n                var popupTemplate = '<ul class=\\'k-editor-overflow-popup k-overflow-container k-list-container\\'></ul>';\n                that.overflowPopup = $(popupTemplate).appendTo('body').kendoPopup({\n                    anchor: ui,\n                    origin: 'bottom right',\n                    position: 'top right',\n                    copyAnchorStyles: false,\n                    open: function (e) {\n                        if (this.element.is(':empty')) {\n                            e.preventDefault();\n                        }\n                        that._toggleOverflowStyles(this.element, true);\n                    },\n                    activate: proxy(that.focusOverflowPopup, that)\n                }).data('kendoPopup');\n            },\n            items: function () {\n                var isResizable = this.options.resizable && this.options.resizable.toolbar, popup, result;\n                result = this.element.children().find('> *, select');\n                if (isResizable) {\n                    popup = this.overflowPopup;\n                    result = result.add(popup.element.children().find('> *'));\n                }\n                return result;\n            },\n            focused: function () {\n                return this.element.find('.k-state-focused').length > 0 || this.preventPopupHide || this.overflowPopup && this.overflowPopup.visible();\n            },\n            toolById: function (name) {\n                var id, tools = this.tools;\n                for (id in tools) {\n                    if (id.toLowerCase() == name) {\n                        return tools[id];\n                    }\n                }\n            },\n            toolGroupFor: function (toolName) {\n                var i, groups = this.groups;\n                if (this.isCustomTool(toolName)) {\n                    return 'custom';\n                }\n                for (i in groups) {\n                    if ($.inArray(toolName, groups[i]) >= 0) {\n                        return i;\n                    }\n                }\n            },\n            bindTo: function (editor) {\n                var that = this, window = that.window;\n                if (that._editor) {\n                    that._editor.unbind('select', proxy(that.resize, that));\n                }\n                that._editor = editor;\n                if (that.options.resizable && that.options.resizable.toolbar) {\n                    editor.options.tools.push(OVERFLOWANCHOR);\n                }\n                that.tools = that.expandTools(editor.options.tools);\n                that.render();\n                that.element.find('.k-combobox .k-input').keydown(function (e) {\n                    var combobox = $(this).closest('.k-combobox').data('kendoComboBox'), key = e.keyCode;\n                    if (key == keys.RIGHT || key == keys.LEFT) {\n                        combobox.close();\n                    } else if (key == keys.DOWN) {\n                        if (!combobox.dropDown.isOpened()) {\n                            e.stopImmediatePropagation();\n                            combobox.open();\n                        }\n                    }\n                });\n                that._attachEvents();\n                that.items().each(function initializeTool() {\n                    var toolName = that._toolName(this), tool = toolName !== 'moreVertical' ? that.tools[toolName] : that.tools.overflowAnchor, options = tool && tool.options, messages = editor.options.messages, description = options && options.tooltip || messages[toolName], ui = $(this);\n                    if (!tool || !tool.initialize) {\n                        return;\n                    }\n                    if (toolName == 'fontSize' || toolName == 'fontName') {\n                        var inheritText = messages[toolName + 'Inherit'];\n                        ui.find('input').val(inheritText).end().find('span.k-input').text(inheritText).end();\n                    }\n                    tool.initialize(ui, {\n                        title: that._appendShortcutSequence(description, tool),\n                        editor: that._editor\n                    });\n                    ui.closest('.k-widget', that.element).addClass('k-editor-widget');\n                    ui.closest('.k-colorpicker', that.element).next('.k-colorpicker').addClass('k-editor-widget');\n                });\n                editor.bind('select', proxy(that.resize, that));\n                that.update();\n                if (window) {\n                    window.wrapper.css({\n                        top: '',\n                        left: '',\n                        width: ''\n                    });\n                }\n            },\n            show: function () {\n                var that = this, window = that.window, editorOptions = that.options.editor, wrapper, editorElement, editorOffset, browser = kendo.support.browser;\n                if (window) {\n                    wrapper = window.wrapper;\n                    editorElement = editorOptions.element;\n                    if (!wrapper.is(':visible') || !that.window.options.visible) {\n                        if (!wrapper[0].style.width) {\n                            wrapper.width(outerWidth(editorElement) - parseInt(wrapper.css('border-left-width'), 10) - parseInt(wrapper.css('border-right-width'), 10));\n                        }\n                        if (!window._moved) {\n                            editorOffset = editorElement.offset();\n                            wrapper.css({\n                                top: Math.max(0, parseInt(editorOffset.top, 10) - outerHeight(wrapper) - parseInt(that.window.element.css('padding-bottom'), 10)),\n                                left: Math.max(0, parseInt(editorOffset.left, 10))\n                            });\n                        }\n                        if ((browser.msie || browser.edge) && that._overlaps(editorElement)) {\n                            setTimeout(function () {\n                                window.open();\n                            }, 0);\n                        } else {\n                            window.open();\n                        }\n                    }\n                }\n            },\n            _overlaps: function (box) {\n                var toolbarWrapper = this.window.wrapper, toolbarWrapperOffset = toolbarWrapper.offset(), toolbarWrapperLeft = toolbarWrapperOffset.left, toolbarWrapperTop = toolbarWrapperOffset.top, boxOffset = box.offset(), boxOffsetLeft = boxOffset.left, boxOffsetTop = boxOffset.top;\n                return !(boxOffsetLeft + box.width() < toolbarWrapperLeft || boxOffsetLeft > toolbarWrapperLeft + toolbarWrapper.width() || boxOffsetTop + box.height() < toolbarWrapperTop || boxOffsetTop > toolbarWrapperTop + toolbarWrapper.height());\n            },\n            hide: function () {\n                if (this.window) {\n                    this.window.close();\n                }\n            },\n            focus: function () {\n                var TABINDEX = 'tabIndex';\n                var element = this.element;\n                var tabIndex = this._editor.element.attr(TABINDEX);\n                element.attr(TABINDEX, tabIndex || 0).focus().find(focusable).first().focus();\n                if (!tabIndex && tabIndex !== 0) {\n                    element.removeAttr(TABINDEX);\n                }\n            },\n            focusOverflowPopup: function () {\n                var TABINDEX = 'tabIndex';\n                var element = this.overflowPopup.element;\n                var tabIndex = this._editor.element.attr(TABINDEX);\n                element.closest('.k-animation-container').addClass('k-overflow-wrapper');\n                element.attr(TABINDEX, tabIndex || 0).find(focusable).first().focus();\n                if (!tabIndex && tabIndex !== 0) {\n                    element.removeAttr(TABINDEX);\n                }\n            },\n            _appendShortcutSequence: function (localizedText, tool) {\n                if (!tool.key) {\n                    return localizedText;\n                }\n                var res = localizedText + ' (';\n                if (tool.ctrl) {\n                    res += 'Ctrl + ';\n                }\n                if (tool.shift) {\n                    res += 'Shift + ';\n                }\n                if (tool.alt) {\n                    res += 'Alt + ';\n                }\n                res += tool.key + ')';\n                return res;\n            },\n            _nativeTools: [\n                'insertLineBreak',\n                'insertParagraph',\n                'redo',\n                'undo',\n                'autoLink'\n            ],\n            tools: {},\n            isCustomTool: function (toolName) {\n                return !(toolName in kendo.ui.Editor.defaultTools);\n            },\n            expandTools: function (tools) {\n                var currentTool, i, nativeTools = this._nativeTools, options, defaultTools = kendo.deepExtend({}, kendo.ui.Editor.defaultTools), result = {}, name;\n                for (i = 0; i < tools.length; i++) {\n                    currentTool = tools[i];\n                    name = currentTool.name;\n                    if ($.isPlainObject(currentTool)) {\n                        if (name && defaultTools[name]) {\n                            result[name] = extend({}, defaultTools[name]);\n                            extend(result[name].options, currentTool);\n                        } else {\n                            options = extend({\n                                cssClass: 'k-i-gear',\n                                type: 'button',\n                                title: ''\n                            }, currentTool);\n                            if (!options.name) {\n                                options.name = 'custom';\n                            }\n                            options.cssClass = 'k-' + options.name;\n                            if (!options.template && options.type == 'button') {\n                                options.template = editorNS.EditorUtils.buttonTemplate;\n                                options.title = options.title || options.tooltip;\n                            }\n                            result[name] = { options: options };\n                        }\n                    } else if (defaultTools[currentTool]) {\n                        result[currentTool] = defaultTools[currentTool];\n                    }\n                }\n                for (i = 0; i < nativeTools.length; i++) {\n                    if (!result[nativeTools[i]]) {\n                        result[nativeTools[i]] = defaultTools[nativeTools[i]];\n                    }\n                }\n                return result;\n            },\n            render: function () {\n                var that = this, tools = that.tools, options, template, toolElement, toolName, editorElement = that._editor.element, element = that.element.empty(), groupName, newGroupName, toolConfig = that._editor.options.tools, browser = kendo.support.browser, group, i, groupPosition = 0, resizable = that.options.resizable && that.options.resizable.toolbar, overflowFlaseTools = this.overflowFlaseTools;\n                function stringify(template) {\n                    var result;\n                    if (template.getHtml) {\n                        result = template.getHtml();\n                    } else {\n                        if (!$.isFunction(template)) {\n                            template = kendo.template(template);\n                        }\n                        result = template(options);\n                    }\n                    return $.trim(result);\n                }\n                function endGroup() {\n                    if (group.children().length) {\n                        if (resizable) {\n                            group.data('position', groupPosition);\n                            groupPosition++;\n                        }\n                        group.appendTo(element);\n                    }\n                }\n                function startGroup(toolName) {\n                    if (toolName !== OVERFLOWANCHOR) {\n                        group = $('<li class=\\'k-tool-group\\' role=\\'presentation\\' />');\n                        group.data('overflow', $.inArray(toolName, overflowFlaseTools) === -1 ? true : false);\n                    } else {\n                        group = $('<li class=\\'k-overflow-tools\\' />');\n                    }\n                }\n                element.empty();\n                if (toolConfig.length) {\n                    toolName = toolConfig[0].name || toolConfig[0];\n                }\n                startGroup(toolName, overflowFlaseTools);\n                for (i = 0; i < toolConfig.length; i++) {\n                    toolName = toolConfig[i].name || toolConfig[i];\n                    options = tools[toolName] && tools[toolName].options;\n                    if (!options && $.isPlainObject(toolName)) {\n                        options = toolName;\n                    }\n                    template = options && options.template;\n                    if (toolName == 'break') {\n                        endGroup();\n                        $('<li class=\\'k-row-break\\' />').appendTo(that.element);\n                        startGroup(toolName, overflowFlaseTools);\n                    }\n                    if (!template) {\n                        continue;\n                    }\n                    newGroupName = that.toolGroupFor(toolName);\n                    if (groupName != newGroupName || toolName == OVERFLOWANCHOR) {\n                        endGroup();\n                        startGroup(toolName, overflowFlaseTools);\n                        groupName = newGroupName;\n                    }\n                    template = stringify(template);\n                    toolElement = $(template).appendTo(group);\n                    if (newGroupName == 'custom') {\n                        endGroup();\n                        startGroup(toolName, overflowFlaseTools);\n                    }\n                    if (options.exec && toolElement.hasClass('k-tool')) {\n                        toolElement.click(proxy(options.exec, editorElement[0]));\n                    }\n                }\n                endGroup();\n                $(that.element).children(':has(> .k-tool)').addClass('k-button-group');\n                if (that.options.popup && browser.msie && browser.version < 9) {\n                    that.window.wrapper.find('*').attr('unselectable', 'on');\n                }\n                that.updateGroups();\n                if (resizable) {\n                    that._initOverflowPopup(that.element.find('.k-overflow-anchor'));\n                }\n                that.angular('compile', function () {\n                    return { elements: that.element };\n                });\n            },\n            updateGroups: function () {\n                $(this.element).children().each(function () {\n                    $(this).children().filter(function () {\n                        return !$(this).hasClass('k-state-disabled');\n                    }).removeClass('k-group-end').first().addClass('k-group-start').end().last().addClass('k-group-end').end();\n                });\n            },\n            decorateFrom: function (body) {\n                this.items().filter('.k-decorated').each(function () {\n                    var selectBox = $(this).data('kendoSelectBox');\n                    if (selectBox) {\n                        selectBox.decorate(body);\n                    }\n                });\n            },\n            destroy: function () {\n                Widget.fn.destroy.call(this);\n                var id, tools = this.tools;\n                for (id in tools) {\n                    if (tools[id].destroy) {\n                        tools[id].destroy();\n                    }\n                }\n                if (this.window) {\n                    this.window.destroy();\n                }\n                if (this._resizeHandler) {\n                    kendo.unbindResize(this._resizeHandler);\n                }\n                if (this.overflowPopup) {\n                    this.overflowPopup.destroy();\n                }\n            },\n            _attachEvents: function () {\n                var that = this, popupElement = that.overflowPopup ? that.overflowPopup.element : $([]);\n                that.attachToolsEvents(that.element.add(popupElement));\n            },\n            attachToolsEvents: function (element) {\n                var that = this, buttons = '[role=button].k-tool', enabledButtons = buttons + ':not(.k-state-disabled)', disabledButtons = buttons + '.k-state-disabled', dropdown = '.k-dropdown', colorpicker = '.k-colorpicker', combobox = '.k-combobox', editorTools = [\n                        buttons,\n                        dropdown,\n                        colorpicker,\n                        combobox\n                    ].join(',');\n                element.off(NS).on('mouseenter' + NS, enabledButtons, function () {\n                    $(this).addClass('k-state-hover');\n                }).on('mouseleave' + NS, enabledButtons, function () {\n                    $(this).removeClass('k-state-hover');\n                }).on('mousedown' + NS, editorTools, function (e) {\n                    e.preventDefault();\n                }).on('keydown' + NS, focusable, function (e) {\n                    var current = this;\n                    var resizable = that.options.resizable && that.options.resizable.toolbar;\n                    var focusElement, currentContainer, keyCode = e.keyCode;\n                    function move(direction, container, constrain) {\n                        var tools = container.find(focusable);\n                        var index = tools.index(current) + direction;\n                        if (constrain) {\n                            index = Math.max(0, Math.min(tools.length - 1, index));\n                        }\n                        return tools[index];\n                    }\n                    if (keyCode == keys.RIGHT || keyCode == keys.LEFT) {\n                        if (!$(current).hasClass('.k-dropdown')) {\n                            focusElement = move(keyCode == keys.RIGHT ? 1 : -1, that.element, true);\n                        }\n                    } else if (resizable && (keyCode == keys.UP || keyCode == keys.DOWN)) {\n                        focusElement = move(keyCode == keys.DOWN ? 1 : -1, that.overflowPopup.element, true);\n                    } else if (keyCode == keys.ESC) {\n                        if (that.overflowPopup && that.overflowPopup.visible()) {\n                            that.overflowPopup.close();\n                        }\n                        focusElement = that._editor;\n                    } else if (keyCode == keys.TAB && !(e.ctrlKey || e.altKey)) {\n                        if (resizable) {\n                            currentContainer = $(current.parentElement).hasClass('k-overflow-tool-group') ? that.overflowPopup.element : that.element;\n                        } else {\n                            currentContainer = that.element;\n                        }\n                        if (e.shiftKey) {\n                            focusElement = move(-1, currentContainer);\n                        } else {\n                            focusElement = move(1, currentContainer);\n                            if (!focusElement) {\n                                focusElement = that._editor;\n                            }\n                        }\n                    }\n                    if (focusElement) {\n                        e.preventDefault();\n                        focusElement.focus();\n                    }\n                    if (keyCode === keys.ENTER && $(current).is('a') && !$(current).attr('href')) {\n                        that._executeToolCommand(current, e);\n                    }\n                }).on('click' + NS, enabledButtons, function (e) {\n                    that._executeToolCommand(this, e);\n                }).on('click' + NS, disabledButtons, function (e) {\n                    e.preventDefault();\n                });\n            },\n            _executeToolCommand: function (toolElement, e) {\n                var that = this;\n                var button = $(toolElement);\n                e.preventDefault();\n                e.stopPropagation();\n                button.removeClass('k-state-hover');\n                if (!button.is('[data-popup]')) {\n                    that._editor.exec(that._toolName(toolElement));\n                }\n            },\n            _toolName: function (element) {\n                if (!element) {\n                    return;\n                }\n                var className = element.className;\n                if (/k-tool\\b/i.test(className)) {\n                    className = element.firstChild.className;\n                }\n                var tool = $.grep(className.split(' '), function (x) {\n                    return !/^k-(widget|tool|tool-icon|icon|state-hover|header|combobox|dropdown|selectbox|colorpicker)$/i.test(x);\n                });\n                if (tool[0]) {\n                    var toolname = tool[0];\n                    if (toolNamesByCssClass[toolname]) {\n                        toolname = toolNamesByCssClass[toolname];\n                    }\n                    if (toolname.indexOf('k-i-') >= 0) {\n                        return kendo.toCamelCase(toolname.substring(toolname.indexOf('k-i-') + 4));\n                    } else {\n                        return toolname.substring(toolname.lastIndexOf('-') + 1);\n                    }\n                }\n                return 'custom';\n            },\n            refreshTools: function () {\n                var that = this, editorNS = kendo.ui.editor, editor = that._editor, range = editor.getRange(), nodes = editorNS.RangeUtils.textNodes(range), immutables = editor.options.immutables, immutablesContext = that._immutablesContext(range);\n                nodes = editorNS.Dom.filterBy(nodes, editorNS.Dom.htmlIndentSpace, true);\n                if (!nodes.length) {\n                    nodes = [range.startContainer];\n                }\n                that.items().each(function () {\n                    var tool = that.tools[that._toolName(this)];\n                    if (tool) {\n                        var ui = $(this);\n                        if (tool.update) {\n                            tool.update(ui, nodes);\n                        }\n                        if (immutables) {\n                            that._updateImmutablesState(tool, ui, immutablesContext);\n                        }\n                    }\n                });\n                this.update();\n            },\n            _immutablesContext: function (range) {\n                if (this._editor.options.immutables) {\n                    var editorNS = kendo.ui.editor;\n                    if (range.collapsed) {\n                        return editorNS.Immutables.immutablesContext(range);\n                    } else {\n                        return editorNS.RangeUtils.editableTextNodes(range).length === 0;\n                    }\n                }\n            },\n            _updateImmutablesState: function (tool, ui, immutablesContext) {\n                var name = tool.name;\n                var uiElement = ui;\n                var trackImmutables = tool.options.trackImmutables;\n                if (trackImmutables === undefined) {\n                    trackImmutables = $.inArray(name, editorNS.Immutables.toolsToBeUpdated) > -1;\n                }\n                if (trackImmutables) {\n                    var display = immutablesContext ? 'none' : '';\n                    if (!ui.is('.k-tool')) {\n                        var uiData = ui.data();\n                        for (var key in uiData) {\n                            if (key.match(/^kendo[A-Z][a-zA-Z]*/)) {\n                                var widget = uiData[key];\n                                uiElement = widget.wrapper;\n                                break;\n                            }\n                        }\n                    }\n                    uiElement.css('display', display);\n                    var groupUi = uiElement.closest('li');\n                    if (groupUi.children(':visible').length === 0) {\n                        groupUi.css('display', display);\n                    }\n                }\n            },\n            update: function () {\n                this.updateGroups();\n            },\n            _resize: function (e) {\n                var containerWidth = e.width;\n                var resizable = this.options.resizable && this.options.resizable.toolbar;\n                var popup = this.overflowPopup;\n                this.refreshTools();\n                if (!resizable) {\n                    return;\n                }\n                if (popup.visible()) {\n                    popup.close(true);\n                }\n                this._refreshWidths();\n                this._shrink(containerWidth);\n                this._stretch(containerWidth);\n                this._toggleOverflowStyles(this.element, false);\n                this._toggleOverflowStyles(this.overflowPopup.element, true);\n                this.element.children('li.k-overflow-tools').css('visibility', popup.element.is(':empty') ? 'hidden' : 'visible');\n            },\n            _refreshWidths: function () {\n                this.element.children('li').each(function (idx, element) {\n                    var group = $(element);\n                    group.data('outerWidth', outerWidth(group, true));\n                });\n            },\n            _shrink: function (width) {\n                var group, visibleGroups;\n                if (width < this._groupsWidth()) {\n                    visibleGroups = this._visibleGroups().filter(':not(.k-overflow-tools)');\n                    for (var i = visibleGroups.length - 1; i >= 0; i--) {\n                        group = visibleGroups.eq(i);\n                        if (width > this._groupsWidth()) {\n                            break;\n                        } else {\n                            this._hideGroup(group);\n                        }\n                    }\n                }\n            },\n            _stretch: function (width) {\n                var group, hiddenGroups;\n                if (width > this._groupsWidth()) {\n                    hiddenGroups = this._hiddenGroups();\n                    for (var i = 0; i < hiddenGroups.length; i++) {\n                        group = hiddenGroups.eq(i);\n                        if (width < this._groupsWidth() || !this._showGroup(group, width)) {\n                            break;\n                        }\n                    }\n                }\n            },\n            _hiddenGroups: function () {\n                var popup = this.overflowPopup;\n                var hiddenGroups = this.element.children('li.k-tool-group').filter(':hidden');\n                hiddenGroups = hiddenGroups.add(popup.element.children('li'));\n                hiddenGroups.sort(function (a, b) {\n                    return $(a).data('position') > $(b).data('position') ? 1 : -1;\n                });\n                return hiddenGroups;\n            },\n            _visibleGroups: function () {\n                return this.element.children('li.k-tool-group, li.k-overflow-tools').filter(':visible');\n            },\n            _groupsWidth: function () {\n                var width = 0;\n                this._visibleGroups().each(function () {\n                    width += $(this).data('outerWidth');\n                });\n                return Math.ceil(width);\n            },\n            _hideGroup: function (group) {\n                if (group.data('overflow')) {\n                    var popup = this.overflowPopup;\n                    group.detach().prependTo(popup.element).addClass('k-overflow-tool-group');\n                } else {\n                    group.hide();\n                }\n            },\n            _showGroup: function (group, width) {\n                var position, previous;\n                if (group.length && width > this._groupsWidth() + group.data('outerWidth')) {\n                    if (group.hasClass('k-overflow-tool-group')) {\n                        position = group.data('position');\n                        if (position === 0) {\n                            group.detach().prependTo(this.element);\n                        } else {\n                            previous = this.element.children().filter(function (idx, element) {\n                                return $(element).data('position') === position - 1;\n                            });\n                            group.detach().insertAfter(previous);\n                        }\n                        group.removeClass('k-overflow-tool-group');\n                    } else {\n                        group.show();\n                    }\n                    return true;\n                }\n                return false;\n            }\n        });\n        $.extend(editorNS, { Toolbar: Toolbar });\n    }(window.jQuery || window.kendo.jQuery));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/tables', ['editor/toolbar'], f);\n}(function () {\n    (function ($, undefined) {\n        var kendo = window.kendo, extend = $.extend, proxy = $.proxy, Editor = kendo.ui.editor, dom = Editor.Dom, EditorUtils = Editor.EditorUtils, RangeUtils = Editor.RangeUtils, Command = Editor.Command, NS = 'kendoEditor', ACTIVESTATE = 'k-state-active', SELECTEDSTATE = 'k-state-selected', Tool = Editor.Tool, ToolTemplate = Editor.ToolTemplate, InsertHtmlCommand = Editor.InsertHtmlCommand, BlockFormatFinder = Editor.BlockFormatFinder, registerTool = Editor.EditorUtils.registerTool, getTouches = kendo.getTouches;\n        var template = kendo.template;\n        var columnTemplate = '<td style=\\'width:#=width#%;\\'>#=content#</td>';\n        var tableFormatFinder = new BlockFormatFinder([{ tags: ['table'] }]);\n        var TableCommand = InsertHtmlCommand.extend({\n            init: function (options) {\n                var o = $.extend({\n                    postProcess: this.postProcess,\n                    skipCleaners: true\n                }, options || {});\n                InsertHtmlCommand.fn.init.call(this, o);\n            },\n            _tableHtml: function (rows, columns) {\n                rows = rows || 1;\n                columns = columns || 1;\n                var columnHtml = template(columnTemplate)({\n                    width: 100 / columns,\n                    content: Editor.emptyTableCellContent\n                });\n                var rowHeight = 100 / rows;\n                return '<table class=\\'k-table\\' data-last>' + new Array(rows + 1).join('<tr style=\\'height:' + rowHeight + '%;\\'>' + new Array(columns + 1).join(columnHtml) + '</tr>') + '</table>';\n            },\n            postProcess: function (editor, range) {\n                var insertedTable = $('table[data-last]', editor.document).removeAttr('data-last');\n                range.setStart(insertedTable.find('td')[0], 0);\n                range.collapse(true);\n                editor.selectRange(range);\n            },\n            exec: function () {\n                var options = this.options;\n                options.html = this._tableHtml(options.rows, options.columns);\n                InsertHtmlCommand.fn.exec.call(this);\n            }\n        });\n        var PopupTool = Tool.extend({\n            initialize: function (ui, options) {\n                Tool.fn.initialize.call(this, ui, options);\n                var popup = $(this.options.popupTemplate).appendTo('body').kendoPopup({\n                    anchor: ui,\n                    copyAnchorStyles: false,\n                    open: proxy(this._open, this),\n                    activate: proxy(this._activate, this),\n                    close: proxy(this._close, this)\n                }).data('kendoPopup');\n                ui.click(proxy(this._toggle, this)).keydown(proxy(this._keydown, this));\n                var editor = this._editor = options.editor;\n                this._popup = popup;\n                var tableWizard = new Editor.TableWizardTool({\n                    template: new ToolTemplate({\n                        template: EditorUtils.buttonTemplate,\n                        title: editor.options.messages.tableWizard\n                    }),\n                    command: Editor.TableWizardCommand,\n                    insertNewTable: true\n                });\n                registerTool('tableWizardInsert', tableWizard);\n                var twTool = $('<div class=\\'k-editor-toolbar\\'>' + tableWizard.options.template.getHtml() + '</div>');\n                twTool.appendTo(popup.element);\n                if (editor.toolbar) {\n                    editor.toolbar.attachToolsEvents(twTool);\n                }\n            },\n            popup: function () {\n                return this._popup;\n            },\n            _activate: $.noop,\n            _open: function () {\n                this._popup.options.anchor.addClass(ACTIVESTATE);\n            },\n            _close: function () {\n                this._popup.options.anchor.removeClass(ACTIVESTATE);\n            },\n            _keydown: function (e) {\n                var keys = kendo.keys;\n                var key = e.keyCode;\n                if (key == keys.DOWN && e.altKey) {\n                    this._popup.open();\n                } else if (key == keys.ESC) {\n                    this._popup.close();\n                }\n            },\n            _toggle: function (e) {\n                var button = $(e.target).closest('.k-tool');\n                if (!button.hasClass('k-state-disabled')) {\n                    this.popup().toggle();\n                }\n            },\n            update: function (ui) {\n                var popup = this.popup();\n                if (popup.wrapper && popup.wrapper.css('display') == 'block') {\n                    popup.close();\n                }\n                ui.removeClass('k-state-hover');\n            },\n            destroy: function () {\n                this._popup.destroy();\n            }\n        });\n        var InsertTableTool = PopupTool.extend({\n            init: function (options) {\n                this.cols = 8;\n                this.rows = 6;\n                PopupTool.fn.init.call(this, $.extend(options, {\n                    command: TableCommand,\n                    popupTemplate: '<div class=\\'k-ct-popup\\'>' + new Array(this.cols * this.rows + 1).join('<span class=\\'k-ct-cell k-state-disabled\\' />') + '<div class=\\'k-status\\'></div>' + '</div>'\n                }));\n            },\n            _activate: function () {\n                var that = this, element = that._popup.element, cells = element.find('.k-ct-cell'), firstCell = cells.eq(0), lastCell = cells.eq(cells.length - 1), start = kendo.getOffset(firstCell), end = kendo.getOffset(lastCell), cols = that.cols, rows = that.rows, cellWidth, cellHeight;\n                element.find('*').addBack().attr('unselectable', 'on');\n                end.left += lastCell[0].offsetWidth;\n                end.top += lastCell[0].offsetHeight;\n                cellWidth = (end.left - start.left) / cols;\n                cellHeight = (end.top - start.top) / rows;\n                function tableFromLocation(e) {\n                    var w = $(window);\n                    return {\n                        row: Math.floor((e.clientY + w.scrollTop() - start.top) / cellHeight) + 1,\n                        col: Math.floor((e.clientX + w.scrollLeft() - start.left) / cellWidth) + 1\n                    };\n                }\n                element.autoApplyNS(NS).on('mousemove', function (e) {\n                    that._setTableSize(tableFromLocation(e));\n                }).on('mouseleave', function () {\n                    that._setTableSize();\n                }).on('down', function (e) {\n                    e.preventDefault();\n                    var touch = getTouches(e)[0];\n                    that._exec(tableFromLocation(touch.location));\n                });\n            },\n            _valid: function (size) {\n                return size && size.row > 0 && size.col > 0 && size.row <= this.rows && size.col <= this.cols;\n            },\n            _exec: function (size) {\n                if (this._valid(size)) {\n                    this._editor.exec('createTable', {\n                        rows: size.row,\n                        columns: size.col\n                    });\n                    this._popup.close();\n                }\n            },\n            _setTableSize: function (size) {\n                var element = this._popup.element;\n                var status = element.find('.k-status');\n                var cells = element.find('.k-ct-cell');\n                var cols = this.cols;\n                var messages = this._editor.options.messages;\n                if (this._valid(size)) {\n                    status.text(kendo.format(messages.createTableHint, size.row, size.col));\n                    cells.each(function (i) {\n                        $(this).toggleClass(SELECTEDSTATE, i % cols < size.col && i / cols < size.row);\n                    });\n                } else {\n                    status.text(messages.dialogCancel);\n                    cells.removeClass(SELECTEDSTATE);\n                }\n            },\n            _keydown: function (e) {\n                PopupTool.fn._keydown.call(this, e);\n                if (!this._popup.visible()) {\n                    return;\n                }\n                var keys = kendo.keys;\n                var key = e.keyCode;\n                var cells = this._popup.element.find('.k-ct-cell');\n                var focus = Math.max(cells.filter('.k-state-selected').last().index(), 0);\n                var selectedRows = Math.floor(focus / this.cols);\n                var selectedColumns = focus % this.cols;\n                var changed = false;\n                if (key == keys.DOWN && !e.altKey) {\n                    changed = true;\n                    selectedRows++;\n                } else if (key == keys.UP) {\n                    changed = true;\n                    selectedRows--;\n                } else if (key == keys.RIGHT) {\n                    changed = true;\n                    selectedColumns++;\n                } else if (key == keys.LEFT) {\n                    changed = true;\n                    selectedColumns--;\n                }\n                var tableSize = {\n                    row: Math.max(1, Math.min(this.rows, selectedRows + 1)),\n                    col: Math.max(1, Math.min(this.cols, selectedColumns + 1))\n                };\n                if (key == keys.ENTER) {\n                    this._exec(tableSize);\n                } else {\n                    this._setTableSize(tableSize);\n                }\n                if (changed) {\n                    e.preventDefault();\n                    e.stopImmediatePropagation();\n                }\n            },\n            _open: function () {\n                var messages = this._editor.options.messages;\n                PopupTool.fn._open.call(this);\n                this.popup().element.find('.k-status').text(messages.dialogCancel).end().find('.k-ct-cell').removeClass(SELECTEDSTATE);\n            },\n            _close: function () {\n                PopupTool.fn._close.call(this);\n                this.popup().element.off('.' + NS);\n            }\n        });\n        var InsertRowCommand = Command.extend({\n            exec: function () {\n                var range = this.lockRange(true), td = range.endContainer, cellCount, row, newRow;\n                while (dom.name(td) != 'td') {\n                    td = td.parentNode;\n                }\n                if (this.immutables() && Editor.Immutables.immutableParent(td)) {\n                    return;\n                }\n                row = td.parentNode;\n                cellCount = row.children.length;\n                newRow = row.cloneNode(true);\n                for (var i = 0; i < row.cells.length; i++) {\n                    newRow.cells[i].innerHTML = Editor.emptyTableCellContent;\n                }\n                if (this.options.position == 'before') {\n                    dom.insertBefore(newRow, row);\n                } else {\n                    dom.insertAfter(newRow, row);\n                }\n                this.releaseRange(range);\n            }\n        });\n        var InsertColumnCommand = Command.extend({\n            exec: function () {\n                var range = this.lockRange(true), td = dom.closest(range.endContainer, 'td'), table = dom.closest(td, 'table'), columnIndex, i, rows = table.rows, cell, newCell, position = this.options.position;\n                if (this.immutables() && Editor.Immutables.immutableParent(td)) {\n                    return;\n                }\n                columnIndex = dom.findNodeIndex(td, true);\n                for (i = 0; i < rows.length; i++) {\n                    cell = rows[i].cells[columnIndex];\n                    newCell = cell.cloneNode();\n                    newCell.innerHTML = Editor.emptyTableCellContent;\n                    if (position == 'before') {\n                        dom.insertBefore(newCell, cell);\n                    } else {\n                        dom.insertAfter(newCell, cell);\n                    }\n                }\n                this.releaseRange(range);\n            }\n        });\n        var DeleteRowCommand = Command.extend({\n            exec: function () {\n                var range = this.lockRange();\n                var rows = RangeUtils.mapAll(range, function (node) {\n                    return $(node).closest('tr')[0];\n                });\n                var row = rows[0];\n                if (this.immutables() && Editor.Immutables.immutableParent(row)) {\n                    return;\n                }\n                var table = dom.closest(row, 'table');\n                var focusElement;\n                if (table.rows.length <= rows.length) {\n                    focusElement = dom.next(table);\n                    if (!focusElement || dom.insignificant(focusElement)) {\n                        focusElement = dom.prev(table);\n                    }\n                    dom.remove(table);\n                } else {\n                    for (var i = 0; i < rows.length; i++) {\n                        row = rows[i];\n                        dom.removeTextSiblings(row);\n                        focusElement = dom.next(row) || dom.prev(row);\n                        focusElement = focusElement.cells[0];\n                        dom.remove(row);\n                    }\n                }\n                if (focusElement) {\n                    range.setStart(focusElement, 0);\n                    range.collapse(true);\n                    this.editor.selectRange(range);\n                }\n            }\n        });\n        var DeleteColumnCommand = Command.extend({\n            exec: function () {\n                var range = this.lockRange(), td = dom.closest(range.endContainer, 'td'), table = dom.closest(td, 'table'), rows = table.rows, columnIndex = dom.findNodeIndex(td, true), columnCount = rows[0].cells.length, focusElement, i;\n                if (this.immutables() && Editor.Immutables.immutableParent(td)) {\n                    return;\n                }\n                if (columnCount == 1) {\n                    focusElement = dom.next(table);\n                    if (!focusElement || dom.insignificant(focusElement)) {\n                        focusElement = dom.prev(table);\n                    }\n                    dom.remove(table);\n                } else {\n                    dom.removeTextSiblings(td);\n                    focusElement = dom.next(td) || dom.prev(td);\n                    for (i = 0; i < rows.length; i++) {\n                        dom.remove(rows[i].cells[columnIndex]);\n                    }\n                }\n                if (focusElement) {\n                    range.setStart(focusElement, 0);\n                    range.collapse(true);\n                    this.editor.selectRange(range);\n                }\n            }\n        });\n        var TableModificationTool = Tool.extend({\n            command: function (options) {\n                options = extend(options, this.options);\n                if (options.action == 'delete') {\n                    if (options.type == 'row') {\n                        return new DeleteRowCommand(options);\n                    } else {\n                        return new DeleteColumnCommand(options);\n                    }\n                } else {\n                    if (options.type == 'row') {\n                        return new InsertRowCommand(options);\n                    } else {\n                        return new InsertColumnCommand(options);\n                    }\n                }\n            },\n            initialize: function (ui, options) {\n                Tool.fn.initialize.call(this, ui, options);\n                ui.addClass('k-state-disabled');\n            },\n            update: function (ui, nodes) {\n                var isFormatted = !tableFormatFinder.isFormatted(nodes);\n                ui.toggleClass('k-state-disabled', isFormatted);\n            }\n        });\n        extend(kendo.ui.editor, {\n            PopupTool: PopupTool,\n            TableCommand: TableCommand,\n            InsertTableTool: InsertTableTool,\n            TableModificationTool: TableModificationTool,\n            InsertRowCommand: InsertRowCommand,\n            InsertColumnCommand: InsertColumnCommand,\n            DeleteRowCommand: DeleteRowCommand,\n            DeleteColumnCommand: DeleteColumnCommand\n        });\n        registerTool('createTable', new InsertTableTool({\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                popup: true,\n                title: 'Create table'\n            })\n        }));\n        registerTool('addColumnLeft', new TableModificationTool({\n            type: 'column',\n            position: 'before',\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Add column on the left'\n            })\n        }));\n        registerTool('addColumnRight', new TableModificationTool({\n            type: 'column',\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Add column on the right'\n            })\n        }));\n        registerTool('addRowAbove', new TableModificationTool({\n            type: 'row',\n            position: 'before',\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Add row above'\n            })\n        }));\n        registerTool('addRowBelow', new TableModificationTool({\n            type: 'row',\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Add row below'\n            })\n        }));\n        registerTool('deleteRow', new TableModificationTool({\n            type: 'row',\n            action: 'delete',\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Delete row'\n            })\n        }));\n        registerTool('deleteColumn', new TableModificationTool({\n            type: 'column',\n            action: 'delete',\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Delete column'\n            })\n        }));\n    }(window.kendo.jQuery));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/export', ['editor/main'], f);\n}(function () {\n    (function ($, undefined) {\n        var kendo = window.kendo, extend = $.extend, proxy = $.proxy, Editor = kendo.ui.editor, EditorUtils = Editor.EditorUtils, Command = Editor.Command, Tool = Editor.Tool, registerTool = EditorUtils.registerTool, ToolTemplate = Editor.ToolTemplate, defaultExportAsItems = [\n                {\n                    text: 'Docx',\n                    value: 'docx'\n                },\n                {\n                    text: 'Rtf',\n                    value: 'rtf'\n                },\n                {\n                    text: 'Pdf',\n                    value: 'pdf'\n                },\n                {\n                    text: 'Html',\n                    value: 'html'\n                },\n                {\n                    text: 'Plain Text',\n                    value: 'txt'\n                }\n            ];\n        var ExportAsCommand = Command.extend({\n            init: function (options) {\n                var cmd = this;\n                cmd.options = options;\n                Command.fn.init.call(cmd, options);\n                cmd.attributes = null;\n                cmd.exportType = options.exportType;\n            },\n            exec: function () {\n                var cmd = this;\n                var range = this.lockRange(true);\n                cmd.postToProxy();\n                cmd.releaseRange(range);\n            },\n            postToProxy: function () {\n                this.generateForm().appendTo('body').submit().remove();\n            },\n            generateForm: function () {\n                var cmd = this;\n                var exportAsOptions = cmd.editor.options.exportAs;\n                var form = $('<form>').attr({\n                    action: exportAsOptions && exportAsOptions.proxyURL || '',\n                    method: 'POST'\n                });\n                form.append([\n                    cmd.valueInput(),\n                    cmd.exportTypeInput(),\n                    cmd.fileNameInput()\n                ]);\n                return form;\n            },\n            valueInput: function () {\n                var editor = this.editor;\n                return $('<input>').attr({\n                    value: editor.encodedValue(),\n                    name: 'value',\n                    type: 'hidden'\n                });\n            },\n            exportTypeInput: function () {\n                var cmd = this;\n                return $('<input>').attr({\n                    value: cmd.exportType,\n                    name: 'exportType',\n                    type: 'hidden'\n                });\n            },\n            fileNameInput: function () {\n                var editor = this.editor;\n                var exportAsOptions = editor.options.exportAs;\n                var fileName = exportAsOptions && exportAsOptions.fileName || editor.element.attr('id') || 'editor';\n                return $('<input>').attr({\n                    value: fileName,\n                    name: 'fileName',\n                    type: 'hidden'\n                });\n            }\n        });\n        var ExportAsTool = Tool.extend({\n            init: function (options) {\n                var tool = this;\n                Tool.fn.init.call(tool, kendo.deepExtend({}, tool.options, options));\n                tool.type = 'kendoSelectBox';\n            },\n            options: {\n                items: defaultExportAsItems,\n                width: 115\n            },\n            command: function (args) {\n                var value = args.value;\n                return new Editor.ExportAsCommand({\n                    range: args.range,\n                    exportType: value.exportType\n                });\n            },\n            initialize: function (ui, initOptions) {\n                var tool = this;\n                var editor = initOptions.editor;\n                var options = tool.options;\n                var toolName = options.name;\n                var changeHandler = proxy(tool.changeHandler, tool);\n                var dataSource = options.items || editor.options[toolName];\n                dataSource.unshift({\n                    text: editor.options.messages[toolName],\n                    value: ''\n                });\n                tool.editor = editor;\n                ui.width(options.width);\n                ui.kendoSelectBox({\n                    dataTextField: 'text',\n                    dataValueField: 'value',\n                    dataSource: dataSource,\n                    autoSize: true,\n                    change: changeHandler,\n                    open: function (e) {\n                        var sender = e.sender;\n                        sender.items()[0].style.display = 'none';\n                        sender.unbind('open');\n                    },\n                    highlightFirst: false,\n                    template: kendo.template('<span unselectable=\"on\" style=\"display:block;#=(data.style||\"\")#\">#:data.text#</span>')\n                });\n                ui.addClass('k-decorated').closest('.k-widget').removeClass('k-' + toolName).find('*').addBack().attr('unselectable', 'on');\n            },\n            changeHandler: function (e) {\n                var sender = e.sender;\n                var dataItem = sender.dataItem();\n                var value = dataItem && dataItem.value;\n                this._exec(value);\n                sender.value('');\n            },\n            _exec: function (value) {\n                if (value) {\n                    Tool.exec(this.editor, this.options.name, { exportType: value });\n                }\n            },\n            destroy: function () {\n                this._ancestor = null;\n            }\n        });\n        extend(Editor, {\n            ExportAsTool: ExportAsTool,\n            ExportAsCommand: ExportAsCommand\n        });\n        registerTool('exportAs', new ExportAsTool({\n            template: new ToolTemplate({\n                template: EditorUtils.dropDownListTemplate,\n                title: 'Export As'\n            })\n        }));\n    }(window.kendo.jQuery));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/import', ['editor/main'], f);\n}(function () {\n    (function ($, undefined) {\n        var kendo = window.kendo, extend = $.extend, proxy = $.proxy, Editor = kendo.ui.editor, EditorUtils = Editor.EditorUtils, Command = Editor.Command, Tool = Editor.Tool, registerTool = EditorUtils.registerTool, ToolTemplate = Editor.ToolTemplate, loadingOverlay = '<div contenteditable=\"false\" class=\"k-loading-mask\" style=\"width: 100%; height: 100%; position: absolute; top: 0px; left: 0px;\"><div class=\"k-loading-image\"></div><div class=\"k-loading-color\"></div></div>';\n        var ImportCommand = Command.extend({\n            exec: function () {\n                (this.editor._uploadWidget || this._initializeUploadWidget()).element.click();\n            },\n            _initializeUploadWidget: function () {\n                var cmd = this;\n                var editor = cmd.editor;\n                var importOptions = editor.options['import'];\n                var upload = $('<input id=\"editorImport\" name=\"files\" type=\"file\" />').kendoUpload({\n                    success: proxy(cmd._onUploadSuccess, cmd),\n                    progress: proxy(cmd._onUploadProgress, cmd),\n                    select: proxy(cmd._onUploadSelect, cmd),\n                    error: proxy(cmd._onUploadError, cmd),\n                    complete: proxy(cmd._onUploadComplete, cmd),\n                    showFileList: false,\n                    multiple: false,\n                    async: {\n                        saveUrl: importOptions.proxyUrl,\n                        autoUpload: true,\n                        saveField: 'file'\n                    },\n                    validation: {\n                        allowedExtensions: importOptions.allowedExtensions,\n                        maxFileSize: importOptions.maxFileSize\n                    }\n                }).getKendoUpload();\n                editor._uploadWidget = upload;\n                return upload;\n            },\n            _onUploadComplete: function (ev) {\n                this._trigger('complete', ev);\n                ev.sender.clearAllFiles();\n                this._removeLoadingOverlay();\n            },\n            _onUploadSuccess: function (ev) {\n                this.editor.value(ev.response.html.replace(/<\\/?body>/gi, ''));\n                this._trigger('success', ev);\n            },\n            _onUploadProgress: function (ev) {\n                this._trigger('progress', ev);\n            },\n            _onUploadSelect: function (ev) {\n                this._trigger('select', ev);\n                if (!ev.files[0].validationErrors) {\n                    this._initLoadingOverlay();\n                }\n            },\n            _onUploadError: function (ev) {\n                this._trigger('error', ev);\n            },\n            _trigger: function (eventType, uploadEvent) {\n                var editor = this.editor;\n                var importOptions = editor.options['import'];\n                if (typeof importOptions[eventType] === 'function') {\n                    importOptions[eventType].call(editor, uploadEvent);\n                }\n            },\n            _initLoadingOverlay: function () {\n                var editable = this.editor.body;\n                if (Editor.Dom.is(editable, 'body')) {\n                    this._iframeWrapper = this._container = this.editor.wrapper.find('iframe').parent().css({ position: 'relative' }).append(loadingOverlay);\n                } else {\n                    this._container = $(editable).append(loadingOverlay);\n                }\n                kendo.ui.progress(this._container, true);\n            },\n            _removeLoadingOverlay: function () {\n                kendo.ui.progress(this._container, false);\n                $(this._iframeWrapper).css({ position: '' });\n                delete this._container;\n                delete this._iframeWrapper;\n            }\n        });\n        extend(Editor, { ImportCommand: ImportCommand });\n        registerTool('import', new Tool({\n            command: ImportCommand,\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Import'\n            })\n        }));\n    }(window.kendo.jQuery));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/resizing/resizing-utils', ['editor/main'], f);\n}(function () {\n    (function (kendo, undefined) {\n        var global = window;\n        var math = global.Math;\n        var min = math.min;\n        var max = math.max;\n        var parseFloat = global.parseFloat;\n        var $ = kendo.jQuery;\n        var extend = $.extend;\n        var Editor = kendo.ui.editor;\n        var PERCENTAGE = '%';\n        var PIXEL = 'px';\n        var REGEX_NUMBER_IN_PERCENTAGES = /(\\d+)(\\.?)(\\d*)%/;\n        var REGEX_NUMBER_IN_PIXELS = /(\\d+)(\\.?)(\\d*)px/;\n        var STRING = 'string';\n        function constrain(options) {\n            var value = options.value;\n            var lowerBound = options.min;\n            var upperBound = options.max;\n            return max(min(parseFloat(value), parseFloat(upperBound)), parseFloat(lowerBound));\n        }\n        function getScrollBarWidth(element) {\n            if (element && !$(element).is('body') && element.scrollHeight > element.clientHeight) {\n                return kendo.support.scrollbar();\n            }\n            return 0;\n        }\n        function calculatePercentageRatio(value, total) {\n            if (inPercentages(value)) {\n                return parseFloat(value);\n            } else {\n                return parseFloat(value) / total * 100;\n            }\n        }\n        function inPercentages(value) {\n            return typeof value === STRING && REGEX_NUMBER_IN_PERCENTAGES.test(value);\n        }\n        function inPixels(value) {\n            return typeof value === STRING && REGEX_NUMBER_IN_PIXELS.test(value);\n        }\n        function toPercentages(value) {\n            return parseFloat(value) + PERCENTAGE;\n        }\n        function toPixels(value) {\n            return parseFloat(value) + PIXEL;\n        }\n        var ResizingUtils = {\n            constrain: constrain,\n            getScrollBarWidth: getScrollBarWidth,\n            calculatePercentageRatio: calculatePercentageRatio,\n            inPercentages: inPercentages,\n            inPixels: inPixels,\n            toPercentages: toPercentages,\n            toPixels: toPixels\n        };\n        extend(Editor, { ResizingUtils: ResizingUtils });\n    }(window.kendo));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/resizing/table-element-resizing', [\n        'editor/main',\n        'kendo.resizable',\n        'editor/resizing/resizing-utils'\n    ], f);\n}(function () {\n    (function (kendo, undefined) {\n        var $ = kendo.jQuery;\n        var extend = $.extend;\n        var noop = $.noop;\n        var proxy = $.proxy;\n        var Editor = kendo.ui.editor;\n        var Class = kendo.Class;\n        var KEY_DOWN = 'keydown';\n        var MOUSE_DOWN = 'mousedown';\n        var MOUSE_ENTER = 'mouseenter';\n        var MOUSE_LEAVE = 'mouseleave';\n        var MOUSE_MOVE = 'mousemove';\n        var MOUSE_UP = 'mouseup';\n        var COMMA = ',';\n        var DOT = '.';\n        var LAST_CHILD = ':last-child';\n        var TABLE = 'table';\n        var TableElementResizing = Class.extend({\n            init: function (element, options) {\n                var that = this;\n                that.options = extend({}, that.options, options);\n                that.options.tags = $.isArray(that.options.tags) ? that.options.tags : [that.options.tags];\n                if ($(element).is(TABLE)) {\n                    that.element = element;\n                    that._attachEventHandlers();\n                }\n            },\n            destroy: function () {\n                var that = this;\n                var eventNamespace = that.options.eventNamespace;\n                if (that.element) {\n                    $(that.element).off(eventNamespace);\n                    that.element = null;\n                }\n                $(that.options.rootElement).off(KEY_DOWN + eventNamespace);\n                that._destroyResizeHandle();\n            },\n            options: {\n                tags: [],\n                min: 0,\n                rootElement: null,\n                eventNamespace: '',\n                rtl: false,\n                handle: {\n                    dataAttribute: '',\n                    height: 0,\n                    width: 0,\n                    classNames: {},\n                    template: ''\n                }\n            },\n            _attachEventHandlers: function () {\n                var that = this;\n                var options = that.options;\n                $(that.element).on(MOUSE_MOVE + options.eventNamespace, options.tags.join(COMMA), proxy(that.detectElementBorderHovering, that));\n            },\n            resizingInProgress: function () {\n                var that = this;\n                var resizable = that._resizable;\n                if (resizable) {\n                    return !!resizable.resizing;\n                }\n                return false;\n            },\n            resize: noop,\n            detectElementBorderHovering: function (e) {\n                var that = this;\n                var options = that.options;\n                var handleOptions = options.handle;\n                var tableElement = $(e.currentTarget);\n                var resizeHandle = that.resizeHandle;\n                var dataAttribute = handleOptions.dataAttribute;\n                if (!that.resizingInProgress()) {\n                    if (!tableElement.is(LAST_CHILD) && that.elementBorderHovered(tableElement, e)) {\n                        if (resizeHandle) {\n                            if (resizeHandle.data(dataAttribute) && resizeHandle.data(dataAttribute) !== tableElement[0]) {\n                                that.showResizeHandle(tableElement, e);\n                            }\n                        } else {\n                            that.showResizeHandle(tableElement, e);\n                        }\n                    } else {\n                        if (resizeHandle) {\n                            that._destroyResizeHandle();\n                        }\n                    }\n                }\n            },\n            elementBorderHovered: noop,\n            showResizeHandle: function (tableElement, e) {\n                var that = this;\n                if (e.buttons !== 0) {\n                    return;\n                }\n                that._initResizeHandle();\n                that.setResizeHandlePosition(tableElement);\n                that.setResizeHandleDimensions();\n                that.setResizeHandleDataAttributes(tableElement[0]);\n                that._attachResizeHandleEventHandlers();\n                that._initResizable(tableElement);\n                that._hideResizeMarker();\n                that.resizeHandle.show();\n            },\n            _initResizeHandle: function () {\n                var that = this;\n                var options = that.options;\n                that._destroyResizeHandle();\n                that.resizeHandle = $(options.handle.template).appendTo(options.rootElement);\n            },\n            setResizeHandlePosition: noop,\n            setResizeHandleDimensions: noop,\n            setResizeHandleDataAttributes: function (tableElement) {\n                var that = this;\n                that.resizeHandle.data(that.options.handle.dataAttribute, tableElement);\n            },\n            _attachResizeHandleEventHandlers: function () {\n                var that = this;\n                var options = that.options;\n                var eventNamespace = options.eventNamespace;\n                var markerClass = options.handle.classNames.marker;\n                var resizeHandle = that.resizeHandle;\n                that.resizeHandle.on(MOUSE_DOWN + eventNamespace, function () {\n                    resizeHandle.find(DOT + markerClass).show();\n                }).on(MOUSE_UP + eventNamespace, function () {\n                    resizeHandle.find(DOT + markerClass).hide();\n                });\n            },\n            _hideResizeMarker: function () {\n                var that = this;\n                that.resizeHandle.find(DOT + that.options.handle.classNames.marker).hide();\n            },\n            _destroyResizeHandle: function () {\n                var that = this;\n                if (that.resizeHandle) {\n                    that._destroyResizable();\n                    that.resizeHandle.off(that.options.eventNamespace).remove();\n                    that.resizeHandle = null;\n                }\n            },\n            _initResizable: function (tableElement) {\n                var that = this;\n                if (!that.resizeHandle) {\n                    return;\n                }\n                that._destroyResizable();\n                that._resizable = new kendo.ui.Resizable(tableElement, {\n                    draggableElement: that.resizeHandle[0],\n                    start: proxy(that.onResizeStart, that),\n                    resize: proxy(that.onResize, that),\n                    resizeend: proxy(that.onResizeEnd, that)\n                });\n            },\n            _destroyResizable: function () {\n                var that = this;\n                if (that._resizable) {\n                    that._resizable.destroy();\n                    that._resizable = null;\n                }\n            },\n            onResizeStart: function () {\n                this._disableKeyboard();\n            },\n            onResize: function (e) {\n                this.setResizeHandleDragPosition(e);\n            },\n            setResizeHandleDragPosition: noop,\n            onResizeEnd: function (e) {\n                var that = this;\n                that.resize(e);\n                that._destroyResizeHandle();\n                that._enableKeyboard();\n            },\n            _enableKeyboard: function () {\n                var options = this.options;\n                $(options.rootElement).off(KEY_DOWN + options.eventNamespace);\n            },\n            _disableKeyboard: function () {\n                var options = this.options;\n                $(options.rootElement).on(KEY_DOWN + options.eventNamespace, function (e) {\n                    e.preventDefault();\n                });\n            },\n            _forceResizing: function (e) {\n                var resizable = this._resizable;\n                if (resizable && resizable.userEvents) {\n                    resizable.userEvents._end(e);\n                }\n            }\n        });\n        var ResizingFactory = Class.extend({\n            create: function (editor, options) {\n                var that = this;\n                var resizingName = options.name;\n                var NS = options.eventNamespace;\n                $(editor.body).on(MOUSE_ENTER + NS, TABLE, function (e) {\n                    var table = e.currentTarget;\n                    var resizing = editor[resizingName];\n                    e.stopPropagation();\n                    if (resizing) {\n                        if (resizing.element !== table && !resizing.resizingInProgress()) {\n                            that._destroyResizing(editor, options);\n                            that._initResizing(editor, table, options);\n                        }\n                    } else {\n                        that._initResizing(editor, table, options);\n                    }\n                }).on(MOUSE_LEAVE + NS, TABLE, function (e) {\n                    var parentTable;\n                    var resizing = editor[resizingName];\n                    e.stopPropagation();\n                    if (resizing && !resizing.resizingInProgress() && !resizing.resizeHandle) {\n                        parentTable = $(resizing.element).parents(TABLE)[0];\n                        if (parentTable) {\n                            that._destroyResizing(editor, options);\n                            that._initResizing(editor, parentTable, options);\n                        }\n                    }\n                }).on(MOUSE_LEAVE + NS, function () {\n                    var resizing = editor[resizingName];\n                    if (resizing && !resizing.resizingInProgress()) {\n                        that._destroyResizing(editor, options);\n                    }\n                }).on(MOUSE_UP + NS, function (e) {\n                    var resizing = editor[resizingName];\n                    var parentTable;\n                    if (resizing && resizing.resizingInProgress()) {\n                        parentTable = $(e.target).parents(TABLE)[0];\n                        if (parentTable) {\n                            resizing._forceResizing(e);\n                            that._destroyResizing(editor, options);\n                            that._initResizing(editor, parentTable, options);\n                        }\n                    }\n                });\n            },\n            dispose: function (editor, options) {\n                $(editor.body).off(options.eventNamespace);\n            },\n            _initResizing: function (editor, tableElement, options) {\n                var resizingName = options.name;\n                var resizingType = options.type;\n                editor[resizingName] = new resizingType(tableElement, {\n                    rtl: kendo.support.isRtl(editor.element),\n                    rootElement: editor.body\n                });\n            },\n            _destroyResizing: function (editor, options) {\n                var resizingName = options.name;\n                if (editor[resizingName]) {\n                    editor[resizingName].destroy();\n                    editor[resizingName] = null;\n                }\n            }\n        });\n        ResizingFactory.current = new ResizingFactory();\n        TableElementResizing.create = function (editor, options) {\n            ResizingFactory.current.create(editor, options);\n        };\n        TableElementResizing.dispose = function (editor, options) {\n            ResizingFactory.current.dispose(editor, options);\n        };\n        extend(Editor, { TableElementResizing: TableElementResizing });\n    }(window.kendo));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/resizing/column-resizing', [\n        'editor/main',\n        'editor/resizing/resizing-utils',\n        'editor/resizing/table-element-resizing'\n    ], f);\n}(function () {\n    (function (kendo, undefined) {\n        var global = window;\n        var math = global.Math;\n        var abs = math.abs;\n        var $ = kendo.jQuery;\n        var extend = $.extend;\n        var Editor = kendo.ui.editor;\n        var TableElementResizing = Editor.TableElementResizing;\n        var ResizingUtils = Editor.ResizingUtils;\n        var constrain = ResizingUtils.constrain;\n        var calculatePercentageRatio = ResizingUtils.calculatePercentageRatio;\n        var getScrollBarWidth = ResizingUtils.getScrollBarWidth;\n        var inPercentages = ResizingUtils.inPercentages;\n        var toPercentages = ResizingUtils.toPercentages;\n        var toPixels = ResizingUtils.toPixels;\n        var outerWidth = kendo._outerWidth;\n        var NS = '.kendoEditorColumnResizing';\n        var RESIZE_HANDLE_CLASS = 'k-column-resize-handle';\n        var RESIZE_MARKER_CLASS = 'k-column-resize-marker';\n        var BODY = 'body';\n        var TBODY = 'tbody';\n        var TD = 'td';\n        var TH = 'th';\n        var TR = 'tr';\n        var COMMA = ',';\n        var WIDTH = 'width';\n        var ColumnResizing = TableElementResizing.extend({\n            options: {\n                tags: [\n                    TD,\n                    TH\n                ],\n                min: 20,\n                rootElement: null,\n                eventNamespace: NS,\n                rtl: false,\n                handle: {\n                    dataAttribute: 'column',\n                    width: 10,\n                    height: 0,\n                    classNames: {\n                        handle: RESIZE_HANDLE_CLASS,\n                        marker: RESIZE_MARKER_CLASS\n                    },\n                    template: '<div class=\"k-column-resize-handle-wrapper\" unselectable=\"on\" contenteditable=\"false\">' + '<div class=\"' + RESIZE_HANDLE_CLASS + '\">' + '<div class=\"' + RESIZE_MARKER_CLASS + '\"></div>' + '</div>' + '</div>'\n                }\n            },\n            elementBorderHovered: function (column, e) {\n                var that = this;\n                var options = that.options;\n                var handleWidth = options.handle.width;\n                var borderOffset = column.offset().left + (options.rtl ? 0 : outerWidth(column));\n                var mousePosition = e.clientX + $(column[0].ownerDocument).scrollLeft();\n                if (mousePosition > borderOffset - handleWidth && mousePosition < borderOffset + handleWidth) {\n                    return true;\n                } else {\n                    return false;\n                }\n            },\n            setResizeHandlePosition: function (column) {\n                var that = this;\n                var tableBody = $(that.element).children(TBODY);\n                var options = that.options;\n                var rtl = options.rtl;\n                var handleWidth = options.handle.width;\n                var rootElement = $(options.rootElement);\n                var scrollTopOffset = rootElement.is(BODY) ? 0 : rootElement.scrollTop();\n                var scrollLeftOffset = rootElement.is(BODY) ? 0 : rootElement.scrollLeft();\n                var columnWidthOffset = rtl ? 0 : outerWidth(column);\n                var scrollBarWidth = rtl ? getScrollBarWidth(rootElement[0]) : 0;\n                that.resizeHandle.css({\n                    top: tableBody.position().top + scrollTopOffset,\n                    left: column.position().left + columnWidthOffset + (scrollLeftOffset - scrollBarWidth) - handleWidth / 2,\n                    position: 'absolute'\n                });\n            },\n            setResizeHandleDimensions: function () {\n                var that = this;\n                var tableBody = $(that.element).children(TBODY);\n                that.resizeHandle.css({\n                    width: that.options.handle.width,\n                    height: tableBody.height()\n                });\n            },\n            setResizeHandleDragPosition: function (e) {\n                var that = this;\n                var column = $($(e.currentTarget).data(that.options.handle.dataAttribute));\n                var options = that.options;\n                var handleWidth = options.handle ? options.handle.width : 0;\n                var min = options.min;\n                var rtl = options.rtl;\n                var columnWidth = outerWidth(column);\n                var columnLeftOffset = column.position().left;\n                var adjacentColumnWidth = outerWidth(column.next());\n                var resizeHandle = $(that.resizeHandle);\n                var rootElement = $(options.rootElement);\n                var scrollLeftOffset = rootElement.is(BODY) ? 0 : rootElement.scrollLeft();\n                var scrollBarWidth = rtl ? getScrollBarWidth(rootElement[0]) : 0;\n                var handleOffset = constrain({\n                    value: resizeHandle.position().left + (scrollLeftOffset - scrollBarWidth) + e.x.delta,\n                    min: columnLeftOffset + (scrollLeftOffset - scrollBarWidth) - (rtl ? adjacentColumnWidth : 0) + min,\n                    max: columnLeftOffset + columnWidth + (scrollLeftOffset - scrollBarWidth) + (rtl ? 0 : adjacentColumnWidth) - handleWidth - min\n                });\n                resizeHandle.css({ left: handleOffset });\n            },\n            resize: function (e) {\n                var that = this;\n                var column = $($(e.currentTarget).data(that.options.handle.dataAttribute));\n                var options = that.options;\n                var rtlModifier = options.rtl ? -1 : 1;\n                var min = options.min;\n                var initialDeltaX = rtlModifier * e.x.initialDelta;\n                var newWidth;\n                var initialAdjacentColumnWidth;\n                var initialColumnWidth;\n                that._setTableComputedWidth();\n                that._setColumnsComputedWidth();\n                initialColumnWidth = outerWidth(column);\n                initialAdjacentColumnWidth = outerWidth(column.next());\n                newWidth = constrain({\n                    value: initialColumnWidth + initialDeltaX,\n                    min: min,\n                    max: initialColumnWidth + initialAdjacentColumnWidth - min\n                });\n                that._resizeColumn(column[0], newWidth);\n                that._resizeTopAndBottomColumns(column[0], newWidth);\n                that._resizeAdjacentColumns(column.index(), initialAdjacentColumnWidth, initialColumnWidth, initialColumnWidth - newWidth);\n            },\n            _setTableComputedWidth: function () {\n                var element = this.element;\n                if (element.style[WIDTH] === '') {\n                    element.style[WIDTH] = toPixels(outerWidth($(element)));\n                }\n            },\n            _setColumnsComputedWidth: function () {\n                var that = this;\n                var tableBody = $(that.element).children(TBODY);\n                var tableBodyWidth = outerWidth(tableBody);\n                var columns = tableBody.children(TR).children(TD);\n                var length = columns.length;\n                var currentColumnsWidths = columns.map(function () {\n                    return outerWidth($(this));\n                });\n                var i;\n                for (i = 0; i < length; i++) {\n                    if (inPercentages(columns[i].style[WIDTH])) {\n                        columns[i].style[WIDTH] = toPercentages(calculatePercentageRatio(currentColumnsWidths[i], tableBodyWidth));\n                    } else {\n                        columns[i].style[WIDTH] = toPixels(currentColumnsWidths[i]);\n                    }\n                }\n            },\n            _resizeTopAndBottomColumns: function (column, newWidth) {\n                var that = this;\n                var columnIndex = $(column).index();\n                var topAndBottomColumns = $(that.element).children(TBODY).children(TR).children(that.options.tags.join(COMMA)).filter(function () {\n                    var cell = this;\n                    return $(cell).index() === columnIndex && cell !== column;\n                });\n                var length = topAndBottomColumns.length;\n                var i;\n                for (i = 0; i < length; i++) {\n                    that._resizeColumn(topAndBottomColumns[i], newWidth);\n                }\n            },\n            _resizeColumn: function (column, newWidth) {\n                if (inPercentages(column.style[WIDTH])) {\n                    column.style[WIDTH] = toPercentages(calculatePercentageRatio(newWidth, outerWidth($(this.element).children(TBODY))));\n                } else {\n                    column.style[WIDTH] = toPixels(newWidth);\n                }\n            },\n            _resizeAdjacentColumns: function (columnIndex, initialAdjacentColumnWidth, initialColumnWidth, deltaWidth) {\n                var that = this;\n                var adjacentColumns = $(that.element).children(TBODY).children(TR).children(that.options.tags.join(COMMA)).filter(function () {\n                    return $(this).index() === columnIndex + 1;\n                });\n                var length = adjacentColumns.length;\n                var i;\n                for (i = 0; i < length; i++) {\n                    that._resizeAdjacentColumn(adjacentColumns[i], initialAdjacentColumnWidth, initialColumnWidth, deltaWidth);\n                }\n            },\n            _resizeAdjacentColumn: function (adjacentColumn, initialAdjacentColumnWidth, initialColumnWidth, deltaWidth) {\n                var that = this;\n                var min = that.options.min;\n                var newWidth;\n                newWidth = constrain({\n                    value: initialAdjacentColumnWidth + deltaWidth,\n                    min: min,\n                    max: abs(initialColumnWidth + initialAdjacentColumnWidth - min)\n                });\n                that._resizeColumn(adjacentColumn, newWidth);\n            }\n        });\n        ColumnResizing.create = function (editor) {\n            TableElementResizing.create(editor, {\n                name: 'columnResizing',\n                type: ColumnResizing,\n                eventNamespace: NS\n            });\n        };\n        ColumnResizing.dispose = function (editor) {\n            TableElementResizing.dispose(editor, { eventNamespace: NS });\n        };\n        extend(Editor, { ColumnResizing: ColumnResizing });\n    }(window.kendo));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/resizing/row-resizing', [\n        'editor/main',\n        'editor/resizing/resizing-utils',\n        'editor/resizing/table-element-resizing'\n    ], f);\n}(function () {\n    (function (kendo, undefined) {\n        var math = window.Math;\n        var abs = math.abs;\n        var $ = kendo.jQuery;\n        var extend = $.extend;\n        var Editor = kendo.ui.editor;\n        var TableElementResizing = Editor.TableElementResizing;\n        var ResizingUtils = Editor.ResizingUtils;\n        var getScrollBarWidth = ResizingUtils.getScrollBarWidth;\n        var constrain = ResizingUtils.constrain;\n        var calculatePercentageRatio = ResizingUtils.calculatePercentageRatio;\n        var inPercentages = ResizingUtils.inPercentages;\n        var toPercentages = ResizingUtils.toPercentages;\n        var toPixels = ResizingUtils.toPixels;\n        var outerHeight = kendo._outerHeight;\n        var NS = '.kendoEditorRowResizing';\n        var RESIZE_HANDLE_CLASS = 'k-row-resize-handle';\n        var RESIZE_HANDLE_MARKER_WRAPPER_CLASS = 'k-row-resize-marker-wrapper';\n        var RESIZE_MARKER_CLASS = 'k-row-resize-marker';\n        var BODY = 'body';\n        var TR = 'tr';\n        var TBODY = 'tbody';\n        var HEIGHT = 'height';\n        var RowResizing = TableElementResizing.extend({\n            options: {\n                tags: [TR],\n                min: 20,\n                rootElement: null,\n                eventNamespace: NS,\n                rtl: false,\n                handle: {\n                    dataAttribute: 'row',\n                    width: 0,\n                    height: 10,\n                    classNames: {\n                        handle: RESIZE_HANDLE_CLASS,\n                        marker: RESIZE_MARKER_CLASS\n                    },\n                    template: '<div class=\"k-row-resize-handle-wrapper\" unselectable=\"on\" contenteditable=\"false\">' + '<div class=\"' + RESIZE_HANDLE_CLASS + '\">' + '<div class=\"' + RESIZE_HANDLE_MARKER_WRAPPER_CLASS + '\">' + '<div class=\"' + RESIZE_MARKER_CLASS + '\"></div>' + '</div>' + '</div>' + '</div>'\n                }\n            },\n            elementBorderHovered: function (tableElement, e) {\n                var that = this;\n                var handleHeight = that.options.handle[HEIGHT];\n                var borderOffset = tableElement.offset().top + outerHeight(tableElement);\n                var mousePosition = e.clientY + $(tableElement[0].ownerDocument).scrollTop();\n                if (mousePosition > borderOffset - handleHeight && mousePosition < borderOffset + handleHeight) {\n                    return true;\n                } else {\n                    return false;\n                }\n            },\n            setResizeHandlePosition: function (row) {\n                var that = this;\n                var options = that.options;\n                var handleHeight = options.handle[HEIGHT];\n                var rowPosition = row.position();\n                var rootElement = $(options.rootElement);\n                var scrollTopOffset = rootElement.is(BODY) ? 0 : rootElement.scrollTop();\n                var scrollLeftOffset = rootElement.is(BODY) ? 0 : rootElement.scrollLeft();\n                var scrollBarWidth = options.rtl ? getScrollBarWidth(rootElement[0]) : 0;\n                that.resizeHandle.css({\n                    top: rowPosition.top + outerHeight(row) + scrollTopOffset - handleHeight / 2,\n                    left: rowPosition.left + (scrollLeftOffset - scrollBarWidth),\n                    position: 'absolute'\n                });\n            },\n            setResizeHandleDimensions: function () {\n                var that = this;\n                that.resizeHandle.css({\n                    width: $(that.element).children(TBODY).width(),\n                    height: that.options.handle[HEIGHT]\n                });\n            },\n            setResizeHandleDragPosition: function (e) {\n                var that = this;\n                var options = that.options;\n                var min = options.min;\n                var tableBody = $(that.element).children(TBODY);\n                var tableBodyTopOffset = tableBody.position().top;\n                var resizeHandle = $(that.resizeHandle);\n                var row = $(e.currentTarget).data(options.handle.dataAttribute);\n                var rootElement = $(options.rootElement);\n                var scrollTopOffset = rootElement.is(BODY) ? 0 : rootElement.scrollTop();\n                var handleOffset = constrain({\n                    value: resizeHandle.position().top + scrollTopOffset + e.y.delta,\n                    min: $(row).position().top + scrollTopOffset + min,\n                    max: tableBodyTopOffset + outerHeight(tableBody) + scrollTopOffset - options.handle[HEIGHT] - min\n                });\n                resizeHandle.css({ top: handleOffset });\n            },\n            resize: function (e) {\n                var that = this;\n                var options = that.options;\n                var row = $(e.currentTarget).data(options.handle.dataAttribute);\n                var currentRowHeight = outerHeight($(row));\n                var element = $(that.element);\n                var initialTableHeight = outerHeight(element);\n                var tableBody = element.children(TBODY);\n                var tableBodyHeight = tableBody.height();\n                var initialStyleHeight = row.style[HEIGHT];\n                var newRowHeight = constrain({\n                    value: currentRowHeight + e.y.initialDelta,\n                    min: options.min,\n                    max: abs(tableBodyHeight - options.min)\n                });\n                that._setRowsHeightInPixels();\n                row.style[HEIGHT] = toPixels(newRowHeight);\n                that._setTableHeight(initialTableHeight + (newRowHeight - currentRowHeight));\n                if (inPercentages(initialStyleHeight)) {\n                    that._setRowsHeightInPercentages();\n                }\n            },\n            _setRowsHeightInPixels: function () {\n                var that = this;\n                var rows = $(that.element).children(TBODY).children(TR);\n                var length = rows.length;\n                var currentRowsHeights = rows.map(function () {\n                    return outerHeight($(this));\n                });\n                var i;\n                for (i = 0; i < length; i++) {\n                    rows[i].style[HEIGHT] = toPixels(currentRowsHeights[i]);\n                }\n            },\n            _setRowsHeightInPercentages: function () {\n                var that = this;\n                var tableBody = $(that.element).children(TBODY);\n                var tableBodyHeight = tableBody.height();\n                var rows = tableBody.children(TR);\n                var length = rows.length;\n                var currentRowsHeights = rows.map(function () {\n                    return outerHeight($(this));\n                });\n                var i;\n                for (i = 0; i < length; i++) {\n                    rows[i].style[HEIGHT] = toPercentages(calculatePercentageRatio(currentRowsHeights[i], tableBodyHeight));\n                }\n            },\n            _setTableHeight: function (newHeight) {\n                var element = this.element;\n                if (inPercentages(element.style[HEIGHT])) {\n                    element.style[HEIGHT] = toPercentages(calculatePercentageRatio(newHeight, $(element).parent().height()));\n                } else {\n                    element.style[HEIGHT] = toPixels(newHeight);\n                }\n            }\n        });\n        RowResizing.create = function (editor) {\n            TableElementResizing.create(editor, {\n                name: 'rowResizing',\n                type: RowResizing,\n                eventNamespace: NS\n            });\n        };\n        RowResizing.dispose = function (editor) {\n            TableElementResizing.dispose(editor, { eventNamespace: NS });\n        };\n        extend(Editor, { RowResizing: RowResizing });\n    }(window.kendo));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/resizing/table-resize-handle', [\n        'editor/main',\n        'kendo.draganddrop',\n        'editor/resizing/resizing-utils'\n    ], f);\n}(function () {\n    (function (kendo, undefined) {\n        var $ = kendo.jQuery;\n        var extend = $.extend;\n        var noop = $.noop;\n        var proxy = $.proxy;\n        var Editor = kendo.ui.editor;\n        var Class = kendo.Class;\n        var Draggable = kendo.ui.Draggable;\n        var Observable = kendo.Observable;\n        var getScrollBarWidth = Editor.ResizingUtils.getScrollBarWidth;\n        var outerWidth = kendo._outerWidth;\n        var outerHeight = kendo._outerHeight;\n        var NS = '.kendoEditorTableResizeHandle';\n        var RESIZE_HANDLE_CLASS = 'k-table-resize-handle';\n        var DRAG_START = 'dragStart';\n        var DRAG = 'drag';\n        var DRAG_END = 'dragEnd';\n        var HALF_INSIDE = 'halfInside';\n        var MOUSE_OVER = 'mouseover';\n        var MOUSE_OUT = 'mouseout';\n        var BODY = 'body';\n        var TABLE = 'table';\n        var EAST = 'east';\n        var NORTH = 'north';\n        var NORTHEAST = 'northeast';\n        var NORTHWEST = 'northwest';\n        var SOUTH = 'south';\n        var SOUTHEAST = 'southeast';\n        var SOUTHWEST = 'southwest';\n        var WEST = 'west';\n        var DOT = '.';\n        var TableResizeHandle = Observable.extend({\n            init: function (options) {\n                var that = this;\n                Observable.fn.init.call(that);\n                that.options = extend({}, that.options, options);\n                that.element = $(that.options.template).appendTo(that.options.appendTo)[0];\n                that._attachEventHandlers();\n                that._addStyles();\n                that._initDraggable();\n                that._initPositioningStrategy();\n                that._initDraggingStrategy();\n                $(that.element).data(TABLE, that.options.resizableElement);\n            },\n            destroy: function () {\n                var that = this;\n                $(that.element).off(NS).remove();\n                that.element = null;\n                that._destroyDraggable();\n                that.unbind();\n            },\n            options: {\n                appendTo: null,\n                direction: SOUTHEAST,\n                resizableElement: null,\n                rtl: false,\n                template: '<div class=\\'k-table-resize-handle-wrapper\\' unselectable=\\'on\\' contenteditable=\\'false\\'>' + '<div class=\\'' + RESIZE_HANDLE_CLASS + '\\'></div>' + '</div>'\n            },\n            events: [\n                DRAG_START,\n                DRAG,\n                DRAG_END,\n                MOUSE_OVER,\n                MOUSE_OUT\n            ],\n            show: function () {\n                this._setPosition();\n            },\n            _setPosition: function () {\n                var that = this;\n                var position = that._positioningStrategy.getPosition();\n                $(that.element).css({\n                    top: position.top,\n                    left: position.left,\n                    position: 'absolute'\n                });\n            },\n            _attachEventHandlers: function () {\n                var that = this;\n                $(that.element).on(MOUSE_OVER + NS, proxy(that._onMouseOver, that)).on(MOUSE_OUT + NS, proxy(that._onMouseOut, that));\n            },\n            _onMouseOver: function () {\n                this.trigger(MOUSE_OVER);\n            },\n            _onMouseOut: function () {\n                this.trigger(MOUSE_OUT);\n            },\n            _addStyles: function () {\n                var that = this;\n                $(that.element).children(DOT + RESIZE_HANDLE_CLASS).addClass('k-resize-' + that.options.direction);\n            },\n            _initPositioningStrategy: function () {\n                var that = this;\n                var options = that.options;\n                that._positioningStrategy = HandlePositioningStrategy.create({\n                    name: options.direction,\n                    handle: that.element,\n                    resizableElement: options.resizableElement,\n                    rootElement: options.rootElement,\n                    rtl: options.rtl\n                });\n            },\n            _initDraggable: function () {\n                var that = this;\n                var element = that.element;\n                if (that._draggable || !element) {\n                    return;\n                }\n                that._draggable = new Draggable(element, {\n                    dragstart: proxy(that._onDragStart, that),\n                    drag: proxy(that._onDrag, that),\n                    dragend: proxy(that._onDragEnd, that)\n                });\n            },\n            _onDragStart: function () {\n                this.trigger(DRAG_START);\n            },\n            _onDrag: function (e) {\n                var that = this;\n                that.trigger(DRAG, that._draggingStrategy.adjustDragDelta({\n                    deltaX: e.x.delta,\n                    deltaY: e.y.delta,\n                    initialDeltaX: e.x.initialDelta,\n                    initialDeltaY: e.y.initialDelta\n                }));\n            },\n            _onDragEnd: function () {\n                this.trigger(DRAG_END);\n            },\n            _destroyDraggable: function () {\n                var that = this;\n                if (that._draggable) {\n                    that._draggable.destroy();\n                    that._draggable = null;\n                }\n            },\n            _initDraggingStrategy: function () {\n                var that = this;\n                that._draggingStrategy = HandleDraggingStrategy.create({ name: that.options.direction });\n            }\n        });\n        var StrategyFactory = Class.extend({\n            init: function () {\n                this._items = [];\n            },\n            register: function (name, type) {\n                this._items.push({\n                    name: name,\n                    type: type\n                });\n            },\n            create: function (options) {\n                var items = this._items;\n                var itemsLength = items.length;\n                var name = options.name ? options.name.toLowerCase() : '';\n                var match;\n                var item;\n                var i;\n                for (i = 0; i < itemsLength; i++) {\n                    item = items[i];\n                    if (item.name.toLowerCase() === name) {\n                        match = item;\n                        break;\n                    }\n                }\n                if (match) {\n                    return new match.type(options);\n                }\n            }\n        });\n        var PositioningStrategyFactory = StrategyFactory.extend({});\n        PositioningStrategyFactory.current = new PositioningStrategyFactory();\n        var HandlePositioningStrategy = Class.extend({\n            init: function (options) {\n                var that = this;\n                that.options = extend({}, that.options, options);\n            },\n            options: {\n                handle: null,\n                offset: HALF_INSIDE,\n                resizableElement: null,\n                rootElement: null,\n                rtl: false\n            },\n            getPosition: function () {\n                var that = this;\n                var position = that.calculatePosition();\n                var handleOffsetPosition = that.applyHandleOffset(position);\n                var scrollOffsetPosition = that.applyScrollOffset(handleOffsetPosition);\n                return scrollOffsetPosition;\n            },\n            calculatePosition: noop,\n            applyHandleOffset: function (position) {\n                var options = this.options;\n                var handle = $(options.handle);\n                if (options.offset === HALF_INSIDE) {\n                    return {\n                        top: position.top - outerHeight(handle) / 2,\n                        left: position.left - outerWidth(handle) / 2\n                    };\n                }\n                return position;\n            },\n            applyScrollOffset: function (position) {\n                var options = this.options;\n                var rootElement = $(options.rootElement);\n                var scrollBarWidth = options.rtl ? getScrollBarWidth(rootElement[0]) : 0;\n                if (!rootElement.is(BODY)) {\n                    return {\n                        top: position.top + (rootElement.scrollTop() || 0),\n                        left: position.left + (rootElement.scrollLeft() || 0) - scrollBarWidth\n                    };\n                }\n                return position;\n            }\n        });\n        HandlePositioningStrategy.create = function (options) {\n            return PositioningStrategyFactory.current.create(options);\n        };\n        var EastPositioningStrategy = HandlePositioningStrategy.extend({\n            calculatePosition: function () {\n                var resizableElement = $(this.options.resizableElement);\n                var offset = resizableElement.position();\n                return {\n                    top: offset.top + outerHeight(resizableElement) / 2,\n                    left: offset.left + outerWidth(resizableElement)\n                };\n            }\n        });\n        PositioningStrategyFactory.current.register(EAST, EastPositioningStrategy);\n        var NorthPositioningStrategy = HandlePositioningStrategy.extend({\n            calculatePosition: function () {\n                var resizableElement = $(this.options.resizableElement);\n                var offset = resizableElement.position();\n                return {\n                    top: offset.top,\n                    left: offset.left + outerWidth(resizableElement) / 2\n                };\n            }\n        });\n        PositioningStrategyFactory.current.register(NORTH, NorthPositioningStrategy);\n        var NortheastPositioningStrategy = HandlePositioningStrategy.extend({\n            calculatePosition: function () {\n                var resizableElement = $(this.options.resizableElement);\n                var offset = resizableElement.position();\n                return {\n                    top: offset.top,\n                    left: offset.left + outerWidth(resizableElement)\n                };\n            }\n        });\n        PositioningStrategyFactory.current.register(NORTHEAST, NortheastPositioningStrategy);\n        var NorthwestPositioningStrategy = HandlePositioningStrategy.extend({\n            calculatePosition: function () {\n                var resizableElement = $(this.options.resizableElement);\n                var offset = resizableElement.position();\n                return {\n                    top: offset.top,\n                    left: offset.left\n                };\n            }\n        });\n        PositioningStrategyFactory.current.register(NORTHWEST, NorthwestPositioningStrategy);\n        var SouthPositioningStrategy = HandlePositioningStrategy.extend({\n            calculatePosition: function () {\n                var resizableElement = $(this.options.resizableElement);\n                var offset = resizableElement.position();\n                return {\n                    top: offset.top + outerHeight(resizableElement),\n                    left: offset.left + outerWidth(resizableElement) / 2\n                };\n            }\n        });\n        PositioningStrategyFactory.current.register(SOUTH, SouthPositioningStrategy);\n        var SoutheastPositioningStrategy = HandlePositioningStrategy.extend({\n            calculatePosition: function () {\n                var resizableElement = $(this.options.resizableElement);\n                var offset = resizableElement.position();\n                return {\n                    top: offset.top + outerHeight(resizableElement),\n                    left: offset.left + outerWidth(resizableElement)\n                };\n            }\n        });\n        PositioningStrategyFactory.current.register(SOUTHEAST, SoutheastPositioningStrategy);\n        var SouthwestPositioningStrategy = HandlePositioningStrategy.extend({\n            calculatePosition: function () {\n                var resizableElement = $(this.options.resizableElement);\n                var offset = resizableElement.position();\n                return {\n                    top: offset.top + outerHeight(resizableElement),\n                    left: offset.left\n                };\n            }\n        });\n        PositioningStrategyFactory.current.register(SOUTHWEST, SouthwestPositioningStrategy);\n        var WestPositioningStrategy = HandlePositioningStrategy.extend({\n            calculatePosition: function () {\n                var resizableElement = $(this.options.resizableElement);\n                var offset = resizableElement.position();\n                return {\n                    top: offset.top + outerHeight(resizableElement) / 2,\n                    left: offset.left\n                };\n            }\n        });\n        PositioningStrategyFactory.current.register(WEST, WestPositioningStrategy);\n        var DraggingStrategyFactory = StrategyFactory.extend({});\n        DraggingStrategyFactory.current = new DraggingStrategyFactory();\n        var HandleDraggingStrategy = Class.extend({\n            init: function (options) {\n                var that = this;\n                that.options = extend({}, that.options, options);\n            },\n            options: {\n                deltaX: {\n                    adjustment: null,\n                    modifier: null\n                },\n                deltaY: {\n                    adjustment: null,\n                    modifier: null\n                }\n            },\n            adjustDragDelta: function (deltas) {\n                var options = this.options;\n                var xAxisAdjustment = options.deltaX.adjustment * options.deltaX.modifier;\n                var yAxisAdjustment = options.deltaY.adjustment * options.deltaY.modifier;\n                return {\n                    deltaX: deltas.deltaX * xAxisAdjustment,\n                    deltaY: deltas.deltaY * yAxisAdjustment,\n                    initialDeltaX: deltas.initialDeltaX * xAxisAdjustment,\n                    initialDeltaY: deltas.initialDeltaY * yAxisAdjustment\n                };\n            }\n        });\n        HandleDraggingStrategy.create = function (options) {\n            return DraggingStrategyFactory.current.create(options);\n        };\n        var HorizontalDraggingStrategy = HandleDraggingStrategy.extend({\n            options: {\n                deltaX: {\n                    adjustment: 1,\n                    modifier: 1\n                },\n                deltaY: {\n                    adjustment: 0,\n                    modifier: 0\n                }\n            }\n        });\n        var EastDraggingStrategy = HorizontalDraggingStrategy.extend({ options: { deltaX: { modifier: 1 } } });\n        DraggingStrategyFactory.current.register(EAST, EastDraggingStrategy);\n        var WestDraggingStrategy = HorizontalDraggingStrategy.extend({ options: { deltaX: { modifier: -1 } } });\n        DraggingStrategyFactory.current.register(WEST, WestDraggingStrategy);\n        var VerticalDraggingStrategy = HandleDraggingStrategy.extend({\n            options: {\n                deltaX: {\n                    adjustment: 0,\n                    modifier: 0\n                },\n                deltaY: {\n                    adjustment: 1,\n                    modifier: 1\n                }\n            }\n        });\n        var NorthDraggingStrategy = VerticalDraggingStrategy.extend({ options: { deltaY: { modifier: -1 } } });\n        DraggingStrategyFactory.current.register(NORTH, NorthDraggingStrategy);\n        var SouthDraggingStrategy = VerticalDraggingStrategy.extend({ options: { deltaY: { modifier: 1 } } });\n        DraggingStrategyFactory.current.register(SOUTH, SouthDraggingStrategy);\n        var HorizontalAndVerticalDraggingStrategy = HandleDraggingStrategy.extend({\n            options: {\n                deltaX: {\n                    adjustment: 1,\n                    modifier: 1\n                },\n                deltaY: {\n                    adjustment: 1,\n                    modifier: 1\n                }\n            }\n        });\n        var NorthEastDraggingStrategy = HorizontalAndVerticalDraggingStrategy.extend({\n            options: {\n                deltaX: { modifier: 1 },\n                deltaY: { modifier: -1 }\n            }\n        });\n        DraggingStrategyFactory.current.register(NORTHEAST, NorthEastDraggingStrategy);\n        var NorthWestDraggingStrategy = HorizontalAndVerticalDraggingStrategy.extend({\n            options: {\n                deltaX: { modifier: -1 },\n                deltaY: { modifier: -1 }\n            }\n        });\n        DraggingStrategyFactory.current.register(NORTHWEST, NorthWestDraggingStrategy);\n        var SouthEastDraggingStrategy = HorizontalAndVerticalDraggingStrategy.extend({\n            options: {\n                deltaX: { modifier: 1 },\n                deltaY: { modifier: 1 }\n            }\n        });\n        DraggingStrategyFactory.current.register(SOUTHEAST, SouthEastDraggingStrategy);\n        var SouthWestDraggingStrategy = HorizontalAndVerticalDraggingStrategy.extend({\n            options: {\n                deltaX: { modifier: -1 },\n                deltaY: { modifier: 1 }\n            }\n        });\n        DraggingStrategyFactory.current.register(SOUTHWEST, SouthWestDraggingStrategy);\n        extend(Editor, { TableResizeHandle: TableResizeHandle });\n    }(window.kendo));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/resizing/table-resizing', [\n        'editor/main',\n        'editor/resizing/table-resize-handle',\n        'editor/resizing/resizing-utils'\n    ], f);\n}(function () {\n    (function (kendo, undefined) {\n        var global = window;\n        var math = global.Math;\n        var min = math.min;\n        var max = math.max;\n        var $ = kendo.jQuery;\n        var contains = $.contains;\n        var extend = $.extend;\n        var proxy = $.proxy;\n        var browser = kendo.support.browser;\n        var Editor = kendo.ui.editor;\n        var Class = kendo.Class;\n        var TableResizeHandle = Editor.TableResizeHandle;\n        var ResizingUtils = Editor.ResizingUtils;\n        var calculatePercentageRatio = ResizingUtils.calculatePercentageRatio;\n        var constrain = ResizingUtils.constrain;\n        var inPercentages = ResizingUtils.inPercentages;\n        var inPixels = ResizingUtils.inPixels;\n        var toPercentages = ResizingUtils.toPercentages;\n        var toPixels = ResizingUtils.toPixels;\n        var outerWidth = kendo._outerWidth;\n        var outerHeight = kendo._outerHeight;\n        var NS = '.kendoEditorTableResizing';\n        var RESIZE_HANDLE_WRAPPER_CLASS = 'k-table-resize-handle-wrapper';\n        var TABLE_CLASS = 'k-table';\n        var TABLE_RESIZING_CLASS = 'k-table-resizing';\n        var DRAG_START = 'dragStart';\n        var DRAG = 'drag';\n        var DRAG_END = 'dragEnd';\n        var KEY_DOWN = 'keydown';\n        var MOUSE_DOWN = 'mousedown';\n        var MOUSE_OVER = 'mouseover';\n        var MOUSE_OUT = 'mouseout';\n        var COLUMN = 'td';\n        var ROW = 'tr';\n        var TBODY = 'tbody';\n        var TABLE = 'table';\n        var WIDTH = 'width';\n        var HEIGHT = 'height';\n        var EAST = 'east';\n        var NORTH = 'north';\n        var NORTHEAST = 'northeast';\n        var NORTHWEST = 'northwest';\n        var SOUTH = 'south';\n        var SOUTHEAST = 'southeast';\n        var SOUTHWEST = 'southwest';\n        var WEST = 'west';\n        var DOT = '.';\n        function isUndefined(value) {\n            return typeof value === 'undefined';\n        }\n        var TableResizing = Class.extend({\n            init: function (element, options) {\n                var that = this;\n                that.options = extend({}, that.options, options);\n                that.handles = [];\n                if ($(element).is(TABLE)) {\n                    that.element = element;\n                }\n            },\n            destroy: function () {\n                var that = this;\n                $(that.element).off(NS);\n                that.element = null;\n                $(that.options.rootElement).off(KEY_DOWN + NS);\n                that._destroyResizeHandles();\n            },\n            options: {\n                appendHandlesTo: null,\n                rtl: false,\n                rootElement: null,\n                minWidth: 10,\n                minHeight: 10,\n                handles: [\n                    { direction: NORTHWEST },\n                    { direction: NORTH },\n                    { direction: NORTHEAST },\n                    { direction: EAST },\n                    { direction: SOUTHEAST },\n                    { direction: SOUTH },\n                    { direction: SOUTHWEST },\n                    { direction: WEST }\n                ]\n            },\n            resize: function (args) {\n                var that = this;\n                var deltas = extend({}, {\n                    deltaX: 0,\n                    deltaY: 0,\n                    initialDeltaX: 0,\n                    initialDeltaY: 0\n                }, args);\n                that._resizeWidth(deltas.deltaX, deltas.initialDeltaX);\n                that._resizeHeight(deltas.deltaY, deltas.initialDeltaY);\n                that.showResizeHandles();\n            },\n            _resizeWidth: function (delta, initialDelta) {\n                var that = this;\n                var element = $(that.element);\n                var styleWidth = element[0].style[WIDTH];\n                var currentWidth = outerWidth(element);\n                var parentWidth = element.parent().width();\n                var maxWidth = that._getMaxDimensionValue(WIDTH);\n                var newWidth;\n                var ratioValue;\n                var ratioTotalValue;\n                var constrainedWidth;\n                if (delta === 0) {\n                    return;\n                }\n                if (isUndefined(that._initialElementWidth)) {\n                    that._initialElementWidth = currentWidth;\n                }\n                constrainedWidth = constrain({\n                    value: that._initialElementWidth + initialDelta,\n                    min: that.options.minWidth,\n                    max: maxWidth\n                });\n                if (inPercentages(styleWidth)) {\n                    if (currentWidth + delta > parentWidth) {\n                        ratioValue = max(constrainedWidth, parentWidth);\n                        ratioTotalValue = min(constrainedWidth, parentWidth);\n                    } else {\n                        ratioValue = min(constrainedWidth, parentWidth);\n                        ratioTotalValue = max(constrainedWidth, parentWidth);\n                    }\n                    newWidth = toPercentages(calculatePercentageRatio(ratioValue, ratioTotalValue));\n                } else {\n                    newWidth = toPixels(constrainedWidth);\n                }\n                that._setColumnsWidth();\n                element[0].style[WIDTH] = newWidth;\n            },\n            _resizeHeight: function (delta, initialDelta) {\n                var that = this;\n                var element = $(that.element);\n                var styleHeight = element[0].style[HEIGHT];\n                var currentHeight = outerHeight(element);\n                var parent = element.parent();\n                var parentHeight = parent.height();\n                var maxHeight = that._getMaxDimensionValue(HEIGHT);\n                var newHeight;\n                var ratioValue;\n                var ratioTotalValue;\n                var constrainedHeight;\n                var minHeight = that.options.minHeight;\n                var hasRowsInPixels = that._hasRowsInPixels();\n                if (delta === 0) {\n                    return;\n                }\n                if (isUndefined(that._initialElementHeight)) {\n                    that._initialElementHeight = currentHeight;\n                }\n                constrainedHeight = constrain({\n                    value: that._initialElementHeight + initialDelta,\n                    min: minHeight,\n                    max: maxHeight\n                });\n                if (hasRowsInPixels && delta < 0) {\n                    that._setRowsHeightInPercentages();\n                }\n                if (inPercentages(styleHeight)) {\n                    if (currentHeight + delta > parentHeight) {\n                        ratioValue = max(constrainedHeight, parentHeight);\n                        ratioTotalValue = min(constrainedHeight, parentHeight);\n                    } else {\n                        ratioValue = min(constrainedHeight, parentHeight);\n                        ratioTotalValue = max(constrainedHeight, parentHeight);\n                    }\n                    newHeight = toPercentages(calculatePercentageRatio(ratioValue, ratioTotalValue));\n                } else {\n                    newHeight = toPixels(constrainedHeight);\n                }\n                element[0].style[HEIGHT] = newHeight;\n                if (hasRowsInPixels && delta < 0) {\n                    that._setRowsHeightInPixels();\n                }\n            },\n            _getMaxDimensionValue: function (dimension) {\n                var that = this;\n                var element = $(that.element);\n                var dimensionLowercase = dimension.toLowerCase();\n                var rtlModifier = that.options.rtl ? -1 : 1;\n                var parent = $(that.element).parent();\n                var parentElement = parent[0];\n                var parentDimension = parent[dimensionLowercase]();\n                var parentScrollOffset = rtlModifier * (dimension === WIDTH ? parent.scrollLeft() : parent.scrollTop());\n                if (parentElement === element.closest(COLUMN)[0]) {\n                    if (parentElement.style[dimensionLowercase] === '' && !inPercentages(that.element.style[dimensionLowercase])) {\n                        return Infinity;\n                    } else {\n                        return parentDimension + parentScrollOffset;\n                    }\n                } else {\n                    return parentDimension + parentScrollOffset;\n                }\n            },\n            _setColumnsWidth: function () {\n                var that = this;\n                var element = $(that.element);\n                var parentElement = element.parent()[0];\n                var parentColumn = element.closest(COLUMN);\n                var columns = parentColumn.closest(ROW).children();\n                var columnsLength = columns.length;\n                var i;\n                function isWidthInPercentages(element) {\n                    var styleWidth = element.style.width;\n                    if (styleWidth !== '') {\n                        return inPercentages(styleWidth) ? true : false;\n                    } else {\n                        return $(element).hasClass(TABLE_CLASS) ? true : false;\n                    }\n                }\n                if (isWidthInPercentages(element[0]) && parentElement === parentColumn[0] && parentElement.style[WIDTH] === '') {\n                    for (i = 0; i < columnsLength; i++) {\n                        columns[i].style[WIDTH] = toPixels($(columns[i]).width());\n                    }\n                }\n            },\n            _hasRowsInPixels: function () {\n                var that = this;\n                var rows = $(that.element).children(TBODY).children(ROW);\n                for (var i = 0; i < rows.length; i++) {\n                    if (rows[i].style.height === '' || inPixels(rows[i].style.height)) {\n                        return true;\n                    }\n                }\n                return false;\n            },\n            _setRowsHeightInPercentages: function () {\n                var that = this;\n                var tableBody = $(that.element).children(TBODY);\n                var tableBodyHeight = tableBody.height();\n                var rows = tableBody.children(ROW);\n                var length = rows.length;\n                var currentRowsHeights = rows.map(function () {\n                    return outerHeight($(this));\n                });\n                var i;\n                for (i = 0; i < length; i++) {\n                    rows[i].style[HEIGHT] = toPercentages(calculatePercentageRatio(currentRowsHeights[i], tableBodyHeight));\n                }\n            },\n            _setRowsHeightInPixels: function () {\n                var that = this;\n                var rows = $(that.element).children(TBODY).children(ROW);\n                var length = rows.length;\n                var currentRowsHeights = rows.map(function () {\n                    return outerHeight($(this));\n                });\n                var i;\n                for (i = 0; i < length; i++) {\n                    rows[i].style[HEIGHT] = toPixels(currentRowsHeights[i]);\n                }\n            },\n            showResizeHandles: function () {\n                var that = this;\n                that._initResizeHandles();\n                that._showResizeHandles();\n            },\n            _initResizeHandles: function () {\n                var that = this;\n                var handles = that.handles;\n                var options = that.options;\n                var handleOptions = that.options.handles;\n                var length = handleOptions.length;\n                var i;\n                if (handles && handles.length > 0) {\n                    return;\n                }\n                for (i = 0; i < length; i++) {\n                    that.handles.push(new TableResizeHandle(extend({\n                        appendTo: options.appendHandlesTo,\n                        resizableElement: that.element,\n                        rootElement: options.rootElement,\n                        rtl: options.rtl\n                    }, handleOptions[i])));\n                }\n                that._bindToResizeHandlesEvents();\n            },\n            _destroyResizeHandles: function () {\n                var that = this;\n                var length = that.handles ? that.handles.length : 0;\n                for (var i = 0; i < length; i++) {\n                    that.handles[i].destroy();\n                }\n            },\n            _showResizeHandles: function () {\n                var that = this;\n                var handles = that.handles || [];\n                var length = handles.length;\n                var i;\n                for (i = 0; i < length; i++) {\n                    that.handles[i].show();\n                }\n            },\n            _bindToResizeHandlesEvents: function () {\n                var that = this;\n                var handles = that.handles || [];\n                var length = handles.length;\n                var i;\n                var handle;\n                for (i = 0; i < length; i++) {\n                    handle = handles[i];\n                    handle.bind(DRAG_START, proxy(that._onResizeHandleDragStart, that));\n                    handle.bind(DRAG, proxy(that._onResizeHandleDrag, that));\n                    handle.bind(DRAG_END, proxy(that._onResizeHandleDragEnd, that));\n                    handle.bind(MOUSE_OVER, proxy(that._onResizeHandleMouseOver, that));\n                    handle.bind(MOUSE_OUT, proxy(that._onResizeHandleMouseOut, that));\n                }\n            },\n            _onResizeHandleDragStart: function () {\n                var that = this;\n                var element = $(that.element);\n                element.addClass(TABLE_RESIZING_CLASS);\n                that._initialElementHeight = outerHeight(element);\n                that._initialElementWidth = outerWidth(element);\n                that._disableKeyboard();\n            },\n            _onResizeHandleDrag: function (e) {\n                this.resize(e);\n            },\n            _onResizeHandleDragEnd: function () {\n                var that = this;\n                $(that.element).removeClass(TABLE_RESIZING_CLASS);\n                that._enableKeyboard();\n            },\n            _enableKeyboard: function () {\n                $(this.options.rootElement).off(KEY_DOWN + NS);\n            },\n            _disableKeyboard: function () {\n                $(this.options.rootElement).on(KEY_DOWN + NS, function (e) {\n                    e.preventDefault();\n                });\n            }\n        });\n        var TableResizingFactory = Class.extend({\n            create: function (editor) {\n                var factory = this;\n                $(editor.body).on(MOUSE_DOWN + NS, TABLE, function (e) {\n                    var eventTarget = e.target;\n                    var eventCurrentTarget = e.currentTarget;\n                    var tableResizing = editor.tableResizing;\n                    var element = tableResizing ? tableResizing.element : null;\n                    if (tableResizing) {\n                        if (element && eventCurrentTarget !== element) {\n                            if (contains(eventCurrentTarget, element) && element !== eventTarget && contains(element, eventTarget)) {\n                                return;\n                            } else {\n                                if (element !== eventTarget) {\n                                    editor._destroyTableResizing();\n                                    factory._initResizing(editor, eventCurrentTarget);\n                                }\n                            }\n                        }\n                    } else {\n                        factory._initResizing(editor, eventCurrentTarget);\n                    }\n                    editor._showTableResizeHandles();\n                }).on(MOUSE_DOWN + NS, function (e) {\n                    var tableResizing = editor.tableResizing;\n                    var element = tableResizing ? tableResizing.element : null;\n                    var target = e.target;\n                    var isResizeHandleOrChild = $(target).hasClass(RESIZE_HANDLE_WRAPPER_CLASS) || $(target).parents(DOT + RESIZE_HANDLE_WRAPPER_CLASS).length > 0;\n                    if (tableResizing && element !== target && !contains(element, target) && !isResizeHandleOrChild) {\n                        editor._destroyTableResizing();\n                    }\n                });\n            },\n            dispose: function (editor) {\n                $(editor.body).off(NS);\n            },\n            _initResizing: function (editor, table) {\n                if (!browser.msie && !browser.mozilla) {\n                    editor.tableResizing = new TableResizing(table, {\n                        appendHandlesTo: editor.body,\n                        rtl: kendo.support.isRtl(editor.element),\n                        rootElement: editor.body\n                    });\n                }\n            }\n        });\n        TableResizingFactory.current = new TableResizingFactory();\n        TableResizing.create = function (editor) {\n            TableResizingFactory.current.create(editor);\n        };\n        TableResizing.dispose = function (editor) {\n            TableResizingFactory.current.dispose(editor);\n        };\n        extend(Editor, { TableResizing: TableResizing });\n    }(window.kendo));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/immutables', ['editor/tables'], f);\n}(function () {\n    (function ($, undefined) {\n        var kendo = window.kendo, Class = kendo.Class, Editor = kendo.ui.editor, dom = Editor.Dom, template = kendo.template, RangeUtils = Editor.RangeUtils, complexBlocks = [\n                'ul',\n                'ol',\n                'tbody',\n                'thead',\n                'table'\n            ], toolsToBeUpdated = [\n                'bold',\n                'italic',\n                'underline',\n                'strikethrough',\n                'superscript',\n                'subscript',\n                'forecolor',\n                'backcolor',\n                'fontname',\n                'fontsize',\n                'createlink',\n                'unlink',\n                'autolink',\n                'addcolumnleft',\n                'addcolumnright',\n                'addrowabove',\n                'addrowbelow',\n                'deleterow',\n                'deletecolumn',\n                'mergecells',\n                'formatting',\n                'cleanformatting'\n            ], IMMUTABALE = 'k-immutable', IMMUTABALE_MARKER_SELECTOR = '[' + IMMUTABALE + ']', IMMUTABLE_SELECTOR = '[contenteditable=\\'false\\']';\n        var rootCondition = function (node) {\n            return $(node).is('body,.k-editor');\n        };\n        var immutable = function (node) {\n            return node.getAttribute && node.getAttribute('contenteditable') == 'false';\n        };\n        var immutableParent = function (node) {\n            return dom.closestBy(node, immutable, rootCondition);\n        };\n        var expandImmutablesIn = function (range) {\n            var startImmutableParent = immutableParent(range.startContainer);\n            var endImmutableParent = immutableParent(range.endContainer);\n            if (startImmutableParent || endImmutableParent) {\n                if (startImmutableParent) {\n                    range.setStartBefore(startImmutableParent);\n                }\n                if (endImmutableParent) {\n                    range.setEndAfter(endImmutableParent);\n                }\n            }\n        };\n        var immutablesContext = function (range) {\n            if (immutableParent(range.commonAncestorContainer)) {\n                return true;\n            } else if (immutableParent(range.startContainer) || immutableParent(range.endContainer)) {\n                var editableNodes = RangeUtils.editableTextNodes(range);\n                if (editableNodes.length === 0) {\n                    return true;\n                }\n            }\n            return false;\n        };\n        var randomId = function (length) {\n            var result = '';\n            var chars = '0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ';\n            for (var i = length || 10; i > 0; --i) {\n                result += chars.charAt(Math.round(Math.random() * (chars.length - 1)));\n            }\n            return result;\n        };\n        var removeImmutables = function (root) {\n            var serializedImmutables = { empty: true }, nodeName, id, serialized;\n            $(root).find(IMMUTABLE_SELECTOR).each(function (i, node) {\n                nodeName = dom.name(node);\n                id = randomId();\n                serialized = '<' + nodeName + ' ' + IMMUTABALE + '=\\'' + id + '\\'></' + nodeName + '>';\n                serializedImmutables[id] = {\n                    node: node,\n                    style: $(node).attr('style')\n                };\n                serializedImmutables.empty = false;\n                $(node).replaceWith(serialized);\n            });\n            return serializedImmutables;\n        };\n        var restoreImmutables = function (root, serializedImmutables) {\n            var id, immutable;\n            $(root).find(IMMUTABALE_MARKER_SELECTOR).each(function (i, node) {\n                id = node.getAttribute(IMMUTABALE);\n                immutable = serializedImmutables[id];\n                $(node).replaceWith(immutable.node);\n                if (immutable.style != $(immutable.node).attr('style')) {\n                    $(immutable.node).removeAttr('style').attr('style', immutable.style);\n                }\n            });\n        };\n        var deletingKey = function (keyCode) {\n            var keys = kendo.keys;\n            return keyCode === keys.BACKSPACE || keyCode == keys.DELETE;\n        };\n        var updateToolOptions = function (tool) {\n            var options = tool ? tool.options : undefined;\n            if (options && options.finder) {\n                options.finder._initOptions({ immutables: true });\n            }\n        };\n        var Immutables = Class.extend({\n            init: function (editor) {\n                this.editor = editor;\n                this.serializedImmutables = {};\n                this.options = $.extend({}, editor && editor.options && editor.options.immutables);\n                var tools = editor.toolbar.tools;\n                updateToolOptions(tools.justifyLeft);\n                updateToolOptions(tools.justifyCenter);\n                updateToolOptions(tools.justifyRight);\n                updateToolOptions(tools.justifyFull);\n            },\n            serialize: function (node) {\n                var result = this._toHtml(node), id;\n                if (result.indexOf(IMMUTABALE) === -1) {\n                    id = this.randomId();\n                    result = result.replace(/>/, ' ' + IMMUTABALE + '=\"' + id + '\">');\n                } else {\n                    id = result.match(/k-immutable\\s*=\\s*['\"](.*)['\"]/)[1];\n                }\n                this.serializedImmutables[id] = node;\n                return result;\n            },\n            _toHtml: function (node) {\n                var serialization = this.options.serialization;\n                var serializationType = typeof serialization;\n                var nodeName;\n                switch (serializationType) {\n                case 'string':\n                    return template(serialization)(node);\n                case 'function':\n                    return serialization(node);\n                default:\n                    nodeName = dom.name(node);\n                    return '<' + nodeName + '></' + nodeName + '>';\n                }\n            },\n            deserialize: function (node) {\n                var that = this;\n                var deserialization = this.options.deserialization;\n                $(IMMUTABALE_MARKER_SELECTOR, node).each(function () {\n                    var id = this.getAttribute(IMMUTABALE);\n                    var immutable = that.serializedImmutables[id];\n                    if (kendo.isFunction(deserialization)) {\n                        deserialization(this, immutable);\n                    }\n                    $(this).replaceWith(immutable);\n                });\n                that.serializedImmutables = {};\n            },\n            randomId: function (length) {\n                return randomId(length);\n            },\n            keydown: function (e, range) {\n                var isDeleting = deletingKey(e.keyCode);\n                var shouldCancelEvent = isDeleting && this._cancelDeleting(e, range) || !isDeleting && this._cancelTyping(e, range);\n                if (shouldCancelEvent) {\n                    e.preventDefault();\n                    return true;\n                }\n            },\n            _cancelTyping: function (e, range) {\n                var editor = this.editor;\n                var keyboard = editor.keyboard;\n                return range.collapsed && !keyboard.typingInProgress && keyboard.isTypingKey(e) && immutablesContext(range);\n            },\n            _cancelDeleting: function (e, range) {\n                var keys = kendo.keys;\n                var backspace = e.keyCode === keys.BACKSPACE;\n                var del = e.keyCode == keys.DELETE;\n                if (!backspace && !del) {\n                    return false;\n                }\n                var cancelDeleting = false;\n                if (range.collapsed) {\n                    if (immutablesContext(range)) {\n                        return true;\n                    }\n                    var immutable = this.nextImmutable(range, del);\n                    if (immutable && backspace) {\n                        var closestSelectionLi = dom.closest(range.commonAncestorContainer, 'li');\n                        if (closestSelectionLi) {\n                            var closestImmutableLi = dom.closest(immutable, 'li');\n                            if (closestImmutableLi && closestImmutableLi !== closestSelectionLi) {\n                                return cancelDeleting;\n                            }\n                        }\n                    }\n                    if (immutable && !dom.tableCell(immutable)) {\n                        if (dom.parentOfType(immutable, complexBlocks) === dom.parentOfType(range.commonAncestorContainer, complexBlocks)) {\n                            while (immutable && immutable.parentNode.childNodes.length == 1) {\n                                immutable = immutable.parentNode;\n                            }\n                            if (dom.tableCell(immutable)) {\n                                return cancelDeleting;\n                            }\n                            this._removeImmutable(immutable, range);\n                        }\n                        cancelDeleting = true;\n                    }\n                }\n                return cancelDeleting;\n            },\n            nextImmutable: function (range, forwards) {\n                var commonContainer = range.commonAncestorContainer;\n                if (dom.isBom(commonContainer) || (forwards && RangeUtils.isEndOf(range, commonContainer) || !forwards && RangeUtils.isStartOf(range, commonContainer))) {\n                    var next = this._nextNode(commonContainer, forwards);\n                    if (next && dom.isBlock(next) && !immutableParent(next)) {\n                        while (next && next.children && next.children[forwards ? 0 : next.children.length - 1]) {\n                            next = next.children[forwards ? 0 : next.children.length - 1];\n                        }\n                    }\n                    return immutableParent(next);\n                }\n            },\n            _removeImmutable: function (immutable, range) {\n                var editor = this.editor;\n                var startRestorePoint = new Editor.RestorePoint(range, editor.body);\n                dom.remove(immutable);\n                Editor._finishUpdate(editor, startRestorePoint);\n            },\n            _nextNode: function (node, forwards) {\n                var sibling = forwards ? 'nextSibling' : 'previousSibling';\n                var current = node, next;\n                while (current && !next) {\n                    next = current[sibling];\n                    if (next && dom.isDataNode(next) && /^\\s|[\\ufeff]$/.test(next.nodeValue)) {\n                        current = next;\n                        next = current[sibling];\n                    }\n                    if (!next) {\n                        current = current.parentNode;\n                    }\n                }\n                return next;\n            }\n        });\n        Immutables.immutable = immutable;\n        Immutables.immutableParent = immutableParent;\n        Immutables.expandImmutablesIn = expandImmutablesIn;\n        Immutables.immutablesContext = immutablesContext;\n        Immutables.toolsToBeUpdated = toolsToBeUpdated;\n        Immutables.removeImmutables = removeImmutables;\n        Immutables.restoreImmutables = restoreImmutables;\n        Editor.Immutables = Immutables;\n    }(window.kendo.jQuery));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/table-wizard/table-wizard-command', ['editor/tables'], f);\n}(function () {\n    (function ($, undefined) {\n        var kendo = window.kendo, Editor = kendo.ui.editor, EditorUtils = Editor.EditorUtils, RangeUtils = Editor.RangeUtils, dom = Editor.Dom, registerTool = EditorUtils.registerTool, ToolTemplate = Editor.ToolTemplate, Command = Editor.Command;\n        var tableFormatFinder = new Editor.BlockFormatFinder([{ tags: ['table'] }]);\n        var cellsFormatFinder = new Editor.BlockFormatFinder([{\n                tags: [\n                    'td',\n                    'th'\n                ]\n            }]);\n        var reUnit = /([a-z]+|%)$/i;\n        var TableWizardCommand = Command.extend({\n            exec: function () {\n                var cmd = this;\n                var editor = cmd.editor;\n                var range = cmd.range = cmd.lockRange();\n                var selectedTable = cmd._sourceTable = !cmd.options.insertNewTable ? cmd._selectedTable(range) : undefined;\n                var selectedCells = cmd._selectedTableCells = selectedTable ? cmd._selectedCells(range) : undefined;\n                var options = {\n                    visible: false,\n                    messages: editor.options.messages,\n                    closeCallback: $.proxy(cmd.onDialogClose, cmd),\n                    table: cmd.parseTable(selectedTable, selectedCells),\n                    dialogOptions: editor.options.dialogOptions,\n                    isRtl: kendo.support.isRtl(editor.wrapper)\n                };\n                var dialog = new Editor.TableWizardDialog(options);\n                dialog.open();\n            },\n            onDialogClose: function (data) {\n                var cmd = this;\n                cmd.releaseRange(cmd.range);\n                if (data) {\n                    if (cmd.options.insertNewTable) {\n                        cmd.insertTable(cmd.createNewTable(data));\n                    } else {\n                        cmd.updateTable(data, cmd._sourceTable, cmd._selectedTableCells);\n                    }\n                }\n            },\n            releaseRange: function (range) {\n                var cmd = this;\n                var doc = cmd.editor.document;\n                dom.windowFromDocument(doc).focus();\n                Command.fn.releaseRange.call(cmd, range);\n            },\n            insertTable: function (table) {\n                var range = this.range;\n                range.insertNode(table);\n                range.collapse(true);\n                this.editor.selectRange(range);\n            },\n            updateTable: function (data, table, selectedCells) {\n                var cmd = this;\n                var tableRows = $(table.rows).toArray();\n                var tableProp = data.tableProperties;\n                var rows = tableProp.rows;\n                var columns = tableProp.columns;\n                var last = function (collection) {\n                    return collection[collection.length - 1];\n                };\n                while (selectedCells.length > 1) {\n                    selectedCells.pop();\n                }\n                var lastSelectedRow = selectedCells.length ? last(selectedCells).parentNode : last(tableRows);\n                var row, parent;\n                cmd._deleteTableRows(tableRows, tableRows.length - rows);\n                if (tableRows.length < rows) {\n                    var rowIndex = $(lastSelectedRow).index();\n                    var cellsLength = lastSelectedRow.cells.length;\n                    var newRowsCount = rows - tableRows.length;\n                    parent = lastSelectedRow.parentNode;\n                    while (newRowsCount) {\n                        row = parent.insertRow(rowIndex + 1);\n                        cmd._insertCells(cellsLength - row.cells.length, row);\n                        newRowsCount--;\n                    }\n                }\n                if (tableRows[0].cells.length > columns) {\n                    $(tableRows).each(function (i, row) {\n                        while (row.cells.length > columns) {\n                            row.deleteCell(-1);\n                        }\n                    });\n                }\n                if (tableRows[0].cells.length < columns) {\n                    var cellIndex = $(last(selectedCells) || last(lastSelectedRow.cells)).index();\n                    $(tableRows).each(function (i, row) {\n                        cmd._insertCells(columns - row.cells.length, row, cellIndex + 1);\n                    });\n                }\n                cmd._updateTableProperties(table, tableProp);\n                var cellProp = data.cellProperties;\n                if (selectedCells[0]) {\n                    dom.attr(selectedCells[0], { id: cellProp.id || null });\n                }\n                (cellProp.selectAllCells ? $(tableRows).children() : $(selectedCells)).each(function (i, cell) {\n                    cmd._updateCellProperties(cell, cellProp);\n                });\n                cmd._updateCaption(table, tableProp);\n                tableProp.cellsWithHeaders = tableProp.cellsWithHeaders || false;\n                if (cmd.cellsWithHeadersAssociated(table) != tableProp.cellsWithHeaders) {\n                    cmd.associateCellsWithHeader(table, tableProp.cellsWithHeaders);\n                }\n            },\n            _isHeadingRow: function (row) {\n                return dom.is(row.parentNode, 'thead') || dom.is(row.cells[0], 'th');\n            },\n            associateCellsWithHeader: function (table, associate) {\n                var timestamp = new Date().getTime();\n                var ids = [];\n                var columns = table.rows[0].cells.length;\n                var index, nextRow, isDataRow;\n                var generateIds = function () {\n                    for (var i = 0; i < columns; i++) {\n                        ids[i] = 'table' + ++timestamp;\n                    }\n                };\n                var modifySellsIds = function (c, cell) {\n                    $(cell)[associate ? 'attr' : 'removeAttr']('id', ids[c]);\n                };\n                var modifyCellsHeadings = function (c, cell) {\n                    $(cell)[associate ? 'attr' : 'removeAttr']('headers', ids[c]);\n                };\n                var isHeadingRow = this._isHeadingRow;\n                $(table.rows).each(function (r, row) {\n                    if (isHeadingRow(row)) {\n                        index = r;\n                        nextRow = table.rows[++index];\n                        isDataRow = nextRow && !isHeadingRow(nextRow);\n                        if (isDataRow) {\n                            generateIds();\n                            $(row.cells).each(modifySellsIds);\n                        }\n                        while (isDataRow) {\n                            $(nextRow.cells).each(modifyCellsHeadings);\n                            nextRow = table.rows[++index];\n                            isDataRow = nextRow && !isHeadingRow(nextRow);\n                        }\n                    }\n                });\n            },\n            cellsWithHeadersAssociated: function (table) {\n                var cells = $(table.rows).children();\n                var isHeadingRow = this._isHeadingRow;\n                var headingIds = [];\n                cells.each(function (c, cell) {\n                    if (cell.id && isHeadingRow(cell.parentNode)) {\n                        headingIds.push(cell.id);\n                    }\n                });\n                var associatedCells = cells.filter(function (c, cell) {\n                    var headersAttr = cell.getAttribute('headers');\n                    return headersAttr && !isHeadingRow(cell.parentNode) && $.inArray(headersAttr, headingIds) > -1;\n                });\n                return !!associatedCells.length;\n            },\n            _insertCells: function (count, row, index) {\n                index = isNaN(index) ? -1 : index;\n                for (var i = 0, cell; i < count; i++) {\n                    cell = row.insertCell(index);\n                    cell.innerHTML = '&nbsp;';\n                }\n            },\n            _deleteTableRows: function (rows, count) {\n                for (var i = 0, row, rowParent; i < count; i++) {\n                    row = rows.pop();\n                    rowParent = row.parentNode;\n                    rowParent.removeChild(row);\n                    if (!rowParent.rows.length) {\n                        dom.remove(rowParent);\n                    }\n                }\n            },\n            createNewTable: function (data) {\n                var cmd = this;\n                var doc = cmd.editor.document;\n                var tableProp = data.tableProperties;\n                var cellProp = data.cellProperties;\n                var cellPropToAll = cellProp.selectAllCells;\n                var table = dom.create(doc, 'table');\n                cmd._updateTableProperties(table, tableProp);\n                cmd._updateCaption(table, tableProp);\n                var tbody = table.createTBody();\n                for (var r = 0, row; r < tableProp.rows; r++) {\n                    row = tbody.insertRow();\n                    for (var c = 0, cell; c < tableProp.columns; c++) {\n                        cell = row.insertCell();\n                        cell.innerHTML = '&nbsp;';\n                        if (r === 0 && c === 0 && cellProp.id) {\n                            cell.id = cellProp.id;\n                        }\n                        cmd._updateCellProperties(cell, cellPropToAll || r === 0 && c === 0 ? cellProp : {});\n                    }\n                }\n                if (tableProp.cellsWithHeaders) {\n                    cmd.associateCellsWithHeader(table, tableProp.cellsWithHeaders);\n                }\n                return table;\n            },\n            _updateTableProperties: function (table, data) {\n                var style = this._getStylesData(data);\n                dom.attr(table, {\n                    cellSpacing: data.cellSpacing || null,\n                    cellPadding: data.cellPadding || null,\n                    className: data.className || null,\n                    id: data.id || null,\n                    summary: data.summary || null,\n                    style: style || null\n                });\n                $(table).addClass('k-table');\n            },\n            _updateCellProperties: function (cell, data) {\n                var style = this._getStylesData(data);\n                style.padding = data.cellPadding || null;\n                style.margin = data.cellMargin || null;\n                dom.attr(cell, {\n                    style: style || null,\n                    className: data.className || null\n                });\n            },\n            _updateCaption: function (table, data) {\n                if (table.caption && !data.captionContent) {\n                    table.deleteCaption();\n                } else if (data.captionContent) {\n                    var caption = table.createCaption();\n                    caption.innerHTML = data.captionContent;\n                    var alignment = this._getAlignmentData(data.captionAlignment);\n                    dom.attr(caption, {\n                        style: {\n                            textAlign: alignment.textAlign,\n                            verticalAlign: alignment.verticalAlign\n                        }\n                    });\n                }\n            },\n            _getStylesData: function (data) {\n                var alignment = this._getAlignmentData(data.alignment);\n                var whiteSpace = 'wrapText' in data ? data.wrapText ? '' : 'nowrap' : null;\n                return {\n                    width: data.width ? data.width + data.widthUnit : null,\n                    height: data.height ? data.height + data.heightUnit : null,\n                    textAlign: alignment.textAlign,\n                    verticalAlign: alignment.verticalAlign,\n                    backgroundColor: data.bgColor || null,\n                    borderWidth: data.borderWidth,\n                    borderStyle: data.borderStyle,\n                    borderColor: data.borderColor,\n                    borderCollapse: data.collapseBorders ? 'collapse' : null,\n                    whiteSpace: whiteSpace\n                };\n            },\n            _getAlignmentData: function (alignment) {\n                var textAlign = '';\n                var verticalAlign = textAlign;\n                if (alignment) {\n                    if (alignment.indexOf(' ') != -1) {\n                        var align = alignment.split(' ');\n                        textAlign = align[0];\n                        verticalAlign = align[1];\n                    } else {\n                        textAlign = alignment;\n                    }\n                }\n                return {\n                    textAlign: textAlign,\n                    verticalAlign: verticalAlign\n                };\n            },\n            parseTable: function (table, selectedCells) {\n                if (!table) {\n                    return {\n                        tableProperties: {},\n                        selectedCells: []\n                    };\n                }\n                var cmd = this;\n                var tStyle = table.style;\n                var rows = table.rows;\n                var caption = table.caption;\n                var captionClone = $(caption ? caption.cloneNode(true) : undefined);\n                captionClone.find('.k-marker').remove();\n                var cssClass = table.className;\n                cssClass = cssClass.replace(/^k-table\\s|\\sk-table$/, '');\n                cssClass = cssClass.replace(/\\sk-table\\s/, ' ');\n                cssClass = cssClass.replace(/^k-table$/, '');\n                var tableAlignment = cmd._getAlignment(table, true);\n                var captionAlignment = caption ? cmd._getAlignment(caption) : undefined;\n                var cellsWithHeaders = cmd.cellsWithHeadersAssociated(table);\n                var tableJson = {\n                    tableProperties: {\n                        width: tStyle.width || table.width ? parseFloat(tStyle.width || table.width) : null,\n                        height: tStyle.height || table.height ? parseFloat(tStyle.height || table.height) : null,\n                        columns: rows[0] ? rows[0].children.length : 0,\n                        rows: rows.length,\n                        widthUnit: cmd._getUnit(tStyle.width),\n                        heightUnit: cmd._getUnit(tStyle.height),\n                        cellSpacing: table.cellSpacing,\n                        cellPadding: table.cellPadding,\n                        alignment: tableAlignment.textAlign,\n                        bgColor: tStyle.backgroundColor || table.bgColor,\n                        className: cssClass,\n                        id: table.id,\n                        borderWidth: tStyle.borderWidth || table.border,\n                        borderColor: tStyle.borderColor,\n                        borderStyle: tStyle.borderStyle || '',\n                        collapseBorders: !!tStyle.borderCollapse,\n                        summary: table.summary,\n                        captionContent: caption ? captionClone.html() : '',\n                        captionAlignment: caption && captionAlignment.textAlign ? captionAlignment.textAlign + ' ' + captionAlignment.verticalAlign : '',\n                        cellsWithHeaders: cellsWithHeaders\n                    },\n                    selectedCells: []\n                };\n                tableJson.rows = cmd.parseTableRows(rows, selectedCells, tableJson);\n                return tableJson;\n            },\n            parseTableRows: function (rows, selectedCells, tableJson) {\n                var cmd = this;\n                var data = [], row, rowData, cells, cell, cellData;\n                for (var i = 0; i < rows.length; i++) {\n                    row = rows[i];\n                    rowData = { cells: [] };\n                    cells = row.cells;\n                    data.push(rowData);\n                    for (var j = 0; j < cells.length; j++) {\n                        cell = cells[j];\n                        cellData = cmd.parseCell(cell);\n                        if ($.inArray(cell, selectedCells) != -1) {\n                            tableJson.selectedCells.push(cellData);\n                        }\n                        rowData.cells.push(cellData);\n                    }\n                }\n                return data;\n            },\n            parseCell: function (cell) {\n                var cmd = this;\n                var cStyle = cell.style;\n                var alignment = cmd._getAlignment(cell);\n                alignment = alignment.textAlign ? alignment.textAlign + ' ' + alignment.verticalAlign : '';\n                var data = {\n                    width: cStyle.width || cell.width ? parseFloat(cStyle.width || cell.width) : null,\n                    height: cStyle.height || cell.height ? parseFloat(cStyle.height || cell.height) : null,\n                    widthUnit: cmd._getUnit(cStyle.width),\n                    heightUnit: cmd._getUnit(cStyle.height),\n                    cellMargin: cStyle.margin,\n                    cellPadding: cStyle.padding,\n                    alignment: alignment,\n                    bgColor: cStyle.backgroundColor || cell.bgColor,\n                    className: cell.className,\n                    id: cell.id,\n                    borderWidth: cStyle.borderWidth || cell.border,\n                    borderColor: cStyle.borderColor,\n                    borderStyle: cStyle.borderStyle,\n                    wrapText: cStyle.whiteSpace != 'nowrap'\n                };\n                return data;\n            },\n            _getAlignment: function (element, horizontalOnly) {\n                var style = element.style;\n                var hAlign = style.textAlign || element.align || '';\n                if (horizontalOnly) {\n                    return { textAlign: hAlign };\n                }\n                var vAlign = style.verticalAlign || element.vAlign || '';\n                if (hAlign && vAlign) {\n                    return {\n                        textAlign: hAlign,\n                        verticalAlign: vAlign\n                    };\n                }\n                if (!hAlign && vAlign) {\n                    return {\n                        textAlign: 'left',\n                        verticalAlign: vAlign\n                    };\n                }\n                if (hAlign && !vAlign) {\n                    return {\n                        textAlign: hAlign,\n                        verticalAlign: 'top'\n                    };\n                }\n                return {\n                    textAlign: '',\n                    verticalAlign: ''\n                };\n            },\n            _getUnit: function (value) {\n                var unit = (value || '').match(reUnit);\n                return unit ? unit[0] : 'px';\n            },\n            _selectedTable: function (range) {\n                var nodes = dom.filterBy(RangeUtils.nodes(range), dom.htmlIndentSpace, true);\n                return tableFormatFinder.findSuitable(nodes)[0];\n            },\n            _selectedCells: function (range) {\n                var nodes = dom.filterBy(RangeUtils.nodes(range), dom.htmlIndentSpace, true);\n                return cellsFormatFinder.findSuitable(nodes);\n            }\n        });\n        var TableWizardTool = Editor.Tool.extend({\n            command: function (options) {\n                options.insertNewTable = this.options.insertNewTable;\n                return new TableWizardCommand(options);\n            }\n        });\n        var TableWizardEditTool = TableWizardTool.extend({\n            update: function (ui, nodes) {\n                var isFormatted = !tableFormatFinder.isFormatted(nodes);\n                ui.toggleClass('k-state-disabled', isFormatted);\n            }\n        });\n        kendo.ui.editor.TableWizardTool = TableWizardTool;\n        kendo.ui.editor.TableWizardCommand = TableWizardCommand;\n        registerTool('tableWizard', new TableWizardEditTool({\n            command: TableWizardCommand,\n            insertNewTable: false,\n            template: new ToolTemplate({\n                template: EditorUtils.buttonTemplate,\n                title: 'Table Wizard'\n            })\n        }));\n    }(window.kendo.jQuery));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('editor/table-wizard/table-wizard-dialog', ['editor/table-wizard/table-wizard-command'], f);\n}(function () {\n    (function ($, undefined) {\n        var kendo = window.kendo, numericTextBoxSettings = {\n                format: '0',\n                min: 0\n            }, units = [\n                'px',\n                'em'\n            ], borderStyles = [\n                'solid',\n                'dotted',\n                'dashed',\n                'double',\n                'groove',\n                'ridge',\n                'inset',\n                'outset',\n                'initial',\n                'inherit',\n                'none',\n                'hidden'\n            ];\n        var tableAlignmentDropDownSettings = {\n            dataSource: [\n                {\n                    className: 'k-icon k-i-table-align-middle-left',\n                    value: 'left'\n                },\n                {\n                    className: 'k-icon k-i-table-align-middle-center',\n                    value: 'center'\n                },\n                {\n                    className: 'k-icon k-i-table-align-middle-right',\n                    value: 'right'\n                },\n                {\n                    className: 'k-icon k-i-align-remove',\n                    value: ''\n                }\n            ],\n            dataTextField: 'className',\n            dataValueField: 'value',\n            template: '<span class=\\'#: className #\\' title=\\'#: tooltip #\\'></span>',\n            valueTemplate: '<span class=\\'k-align-group #: className #\\' title=\\'#: tooltip #\\'></span>'\n        };\n        var cellAlignmentDropDownSettings = {\n            dataSource: [\n                {\n                    className: 'k-icon k-i-table-align-top-left',\n                    value: 'left top'\n                },\n                {\n                    className: 'k-icon k-i-table-align-top-center',\n                    value: 'center top'\n                },\n                {\n                    className: 'k-icon k-i-table-align-top-right',\n                    value: 'right top'\n                },\n                {\n                    className: 'k-icon k-i-table-align-middle-left',\n                    value: 'left middle'\n                },\n                {\n                    className: 'k-icon k-i-table-align-middle-center',\n                    value: 'center middle'\n                },\n                {\n                    className: 'k-icon k-i-table-align-middle-right',\n                    value: 'right middle'\n                },\n                {\n                    className: 'k-icon k-i-table-align-bottom-left',\n                    value: 'left bottom'\n                },\n                {\n                    className: 'k-icon k-i-table-align-bottom-center',\n                    value: 'center bottom'\n                },\n                {\n                    className: 'k-icon k-i-table-align-bottom-right',\n                    value: 'right bottom'\n                },\n                {\n                    className: 'k-icon k-i-align-remove',\n                    value: ''\n                }\n            ],\n            dataTextField: 'className',\n            dataValueField: 'value',\n            template: '<span class=\\'#: className #\\' title=\\'#: tooltip #\\'></span>',\n            valueTemplate: '<span class=\\'k-align-group #: className #\\' title=\\'#: tooltip #\\'></span>'\n        };\n        var accessibilityAlignmentDropDownSettings = {\n            dataSource: [\n                {\n                    className: 'k-icon k-i-table-align-top-left',\n                    value: 'left top'\n                },\n                {\n                    className: 'k-icon k-i-table-align-top-center',\n                    value: 'center top'\n                },\n                {\n                    className: 'k-icon k-i-table-align-top-right',\n                    value: 'right top'\n                },\n                {\n                    className: 'k-icon k-i-table-align-bottom-left',\n                    value: 'left bottom'\n                },\n                {\n                    className: 'k-icon k-i-table-align-bottom-center',\n                    value: 'center bottom'\n                },\n                {\n                    className: 'k-icon k-i-table-align-bottom-right',\n                    value: 'right bottom'\n                },\n                {\n                    className: 'k-icon k-i-align-remove',\n                    value: ''\n                }\n            ],\n            dataTextField: 'className',\n            dataValueField: 'value',\n            template: '<span class=\\'#: className #\\' title=\\'#: tooltip #\\'></span>',\n            valueTemplate: '<span class=\\'k-align-group #: className #\\' title=\\'#: tooltip #\\'></span>'\n        };\n        var dialogTemplate = '<div class=\"k-editor-dialog k-editor-table-wizard-dialog k-action-window k-edit-form-container k-popup-edit-form\">' + '<div id=\"k-table-wizard-tabs\" class=\"k-root-tabs\">' + '<ul>' + '<li class=\"k-state-active\">#= messages.tableTab #</li>' + '<li>#= messages.cellTab #</li>' + '<li>#= messages.accessibilityTab #</li>' + '</ul>' + '<div id=\"k-table-properties\">' + '<div class=\"k-edit-label\">' + '<label for=\"k-editor-table-width\">#= messages.width #</label>' + '</div>' + '<div class=\"k-edit-field\">' + '<input type=\"numeric\" id=\"k-editor-table-width\" />' + '<input id=\"k-editor-table-width-type\" />' + '</div>' + '<div class=\"k-edit-label\">' + '<label for=\"k-editor-table-height\">#= messages.height #</label>' + '</div>' + '<div class=\"k-edit-field\">' + '<input type=\"numeric\" id=\"k-editor-table-height\" />' + '<input id=\"k-editor-table-height-type\" />' + '</div>' + '<div class=\"k-edit-label\">' + '<label for=\"k-editor-table-columns\">#= messages.columns #</label>' + '</div>' + '<div class=\"k-edit-field\">' + '<input type=\"numeric\" id=\"k-editor-table-columns\" />' + '</div>' + '<div class=\"k-edit-label\">' + '<label for=\"k-editor-table-rows\">#= messages.rows #</label>' + '</div>' + '<div class=\"k-edit-field\">' + '<input type=\"numeric\" id=\"k-editor-table-rows\" />' + '</div>' + '<div class=\"k-edit-label\">' + '<label for=\"k-editor-table-cell-spacing\">#= messages.cellSpacing #</label>' + '</div>' + '<div class=\"k-edit-field\">' + '<input type=\"numeric\" id=\"k-editor-table-cell-spacing\" />' + '</div>' + '<div class=\"k-edit-label\">' + '<label for=\"k-editor-table-cell-padding\">#= messages.cellPadding #</label>' + '</div>' + '<div class=\"k-edit-field\">' + '<input type=\"numeric\" id=\"k-editor-table-cell-padding\" />' + '</div>' + '<div class=\"k-edit-label\">' + '<label for=\"k-editor-table-alignment\">#= messages.alignment #</label>' + '</div>' + '<div class=\"k-edit-field\">' + '<input id=\"k-editor-table-alignment\" class=\"k-align\" />' + '</div>' + '<div class=\"k-edit-label\">' + '<label for=\"k-editor-table-bg\">#= messages.background #</label>' + '</div>' + '<div class=\"k-edit-field\">' + '<input id=\"k-editor-table-bg\" />' + '</div>' + '<div class=\"k-edit-label\">' + '<label for=\"k-editor-css-class\">#= messages.cssClass #</label>' + '</div>' + '<div class=\"k-edit-field\">' + '<input id=\"k-editor-css-class\" class=\"k-input k-textbox\" type=\"text\" />' + '</div>' + '<div class=\"k-edit-label\">' + '<label for=\"k-editor-id\">#= messages.id #</label>' + '</div>' + '<div class=\"k-edit-field\">' + '<input id=\"k-editor-id\" class=\"k-input k-textbox\" type=\"text\" />' + '</div>' + '<div class=\"k-edit-label\">' + '<label for=\"k-editor-border-width\">#= messages.border #</label>' + '</div>' + '<div class=\"k-edit-field\">' + '<input type=\"numeric\" id=\"k-editor-border-width\" />' + '<input id=\"k-editor-border-color\" />' + '</div>' + '<div class=\"k-edit-label\">' + '<label for=\"k-editor-border-style\">#= messages.borderStyle #</label>' + '</div>' + '<div class=\"k-edit-field\">' + '<input id=\"k-editor-border-style\" />' + '</div>' + '<div class=\"k-edit-label\">&nbsp;</div>' + '<div class=\"k-edit-field\">' + '<input id=\"k-editor-collapse-borders\" type=\"checkbox\" class=\"k-checkbox\" />' + '<label for=\"k-editor-collapse-borders\" class=\"k-checkbox-label\">#= messages.collapseBorders #</label>' + '</div>' + '</div>' + '<div id=\"k-cell-properties\">' + '<div class=\"k-edit-field\">' + '<input id=\"k-editor-selectAllCells\" type=\"checkbox\" class=\"k-checkbox\" />' + '<label for=\"k-editor-selectAllCells\" class=\"k-checkbox-label\">#= messages.selectAllCells #</label>' + '</div>' + '<div class=\"k-edit-label\">' + '<label for=\"k-editor-cell-width\">#= messages.width #</label>' + '</div>' + '<div class=\"k-edit-field\">' + '<input type=\"numeric\" id=\"k-editor-cell-width\" />' + '<input id=\"k-editor-cell-width-type\" />' + '</div>' + '<div class=\"k-edit-label\">' + '<label for=\"k-editor-cell-height\">#= messages.height #</label>' + '</div>' + '<div class=\"k-edit-field\">' + '<input type=\"numeric\" id=\"k-editor-cell-height\" />' + '<input id=\"k-editor-cell-height-type\" />' + '</div>' + '<div class=\"k-edit-label\">' + '<label for=\"k-editor-table-cell-margin\">#= messages.cellMargin #</label>' + '</div>' + '<div class=\"k-edit-field\">' + '<input type=\"numeric\" id=\"k-editor-table-cell-margin\" />' + '</div>' + '<div class=\"k-edit-label\">' + '<label for=\"k-editor-table-cells-padding\">#= messages.cellPadding #</label>' + '</div>' + '<div class=\"k-edit-field\">' + '<input type=\"numeric\" id=\"k-editor-table-cells-padding\" />' + '</div>' + '<div class=\"k-edit-label\">' + '<label for=\"k-editor-cell-alignment\">#= messages.alignment #</label>' + '</div>' + '<div class=\"k-edit-field\">' + '<input id=\"k-editor-cell-alignment\" class=\"k-align\" />' + '</div>' + '<div class=\"k-edit-label\">' + '<label for=\"k-editor-cell-bg\">#= messages.background #</label>' + '</div>' + '<div class=\"k-edit-field\">' + '<input id=\"k-editor-cell-bg\" />' + '</div>' + '<div class=\"k-edit-label\">' + '<label for=\"k-editor-cell-css-class\">#= messages.cssClass #</label>' + '</div>' + '<div class=\"k-edit-field\">' + '<input id=\"k-editor-cell-css-class\" class=\"k-input k-textbox\" type=\"text\" />' + '</div>' + '<div class=\"k-edit-label\">' + '<label for=\"k-editor-cell-id\">#= messages.id #</label>' + '</div>' + '<div class=\"k-edit-field\">' + '<input id=\"k-editor-cell-id\" class=\"k-input k-textbox\" type=\"text\" />' + '</div>' + '<div class=\"k-edit-label\">' + '<label for=\"k-editor-cell-border-width\">#= messages.border #</label>' + '</div>' + '<div class=\"k-edit-field\">' + '<input type=\"numeric\" id=\"k-editor-cell-border-width\" />' + '<input id=\"k-editor-cell-border-color\" />' + '</div>' + '<div class=\"k-edit-label\">' + '<label for=\"k-editor-cell-border-style\">#= messages.borderStyle #</label>' + '</div>' + '<div class=\"k-edit-field\">' + '<input id=\"k-editor-cell-border-style\" />' + '</div>' + '<div class=\"k-edit-label\">&nbsp;</div>' + '<div class=\"k-edit-field\">' + '<input id=\"k-editor-wrap-text\" type=\"checkbox\" class=\"k-checkbox\" />' + '<label for=\"k-editor-wrap-text\" class=\"k-checkbox-label\">#= messages.wrapText #</label>' + '</div>' + '</div>' + '<div id=\"k-accessibility-properties\">' + '<div class=\"k-edit-label\">' + '<label for=\"k-editor-table-caption\">#= messages.caption #</label>' + '</div>' + '<div class=\"k-edit-field\">' + '<input id=\"k-editor-table-caption\" class=\"k-input k-textbox\" type=\"text\" />' + '</div>' + '<div class=\"k-edit-label\">' + '<label for=\"k-editor-accessibility-alignment\">#= messages.alignment #</label>' + '</div>' + '<div class=\"k-edit-field\">' + '<input id=\"k-editor-accessibility-alignment\" class=\"k-align\" />' + '</div>' + '<div class=\"k-edit-label\">' + '<label for=\"k-editor-accessibility-summary\">#= messages.summary #</label>' + '</div>' + '<div class=\"k-edit-field\">' + '<textarea id=\"k-editor-accessibility-summary\" class=\"k-input k-textbox\"></textarea>' + '</div>' + '<div class=\"k-edit-label\">&nbsp;</div>' + '<div class=\"k-edit-field\">' + '<input id=\"k-editor-cells-headers\" type=\"checkbox\" class=\"k-checkbox\" />' + '<label for=\"k-editor-cells-headers\" class=\"k-checkbox-label\">#= messages.associateCellsWithHeaders #</label>' + '</div>' + '</div>' + '</div>' + '<div class=\"k-edit-buttons k-state-default\">' + '<button class=\"k-button k-primary k-dialog-ok\">#= messages.dialogOk #</button>' + '<button class=\"k-button k-dialog-close\">#= messages.dialogCancel #</button>' + '</div>' + '</div>';\n        var TableWizardDialog = kendo.Class.extend({\n            init: function (options) {\n                this.options = options;\n            },\n            open: function () {\n                var that = this, options = that.options, dialogOptions = options.dialogOptions, tableData = options.table, dialog, messages = options.messages;\n                function close(e) {\n                    e.preventDefault();\n                    that.destroy();\n                    dialog.destroy();\n                }\n                function okHandler(e) {\n                    that.collectDialogValues(tableData);\n                    close(e);\n                    if (that.change) {\n                        that.change();\n                    }\n                    options.closeCallback(tableData);\n                }\n                function closeHandler(e) {\n                    close(e);\n                    options.closeCallback();\n                }\n                dialogOptions.close = closeHandler;\n                dialogOptions.title = messages.tableWizard;\n                dialogOptions.visible = options.visible;\n                dialog = $(that._dialogTemplate(messages)).appendTo(document.body).kendoWindow(dialogOptions).closest('.k-window').toggleClass('k-rtl', options.isRtl).end().find('.k-dialog-ok').click(okHandler).end().find('.k-dialog-close').click(closeHandler).end().data('kendoWindow');\n                var element = dialog.element;\n                that._initTabStripComponent(element);\n                that._initTableViewComponents(element, tableData);\n                that._initCellViewComponents(element, tableData);\n                that._initAccessibilityViewComponents(element, tableData);\n                dialog.center();\n                dialog.open();\n            },\n            _initTabStripComponent: function (element) {\n                var components = this.components = {};\n                components.tabStrip = element.find('#k-table-wizard-tabs').kendoTabStrip({ animation: false }).data('kendoTabStrip');\n            },\n            collectDialogValues: function () {\n                var that = this;\n                var data = that.options.table;\n                that._collectTableViewValues(data);\n                that._collectCellViewValues(data);\n                that._collectAccessibilityViewValues(data);\n            },\n            _collectTableViewValues: function (tableData) {\n                var tableView = this.components.tableView;\n                var tableProperties = tableData.tableProperties;\n                tableProperties.width = tableView.width.value();\n                tableProperties.widthUnit = tableView.widthUnit.value();\n                tableProperties.height = tableView.height.value();\n                tableProperties.columns = tableView.columns.value();\n                tableProperties.rows = tableView.rows.value();\n                tableProperties.heightUnit = tableView.heightUnit.value();\n                tableProperties.cellSpacing = tableView.cellSpacing.value();\n                tableProperties.cellPadding = tableView.cellPadding.value();\n                tableProperties.alignment = tableView.alignment.value();\n                tableProperties.bgColor = tableView.bgColor.value();\n                tableProperties.className = tableView.className.value;\n                tableProperties.id = tableView.id.value;\n                tableProperties.borderWidth = tableView.borderWidth.value();\n                tableProperties.borderColor = tableView.borderColor.value();\n                tableProperties.borderStyle = tableView.borderStyle.value();\n                tableProperties.collapseBorders = tableView.collapseBorders.checked;\n            },\n            _collectCellViewValues: function (table) {\n                var cellData = table.cellProperties = {};\n                var cellView = this.components.cellView;\n                cellData.selectAllCells = cellView.selectAllCells.checked;\n                cellData.width = cellView.width.value();\n                cellData.widthUnit = cellView.widthUnit.value();\n                cellData.height = cellView.height.value();\n                cellData.heightUnit = cellView.heightUnit.value();\n                cellData.cellMargin = cellView.cellMargin.value();\n                cellData.cellPadding = cellView.cellPadding.value();\n                cellData.alignment = cellView.alignment.value();\n                cellData.bgColor = cellView.bgColor.value();\n                cellData.className = cellView.className.value;\n                cellData.id = cellView.id.value;\n                cellData.borderWidth = cellView.borderWidth.value();\n                cellData.borderColor = cellView.borderColor.value();\n                cellData.borderStyle = cellView.borderStyle.value();\n                cellData.wrapText = cellView.wrapText.checked;\n            },\n            _collectAccessibilityViewValues: function (table) {\n                var tableProperties = table.tableProperties;\n                var accessibilityView = this.components.accessibilityView;\n                tableProperties.captionContent = accessibilityView.captionContent.value;\n                tableProperties.captionAlignment = accessibilityView.captionAlignment.value();\n                tableProperties.summary = accessibilityView.summary.value;\n                tableProperties.cellsWithHeaders = accessibilityView.cellsWithHeaders.checked;\n            },\n            _addUnit: function (units, value) {\n                if (value && $.inArray(value, units) == -1) {\n                    units.push(value);\n                }\n            },\n            _initTableViewComponents: function (element, table) {\n                var components = this.components;\n                var tableView = components.tableView = {};\n                var tableProperties = table.tableProperties = table.tableProperties || {};\n                tableProperties.borderStyle = tableProperties.borderStyle || '';\n                this._addUnit(units, tableProperties.widthUnit);\n                this._addUnit(units, tableProperties.heightUnit);\n                this._initNumericTextbox(element.find('#k-editor-table-width'), 'width', tableProperties, tableView);\n                this._initNumericTextbox(element.find('#k-editor-table-height'), 'height', tableProperties, tableView);\n                this._initNumericTextbox(element.find('#k-editor-table-columns'), 'columns', tableProperties, tableView, {\n                    min: 1,\n                    value: 4\n                });\n                this._initNumericTextbox(element.find('#k-editor-table-rows'), 'rows', tableProperties, tableView, {\n                    min: 1,\n                    value: 4\n                });\n                this._initDropDownList(element.find('#k-editor-table-width-type'), 'widthUnit', tableProperties, tableView, units);\n                this._initDropDownList(element.find('#k-editor-table-height-type'), 'heightUnit', tableProperties, tableView, units);\n                this._initNumericTextbox(element.find('#k-editor-table-cell-spacing'), 'cellSpacing', tableProperties, tableView);\n                this._initNumericTextbox(element.find('#k-editor-table-cell-padding'), 'cellPadding', tableProperties, tableView);\n                this._initTableAlignmentDropDown(element.find('#k-editor-table-alignment'), tableProperties);\n                this._initColorPicker(element.find('#k-editor-table-bg'), 'bgColor', tableProperties, tableView);\n                this._initInput(element.find('#k-editor-css-class'), 'className', tableProperties, tableView);\n                this._initInput(element.find('#k-editor-id'), 'id', tableProperties, tableView);\n                this._initNumericTextbox(element.find('#k-editor-border-width'), 'borderWidth', tableProperties, tableView);\n                this._initColorPicker(element.find('#k-editor-border-color'), 'borderColor', tableProperties, tableView);\n                this._initDropDownList(element.find('#k-editor-border-style'), 'borderStyle', tableProperties, tableView, borderStyles);\n                this._initCheckbox(element.find('#k-editor-collapse-borders'), 'collapseBorders', tableProperties, tableView);\n            },\n            _initCellViewComponents: function (element, table) {\n                var components = this.components;\n                var cellView = components.cellView = {};\n                table.selectedCells = table.selectedCells = table.selectedCells || [];\n                var cellProperties = table.selectedCells[0] || {\n                    borderStyle: '',\n                    wrapText: true\n                };\n                this._addUnit(units, cellProperties.widthUnit);\n                this._addUnit(units, cellProperties.heightUnit);\n                this._initCheckbox(element.find('#k-editor-selectAllCells'), 'selectAllCells', table.tableProperties, cellView);\n                this._initNumericTextbox(element.find('#k-editor-cell-width'), 'width', cellProperties, cellView);\n                this._initNumericTextbox(element.find('#k-editor-cell-height'), 'height', cellProperties, cellView);\n                this._initDropDownList(element.find('#k-editor-cell-width-type'), 'widthUnit', cellProperties, cellView, units);\n                this._initDropDownList(element.find('#k-editor-cell-height-type'), 'heightUnit', cellProperties, cellView, units);\n                this._initNumericTextbox(element.find('#k-editor-table-cell-margin'), 'cellMargin', cellProperties, cellView);\n                this._initNumericTextbox(element.find('#k-editor-table-cells-padding'), 'cellPadding', cellProperties, cellView);\n                this._initCellAlignmentDropDown(element.find('#k-editor-cell-alignment'), cellProperties);\n                this._initColorPicker(element.find('#k-editor-cell-bg'), 'bgColor', cellProperties, cellView);\n                this._initInput(element.find('#k-editor-cell-css-class'), 'className', cellProperties, cellView);\n                this._initInput(element.find('#k-editor-cell-id'), 'id', cellProperties, cellView);\n                this._initNumericTextbox(element.find('#k-editor-cell-border-width'), 'borderWidth', cellProperties, cellView);\n                this._initColorPicker(element.find('#k-editor-cell-border-color'), 'borderColor', cellProperties, cellView);\n                this._initDropDownList(element.find('#k-editor-cell-border-style'), 'borderStyle', cellProperties, cellView, borderStyles);\n                this._initCheckbox(element.find('#k-editor-wrap-text'), 'wrapText', cellProperties, cellView);\n            },\n            _initAccessibilityViewComponents: function (element, table) {\n                var components = this.components;\n                var accessibilityView = components.accessibilityView = {};\n                var tableProperties = table.tableProperties;\n                this._initInput(element.find('#k-editor-table-caption'), 'captionContent', tableProperties, accessibilityView);\n                this._initAccessibilityAlignmentDropDown(element.find('#k-editor-accessibility-alignment'), tableProperties);\n                this._initInput(element.find('#k-editor-accessibility-summary'), 'summary', tableProperties, accessibilityView);\n                this._initCheckbox(element.find('#k-editor-cells-headers'), 'cellsWithHeaders', tableProperties, accessibilityView);\n            },\n            _initNumericTextbox: function (element, property, data, storage, settings) {\n                var component = storage[property] = element.kendoNumericTextBox(settings ? $.extend({}, numericTextBoxSettings, settings) : numericTextBoxSettings).data('kendoNumericTextBox');\n                if (property in data) {\n                    component.value(parseInt(data[property], 10));\n                }\n            },\n            _initDropDownList: function (element, property, data, storage, dataSource) {\n                var component = storage[property] = element.kendoDropDownList({ dataSource: dataSource }).data('kendoDropDownList');\n                this._setComponentValue(component, data, property);\n            },\n            _initTableAlignmentDropDown: function (element, data) {\n                var messages = this.options.messages;\n                var tableView = this.components.tableView;\n                var dataSource = tableAlignmentDropDownSettings.dataSource;\n                dataSource[0].tooltip = messages.alignLeft;\n                dataSource[1].tooltip = messages.alignCenter;\n                dataSource[2].tooltip = messages.alignRight;\n                dataSource[3].tooltip = messages.alignRemove;\n                this._initAlignmentDropDown(element, tableAlignmentDropDownSettings, 'alignment', data, tableView);\n            },\n            _initCellAlignmentDropDown: function (element, data) {\n                var messages = this.options.messages;\n                var cellView = this.components.cellView;\n                var dataSource = cellAlignmentDropDownSettings.dataSource;\n                dataSource[0].tooltip = messages.alignLeftTop;\n                dataSource[1].tooltip = messages.alignCenterTop;\n                dataSource[2].tooltip = messages.alignRightTop;\n                dataSource[3].tooltip = messages.alignLeftMiddle;\n                dataSource[4].tooltip = messages.alignCenterMiddle;\n                dataSource[5].tooltip = messages.alignRightMiddle;\n                dataSource[6].tooltip = messages.alignLeftBottom;\n                dataSource[7].tooltip = messages.alignCenterBottom;\n                dataSource[8].tooltip = messages.alignRightBottom;\n                dataSource[9].tooltip = messages.alignRemove;\n                this._initAlignmentDropDown(element, cellAlignmentDropDownSettings, 'alignment', data, cellView);\n            },\n            _initAccessibilityAlignmentDropDown: function (element, data) {\n                var messages = this.options.messages;\n                var accessibilityView = this.components.accessibilityView;\n                var dataSource = accessibilityAlignmentDropDownSettings.dataSource;\n                dataSource[0].tooltip = messages.alignLeftTop;\n                dataSource[1].tooltip = messages.alignCenterTop;\n                dataSource[2].tooltip = messages.alignRightTop;\n                dataSource[3].tooltip = messages.alignLeftBottom;\n                dataSource[4].tooltip = messages.alignCenterBottom;\n                dataSource[5].tooltip = messages.alignRightBottom;\n                dataSource[6].tooltip = messages.alignRemove;\n                this._initAlignmentDropDown(element, accessibilityAlignmentDropDownSettings, 'captionAlignment', data, accessibilityView);\n            },\n            _initAlignmentDropDown: function (element, settings, name, data, storage) {\n                var component = storage[name] = element.kendoDropDownList(settings).data('kendoDropDownList');\n                component.list.addClass('k-align').css('width', '110px');\n                this._setComponentValue(component, data, name);\n            },\n            _setComponentValue: function (component, data, property) {\n                if (property in data) {\n                    component.value(data[property]);\n                }\n            },\n            _initColorPicker: function (element, property, data, storage) {\n                var component = storage[property] = element.kendoColorPicker({\n                    buttons: false,\n                    clearButton: true\n                }).data('kendoColorPicker');\n                if (data[property]) {\n                    component.value(data[property]);\n                }\n            },\n            _initInput: function (element, property, data, storage) {\n                var component = storage[property] = element.get(0);\n                if (property in data) {\n                    component.value = data[property];\n                }\n            },\n            _initCheckbox: function (element, property, data, storage) {\n                var component = storage[property] = element.get(0);\n                if (property in data) {\n                    component.checked = data[property];\n                }\n            },\n            destroy: function () {\n                this._destroyComponents(this.components.tableView);\n                this._destroyComponents(this.components.cellView);\n                this._destroyComponents(this.components.accessibilityView);\n                this._destroyComponents(this.components);\n                delete this.components;\n            },\n            _destroyComponents: function (components) {\n                for (var widget in components) {\n                    if (components[widget].destroy) {\n                        components[widget].destroy();\n                    }\n                    delete components[widget];\n                }\n            },\n            _dialogTemplate: function (messages) {\n                return kendo.template(dialogTemplate)({ messages: messages });\n            }\n        });\n        kendo.ui.editor.TableWizardDialog = TableWizardDialog;\n    }(window.kendo.jQuery));\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));\n(function (f, define) {\n    define('kendo.editor', [\n        'kendo.combobox',\n        'kendo.dropdownlist',\n        'kendo.resizable',\n        'kendo.window',\n        'kendo.colorpicker',\n        'kendo.imagebrowser',\n        'kendo.tabstrip',\n        'kendo.numerictextbox',\n        'util/undoredostack',\n        'editor/main',\n        'editor/dom',\n        'editor/serializer',\n        'editor/range',\n        'editor/system',\n        'editor/inlineformat',\n        'editor/formatblock',\n        'editor/linebreak',\n        'editor/lists',\n        'editor/link',\n        'editor/file',\n        'editor/image',\n        'editor/components',\n        'editor/indent',\n        'editor/viewhtml',\n        'editor/formatting',\n        'editor/toolbar',\n        'editor/tables',\n        'editor/export',\n        'editor/import',\n        'editor/resizing/column-resizing',\n        'editor/resizing/row-resizing',\n        'editor/resizing/table-resizing',\n        'editor/resizing/table-resize-handle',\n        'editor/immutables',\n        'editor/table-wizard/table-wizard-command',\n        'editor/table-wizard/table-wizard-dialog'\n    ], f);\n}(function () {\n    var __meta__ = {\n        id: 'editor',\n        name: 'Editor',\n        category: 'web',\n        description: 'Rich text editor component',\n        depends: [\n            'combobox',\n            'dropdownlist',\n            'window',\n            'colorpicker'\n        ],\n        features: [\n            {\n                id: 'editor-imagebrowser',\n                name: 'Image Browser',\n                description: 'Support for uploading and inserting images',\n                depends: ['imagebrowser']\n            },\n            {\n                id: 'editor-resizable',\n                name: 'Resize handle',\n                description: 'Support for resizing the content area via a resize handle',\n                depends: ['resizable']\n            },\n            {\n                id: 'editor-tablewizard',\n                name: 'Table wizard dialog',\n                description: 'Support for table properties configuration',\n                depends: [\n                    'tabstrip',\n                    'button',\n                    'numerictextbox'\n                ]\n            },\n            {\n                id: 'editor-pdf-export',\n                name: 'PDF export',\n                description: 'Export Editor content as PDF',\n                depends: [\n                    'pdf',\n                    'drawing'\n                ]\n            }\n        ]\n    };\n    return window.kendo;\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\n    (a3 || a2)();\n}));"],"sourceRoot":"/source/"}